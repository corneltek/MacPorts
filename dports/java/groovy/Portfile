# $Id$

PortSystem 1.0

name            groovy
version         2.3.7

categories      java lang
maintainers     breun.nl:nils openmaintainer
platforms       darwin
license         Apache-2
supported_archs noarch

description     Groovy -- a Java-based scripting language

long_description Groovy is a new agile dynamic language for the JVM combining \
                lots of great features from languages like Python, Ruby and \
                Smalltalk and making them available to Java developers \
                using a Java-like syntax. \
                \
                Groovy is designed to help you get things done on the Java \
                platform in a quicker, more concise and fun way - bringing \
                the power of Python and Ruby inside the Java platform. \
                \
                Groovy can be used as an alternative compiler to javac to \
                generate standard Java bytecode to be used by any Java project \
                or it can be used dynamically as an alternative language such \
                as for scripting Java objects, templating or writing unit test cases.

homepage        http://groovy.codehaus.org/
master_sites    http://dl.bintray.com/groovy/maven/
distname        groovy-binary-${version}
use_zip         yes

checksums       rmd160  1e735e5ce9ac67fadd3949a6679ae011392a0f22 \
                sha256  38d6faaf3cae78d91852ab1be8070a7a7c5d206bd172f2cd7c0bb131e23e2525

worksrcdir      groovy-${version}

use_configure   no

build {}

destroot {
    set target ${destroot}${prefix}/share/java/${name}

    # Create the target java directory
    xinstall -m 755 -d ${target}

    # Copy over the needed elements of our directory tree
    foreach d { bin conf embeddable indy lib } {
        copy ${worksrcpath}/${d} ${target}
    }

    # Remove extraneous bat files
    foreach f [glob -directory ${target}/bin *.bat] {
        delete ${f}
    }

    # Add symlinks to the scripts
    foreach f { grape groovy groovyConsole groovyc groovydoc groovysh java2groovy startGroovy } {
        ln -s ../share/java/groovy/bin/${f} ${destroot}${prefix}/bin
    }
}

livecheck.regex groovy-binary-(\[\\d\.\]+)${extract.suffix}
