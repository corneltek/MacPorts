--- d2j-apk-sign.sh.orig	2013-01-31 23:50:23.000000000 +0100
+++ d2j-apk-sign.sh	2013-01-31 23:51:32.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.ApkSign" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.ApkSign" $@
--- d2j-asm-verify.sh.orig	2013-01-31 23:50:23.000000000 +0100
+++ d2j-asm-verify.sh	2013-01-31 23:53:14.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.AsmVerify" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.AsmVerify" $@
--- d2j-decrpyt-string.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-decrpyt-string.sh	2013-01-31 23:53:56.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.DecryptStringCmd" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.DecryptStringCmd" $@
--- d2j-dex-asmifier.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-dex-asmifier.sh	2013-01-31 23:54:14.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.util.ASMifierFileV" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.util.ASMifierFileV" $@
--- d2j-dex-dump.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-dex-dump.sh	2013-01-31 23:54:37.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.util.Dump" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.util.Dump" $@
--- d2j-dex2jar.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-dex2jar.sh	2013-01-31 23:55:00.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.Dex2jarCmd" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.Dex2jarCmd" $@
--- d2j-init-deobf.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-init-deobf.sh	2013-01-31 23:55:07.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.DeObfInitCmd" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.DeObfInitCmd" $@
--- d2j-jar-access.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-jar-access.sh	2013-01-31 23:55:11.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.JarAccessCmd" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.JarAccessCmd" $@
--- d2j-jar-remap.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-jar-remap.sh	2013-01-31 23:55:15.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.JarRemap" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.JarRemap" $@
--- d2j-jar2dex.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-jar2dex.sh	2013-01-31 23:55:19.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.Jar2Dex" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.Jar2Dex" $@
--- d2j-jar2jasmin.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-jar2jasmin.sh	2013-01-31 23:55:23.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.Jar2Jasmin" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.Jar2Jasmin" $@
--- d2j-jasmin2jar.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ d2j-jasmin2jar.sh	2013-01-31 23:55:27.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.tools.Jasmin2Jar" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.tools.Jasmin2Jar" $@
--- dex-dump.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ dex-dump.sh	2013-01-31 23:55:36.000000000 +0100
@@ -1,23 +1,3 @@
 #!/bin/sh
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.util.Dump" $1 $2 $3 $4 $5 $6
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.util.Dump" $1 $2 $3 $4 $5 $6
--- dex2jar.sh.orig	2013-01-31 23:50:24.000000000 +0100
+++ dex2jar.sh	2013-01-31 23:55:41.000000000 +0100
@@ -17,24 +17,4 @@
 # limitations under the License.
 #
 
-# copy from $Tomcat/bin/startup.sh
-# resolve links - $0 may be a softlink
-PRG="$0"
-while [ -h "$PRG" ] ; do
-  ls=`ls -ld "$PRG"`
-  link=`expr "$ls" : '.*-> \(.*\)$'`
-  if expr "$link" : '/.*' > /dev/null; then
-    PRG="$link"
-  else
-    PRG=`dirname "$PRG"`/"$link"
-  fi
-done
-PRGDIR=`dirname "$PRG"`
-#
-
-_classpath="."
-for k in "$PRGDIR"/lib/*.jar
-do
- _classpath="${_classpath}:${k}"
-done
-java -Xms512m -Xmx1024m -classpath "${_classpath}" "com.googlecode.dex2jar.v3.Main" $@
+java -Xms512m -Xmx1024m -classpath "@@PREFIX@@/lib/dex2jar" "com.googlecode.dex2jar.v3.Main" $@
