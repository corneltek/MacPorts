# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                pecco
version             20111221
categories          math
platforms           darwin
maintainers         hum openmaintainer
license             GPL-2

homepage            http://www.tkl.iis.u-tokyo.ac.jp/~ynaga/pecco/
description         simple C++ library for linear classification with conjunctive features
long_description    ${name} is a ${description}.

master_sites        ${homepage}
checksums           rmd160  4de5dec7470d1ce4ff241968d498c1aa54dd4eca \
                    sha256  6f7212a7cbd3e5cdf37d0541d98ac59ddcf3230fa1be2c8127855d82d84def39

worksrcdir          ${name}
use_bzip2           yes

use_configure       no

variant universal   {}

build.args          CC="${configure.cxx}" \
                    INCLUDES="${configure.cppflags}" \
                    CFLAGS="${configure.cxxflags} [get_canonical_archflags cxx]"

destroot {
    xinstall -m 755 -W ${worksrcpath} ${name} ${destroot}${prefix}/bin
    file mkdir ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath} COPYING GPL README \
                       ${destroot}${prefix}/share/doc/${name}
}

variant dartsclone description {Use darts-clone} {
    depends_build-append       port:darts-clone
    patchfiles-append          patch-pecco_conf.h.diff
}

variant float description {Use float as the type of weights} {
    build.args-append          CFLAGS=-DUSE_FLOAT
}

variant trie description {Encode weights into a trie in kernel_model} {
    build.args-append          CFLAGS=-DABUSE_TRIE
}

default_variants    +dartsclone
    
livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     ${name}-(\\d+)\\.tar
