# $Id: Portfile,v 1.10 2004/02/09 00:44:18 rshaw Exp $
PortSystem 1.0

name			gnuplot
version			3.8h.0
revision		2
categories		math science
maintainers		rshaw@opendarwin.org
description		A command-driven interactive function plotting program
long_description	Gnuplot is a command-driven interactive function \
					plotting program. Plots any number of functions, \
					built up of C operators, C library functions, and \
					some things C doesn't have like **, sgn(), etc. \
					Also support for plotting data files, to compare \
					actual data to theoretical curves.
platforms		darwin
master_sites	http://www.ctan.org/tex-archive/graphics/gnuplot/testing/
checksums		md5	0058a1a9a33fee94750c436562d297b4
depends_lib		lib:libgd:gd \
				lib:libreadline:readline \
				lib:libz.1:zlib
patchfiles		patch-src-term.h
configure.env	LDFLAGS="-L${prefix}/lib" \
				CPPFLAGS="-I${prefix}/include -no-cpp-precomp"
configure.args	--with-readline=gnu --with-gd --without-x \
				--mandir='\${prefix}/share/man'
destroot.destdir	prefix=${destroot}${prefix}

variant x11 {
	depends_lib		lib:libX11.6:XFree86 \
					lib:libgd:gd \
					lib:libreadline:readline

	configure.args-delete	--without-x
	configure.args-append	--with-x
}
variant aqua {
	depends_lib		lib:libpng:libpng \
					lib:libreadline:readline
	depends_build	path:${prefix}/share/aquaterm/gnuplot/aquaTerm.trm:aquaterm

	patchfiles		patch-aquaterm.diff \
					patch-term-tkcanvas.trm

	post-patch	{
		file copy ${prefix}/share/aquaterm/gnuplot/aquaTerm.trm \
			${worksrcpath}/term/aquaTerm.trm
	}

	configure.args-delete	--with-gd
	configure.args-append	--without-gd
}
