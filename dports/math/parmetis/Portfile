# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                parmetis
version             4.0.3
categories          math
platforms           darwin
maintainers         ryandesign openmaintainer

description         ParMETIS - parallel graph partitioning

long_description    ParMETIS - Parallel Graph Partitioning and Fill-reducing Matrix Ordering

homepage            http://glaros.dtc.umn.edu/gkhome/metis/parmetis/overview
master_sites        http://glaros.dtc.umn.edu/gkhome/fetch/sw/parmetis/

checksums           rmd160  1e81baf2bafe79b7abed656bff2fa3745966a196 \
                    sha256  f2d9a231b7cf97f1fee6e8c9663113ebf6c240d407d3c118c55b3633d6be6e5f

depends_build       port:cmake \
                    port:mpich-default

patchfiles          patch-Makefile.diff

# mpich-default is not universal
universal_variant no

configure.cc        ${prefix}/bin/mpicc-mp
configure.cxx       ${prefix}/bin/mpicxx-mp

configure.cmd       make config
configure.env       CONFIG_FLAGS=-DCMAKE_INSTALL_NAME_DIR=${prefix}/lib
configure.pre_args  prefix=${prefix}
configure.args      cc=${configure.cc} \
                    cxx=${configure.cxx} \
                    shared=1

# No rule to make target `w'.  Stop.
build.pre_args-delete -w
destroot.pre_args-delete -w

livecheck.type      regex
livecheck.url       http://glaros.dtc.umn.edu/gkhome/metis/parmetis/download
livecheck.regex     /${name}-(\[0-9.\]+)${extract.suffix}
