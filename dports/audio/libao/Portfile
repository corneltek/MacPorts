# $Id: Portfile,v 1.12 2004/01/18 13:03:21 toby Exp $

PortSystem 1.0
name             libao
version          0.8.4
categories       audio
maintainers      toby@opendarwin.org
description      A Cross-platform Audio Library
long_description \
    libao is a way to easily add cross-platform audio output to your \
    program. Output devices are implemented as dynamic plugins, and \
    support for OSS, ESD, ALSA, aRTs, Solaris, and Irix outputs are \
    currently supported.
homepage         http://www.xiph.org/ao/
platforms        darwin
master_sites     ${homepage}src/
checksums        md5 0525549b0bf665f617913c916064cc87
patchfiles       patch-configure

configure.env    CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.args   --mandir=${prefix}/share/man \
                 --disable-arts --disable-esd \
                 --disable-oss --disable-X

variant darwin {
    depends_lib-append lib:libdl:dlcompat
    patchfiles-append  apple-patches patch-ao_macosx.c

    post-destroot {
        system "echo default_driver=macosx >> ${destroot}${prefix}/etc/libao.conf"
    }
}

variant esd {
    depends_lib-append    lib:libesd.0:esound
    configure.args-delete --disable-esd
    configure.args-append --enable-esd
}
