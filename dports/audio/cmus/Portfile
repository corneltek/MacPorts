# $Id$

PortSystem 1.0
PortGroup           github 1.0

github.setup        cmus cmus 2.6.0 v
categories          audio
maintainers         g5pw openmaintainer
license             GPL-2+
description         ncurses based music player
long_description    cmus is a small and fast text mode music player for Linux \
                    and many other UNIX like operating systems.
homepage            https://cmus.github.io/
platforms           darwin

checksums           rmd160  90c3867ef87f7831a6cfdd942b420541291c5f8c \
                    sha256  4c751b55594d098fc9768dfd40c15ac6e7f061ebf02276c8f3e0ef7200383839

depends_build       path:bin/pkg-config:pkgconfig
depends_lib         port:libao \
                    port:libmad \
                    port:libogg \
                    port:libvorbis \
                    port:libiconv \
                    port:ncurses

universal_variant   no
build.args          V=2

# ccache: invalid option -- L
configure.ccache    no

configure.pre_args
configure.args      prefix=${prefix} CONFIG_FLAC=n CONFIG_MIKMOD=n \
                    CONFIG_MODPLUG=n CONFIG_MPC=n CONFIG_FFMPEG=n \
                    CONFIG_AAC=n CONFIG_MP4=n CONFIG_MAD=y CONFIG_VORBIS=y \
                    HOSTCC="${configure.cc}" \
                    HOST_CFLAGS="${configure.cflags}" \
                    HOST_LDFLAGS="${configure.ldflags}"

variant aac  description {Support aac files}   {
    depends_lib-append    port:faad2 path:lib/libmp4v2.dylib:mp4v2
    configure.args-delete CONFIG_AAC=n CONFIG_MP4=n
    configure.args-append CONFIG_AAC=y CONFIG_MP4=y
}

variant flac  description {Support flac files} {
    depends_lib-append    port:flac
    configure.args-delete CONFIG_FLAC=n
    configure.args-append CONFIG_FLAC=y
}

variant mikmod  description {Support mod files} {
    depends_lib-append    port:libmikmod
    configure.args-delete CONFIG_MIKMOD=n
    configure.args-append CONFIG_MIKMOD=y
}

variant mpc  description {Support musepack files} {
    depends_lib-append    port:libmpcdec
    configure.args-delete CONFIG_MPC=n
    configure.args-append CONFIG_MPC=y
}
