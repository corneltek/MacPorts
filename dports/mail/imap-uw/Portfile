# $Id: Portfile,v 1.12 2003/11/17 21:20:00 jkh Exp $

PortSystem 1.0
name		imap-uw
version		2002e
revision	1
categories	mail
maintainers	mij@opendarwin.org
description	University of Washington IMAP daemon
homepage	http://www.washington.edu/imap/
platforms	darwin

long_description $description

master_sites	ftp://ftp.cac.washington.edu/imap/ \
		http://distfiles.opendarwin.org/

extract.suffix	.tar.Z
distname	imap-${version}
checksums	md5 0d246d868f20d8c441d235b77c940676

configure	{}

build.target	osx

platform darwin 7 { patchfiles patch-src-osdep-unix-Makefile \
		    patch-src-osdep-unix-ckp_osx.c }

variant ssl_plain { patchfiles patch-Makefile
		    build.args SSLTYPE=unix }

variant mbx	{ build.args-append CREATEPROTO=mbxproto }

variant subdir	{ patchfiles-append patch-env_unix.c }

destroot	{ system "install -m 755 -d ${destroot}${prefix}/sbin"
		  system "install -m 755 -d ${destroot}${prefix}/bin"
		  system "install -m 755 -d ${destroot}${prefix}/share/man/man8"
		  system "install -m 755 -d ${destroot}${prefix}/share/man/man1"
		  system "install -m 755 ${worksrcpath}/imapd/imapd ${destroot}${prefix}/sbin"
		  system "install -m 755 ${worksrcpath}/ipopd/ipop3d ${destroot}${prefix}/sbin/ipop2d"
		  system "install -m 755 ${worksrcpath}/ipopd/ipop3d ${destroot}${prefix}/sbin/ipop3d"
		  system "install -m 755 ${worksrcpath}/mailutil/mailutil ${destroot}${prefix}/bin"
		  system "install -m 755 ${worksrcpath}/tmail/tmail ${destroot}${prefix}/sbin"
		  system "install -m 755 ${worksrcpath}/dmail/dmail ${destroot}${prefix}/sbin"
		  system "install -m 755 ${worksrcpath}/mtest/mtest ${destroot}${prefix}/bin"
		  system "install -m 755 ${worksrcpath}/mlock/mlock ${destroot}${prefix}/sbin"
		  system "install -m 755 ${worksrcpath}/src/imapd/imapd.8c ${destroot}${prefix}/share/man/man8/imapd.8"
		  system "install -m 755 ${worksrcpath}/src/ipopd/ipopd.8c ${destroot}${prefix}/share/man/man8/ipopd.8"
		  system "install -m 755 ${worksrcpath}/src/mailutil/mailutil.1 ${destroot}${prefix}/share/man/man1"
		  system "install -m 755 ${worksrcpath}/src/tmail/tmail.1 ${destroot}${prefix}/share/man/man1"
		  system "install -m 755 ${worksrcpath}/src/dmail/dmail.1 ${destroot}${prefix}/share/man/man1" }
