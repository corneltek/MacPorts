# $Id: Portfile,v 1.28 2004/02/24 20:56:57 landonf Exp $

PortSystem 1.0
name		mutt
version		1.4.2
categories	mail
maintainers	eric@opendarwin.org
description	Mongrel of Mail User Agents (part Elm, Pine, Mush, mh, etc)
homepage	http://www.mutt.org/
platforms	darwin linux

long_description Mutt -- "The Mongrel of Mail User Agents" (part Elm, part \
		 Pine, part mh, part slrn, part everything else) is an \
		 interactive screen-oriented mailer program that supersedes \
		 Elm, Pine, mail and mailx.  Features include color support, \
		 message threading, MIME support (including RFC1522 support \
		 for encoded headers), customizable key bindings, POP3, \
		 Delivery Status Notification (DSN) support, and PGP/MIME.

master_sites	ftp://ftp.mutt.org/${portname}/
checksums      ${distname}${extract.suffix} md5 \
			6045b47cbba8170d6a9fdccc1aa817b9

distname	${portname}-${portversion}i

patch.args	-p1

worksrcdir	${portname}-${portversion}

configure.args	--disable-warnings \
		--mandir='\${prefix}/share/man' \
		--with-docdir='\${prefix}/share/doc/mutt'

variant darwin {
    configure.args-append	--with-libiconv-prefix=${prefix}
    depends_lib			lib:libiconv.2:libiconv lib:libintl.1:gettext
}

variant linux {
    configure.env		CFLAGS=-I/usr/kerberos/include
}

variant pop	{ configure.args-append --enable-pop }
variant imap	{ configure.args-append --enable-imap }
variant ssl	{ configure.args-append --with-ssl }

variant compress {
    configure.args-append	--enable-compressed
    patch_sites-append		http://www.spinnaker.de/mutt/compressed/
    patchfiles-append		patch-1.4.1.rr.compressed.1.gz
    checksums-append		patch-1.4.1.rr.compressed.1.gz md5 \
					b50484f8b12328c3ee69222a3eb1da11
}

variant imap-headercache requires imap {
    configure.args-append	--enable-compressed
    patch_sites-append		http://dwyn.net/mutt/
    patchfiles-append		mutt-1.4-headercache.patch
    checksums-append		mutt-1.4-headercache.patch md5 \
					e22751247e31d4e506c5246c0f6d6fa7
}

variant nntp conflicts compress {
    configure.args-append	--enable-nntp
    patch_sites-append		http://www.mutt.org.ua/download/mutt-1.4.1/
    patchfiles-append		patch-1.4.1.vvv.nntp.gz
    checksums-append		patch-1.4.1.vvv.nntp.gz md5 \
					447b199826b629ab9318548a34e01b8f
}
