# $Id: Portfile,v 1.6 2004/03/04 06:34:05 rshaw Exp $

PortSystem        1.0
name              spambnc 
version           20040302
categories        mail
description       Set of procmail recipies which handle known/suspected spam
maintainers       andrea+darwinports@webcom.it
long_description  The Spam Bouncer is a set of procmail recipes, or instructions, which \
                  search the headers and text of your incoming email to see if it meets \
                  one or more of several categories (known addresses, rogue ISPs, bulk \
                  mail software etc etc). \
                   \
                  The Spam Bouncer sorts suspected spam into two categories -- mail from \
                  known spam sources which is definitely spam, and other mail which is \
                  probably spam, but might also be legitimate. It then tags this email \
                  with appropriate headers giving the spam classification, and responds \
                  according to the parameters you have set.
homepage          http://www.spambouncer.org/
platforms         darwin
master_sites      ${homepage} ftp://ftp.spambouncer.org/
distfiles         sb.tar.gz index.shtml
checksums         sb.tar.gz md5 3995dc348a64f1e37b73bae4e7c8498e
depends_run       bin:procmail:procmail
patchfiles        patch-procmail.rc

dist_subdir       ${portname}/${version}
worksrcdir        ${portname}
extract.only      sb.tar.gz
extract           {
                  system "mkdir ${workpath}/${portname}"
                  system "cd ${workpath}/${portname} && \
                    gzip -dc ${distpath}/sb.tar.gz | tar -xf -"
                  system "cp ${distpath}/index.shtml ${workpath}/documentation.html"
}
configure         {}
build             {}
destroot          {
                  system "cp -pr ${workpath}/${portname} \
                    ${destroot}${prefix}/share/${portname} "
                  reinplace "s=%%SBDIR%%=${prefix}/share/${portname}=" \
                    ${destroot}${prefix}/share/${portname}/procmail.rc
                  xinstall -m 755 -d ${destroot}${prefix}/share/doc/${portname}
                  xinstall -m 644 -c ${workpath}/documentation.html \
                    ${destroot}${prefix}/share/doc/${portname}
}
