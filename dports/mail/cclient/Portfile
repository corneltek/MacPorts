# $Id: Portfile,v 1.4 2003/11/17 21:20:00 jkh Exp $

PortSystem 1.0
name            cclient
version        	2002e
categories      mail
maintainers    	bchesneau@mac.com
description     UW IMAP c-client library
long_description	C-client is a common API for accessing mailboxes. It is used \
			internally by the popular PINE mail reader as well as the \
			University of Washington's IMAP server.
homepage	http://www.washington.edu/imap/
platforms	darwin
master_sites	ftp://ftp.cac.washington.edu/imap/\
		http://distfiles.opendarwin.org/
extract.suffix    .tar.Z
distname	imap-${version}	
worksrcdir	imap-${version}
checksums	md5 0d246d868f20d8c441d235b77c940676

use_configure	no
build.target	osx EXTRACFLAGS=-fno-common

variant ssl_plaintext {
		patchfiles patch-Makefile
		build.args SSLTYPE=unix
}

destroot {
	#headers
	file mkdir ${destroot}${prefix}/include/c-client
	system "install -m 755 ${worksrcpath}/c-client/c-client.h ${destroot}${prefix}/include/c-client/c-client.h"
	system "install -m 755 ${worksrcpath}/c-client/dummy.h ${destroot}${prefix}/include/c-client/dummy.h"
	system "install -m 755 ${worksrcpath}/c-client/env.h ${destroot}${prefix}/include/c-client/env.h"
	system "install -m 755 ${worksrcpath}/c-client/fdstring.h  ${destroot}${prefix}/include/c-client/fdstring.h"
	system "install -m 755 ${worksrcpath}/c-client/flocksim.h ${destroot}${prefix}/include/c-client/flocksim.h"
	system "install -m 755 ${worksrcpath}/c-client/env_unix.h ${destroot}${prefix}/include/c-client/env_unix.h"
	system "install -m 755 ${worksrcpath}/c-client/flstring.h ${destroot}${prefix}/include/c-client/flstring.h"
	system "install -m 755 ${worksrcpath}/c-client/fs.h ${destroot}${prefix}/include/c-client/fs.h"
	system "install -m 755 ${worksrcpath}/c-client/ftl.h ${destroot}${prefix}/include/c-client/ftl.h"
	system "install -m 755 ${worksrcpath}/c-client/imap4r1.h ${destroot}${prefix}/include/c-client/imap4r1.h"
	system "install -m 755 ${worksrcpath}/c-client/linkage.c ${destroot}${prefix}/include/c-client/linkage.c"
	system "install -m 755 ${worksrcpath}/c-client/linkage.h ${destroot}${prefix}/include/c-client/linkage.h"
	system "install -m 755 ${worksrcpath}/c-client/mail.h ${destroot}${prefix}/include/c-client/mail.h"
	system "install -m 755 ${worksrcpath}/c-client/mbox.h ${destroot}${prefix}/include/c-client/mbox.h"
	system "install -m 755 ${worksrcpath}/c-client/mbx.h ${destroot}${prefix}/include/c-client/mbx.h"
	system "install -m 755 ${worksrcpath}/c-client/mh.h ${destroot}${prefix}/include/c-client/mh.h"
	system "install -m 755 ${worksrcpath}/c-client/misc.h ${destroot}${prefix}/include/c-client/misc.h"
	system "install -m 755 ${worksrcpath}/c-client/mmdf.h ${destroot}${prefix}/include/c-client/mmdf.h"
	system "install -m 755 ${worksrcpath}/c-client/mtx.h ${destroot}${prefix}/include/c-client/mtx.h"
	system "install -m 755 ${worksrcpath}/c-client/mx.h ${destroot}${prefix}/include/c-client/mx.h"
	system "install -m 755 ${worksrcpath}/c-client/netmsg.h ${destroot}${prefix}/include/c-client/netmsg.h"
	system "install -m 755 ${worksrcpath}/c-client/news.h ${destroot}${prefix}/include/c-client/news.h "
	system "install -m 755 ${worksrcpath}/c-client/newsrc.h ${destroot}${prefix}/include/c-client/newsrc.h"
	system "install -m 755 ${worksrcpath}/c-client/nl.h ${destroot}${prefix}/include/c-client/nl.h"
	system "install -m 755 ${worksrcpath}/c-client/nntp.h ${destroot}${prefix}/include/c-client/nntp.h"
	system "install -m 755 ${worksrcpath}/c-client/osdep.h ${destroot}${prefix}/include/c-client/osdep.h"
	system "install -m 755 ${worksrcpath}/c-client/phile.h ${destroot}${prefix}/include/c-client/phile.h"
	system "install -m 755 ${worksrcpath}/c-client/pop3.h ${destroot}${prefix}/include/c-client/pop3.h"
	system "install -m 755 ${worksrcpath}/c-client/pseudo.h ${destroot}${prefix}/include/c-client/pseudo.h"
	system "install -m 755 ${worksrcpath}/c-client/rfc822.h ${destroot}${prefix}/include/c-client/rfc822.h"
	system "install -m 755 ${worksrcpath}/c-client/smtp.h ${destroot}${prefix}/include/c-client/smtp.h"
	system "install -m 755 ${worksrcpath}/c-client/sslio.h ${destroot}${prefix}/include/c-client/sslio.h"
	system "install -m 755 ${worksrcpath}/c-client/tcp.h ${destroot}${prefix}/include/c-client/tcp.h"
	system "install -m 755 ${worksrcpath}/c-client/tcp_unix.h ${destroot}${prefix}/include/c-client/tcp_unix.h"
	system "install -m 755 ${worksrcpath}/c-client/tenex.h ${destroot}${prefix}/include/c-client/tenex.h"
	system "install -m 755 ${worksrcpath}/c-client/unix.h ${destroot}${prefix}/include/c-client/unix.h"
	system "install -m 755 ${worksrcpath}/c-client/utf8.h ${destroot}${prefix}/include/c-client/utf8.h"
		      
	#library
	file mkdir ${prefix}/lib

	system "install -m 755 ${worksrcpath}/c-client/c-client.a ${destroot}${prefix}/lib/libc-client4.a"
}

post-destroot {
	system "cd ${destroot}${prefix}/lib/ && ranlib libc-client4.a"
}
