# $Id: Portfile,v 1.3 2004/01/18 19:25:41 mww Exp $

PortSystem 1.0

name		digger
version		20020314
categories	games
platforms	darwin
maintainers	mww@opendarwin.org
description	the Digger game
long_description	${description}

homepage	http://www.digger.org
master_sites	${homepage}
checksums	md5 76c1e8ae3c4566dad65e91adbfe29570
patchfiles	patch-alpha.c.diff \
		patch-def.h.diff \
		patch-digger.c.diff \
		patch-input.c.diff \
		patch-scores.c.diff \
		patch-input.h.diff \
		patch-main.c.diff

depends_lib	bin:sdl-config:libsdl

post-extract	{
	file copy ${filespath}/Makefile.darwin ${worksrcpath}/Makefile
}

use_configure	no

destroot	{
	xinstall -d  ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/digger.txt \
		${destroot}${prefix}/share/doc/${name}
	xinstall -mode 755 -s ${worksrcpath}/digger \
		${destroot}${prefix}/bin
}

variant darwin	{
	post-destroot	{
		file mkdir ${destroot}/Applications/DarwinPorts/Digger.app/Contents/MacOS
		xinstall -mode 755 ${filespath}/Digger.darwin \
			${destroot}/Applications/DarwinPorts/Digger.app/Contents/MacOS/Digger
		reinplace "s|_PREFIX_|${prefix}|g" ${destroot}/Applications/DarwinPorts/Digger.app/Contents/MacOS/Digger
	}
}
