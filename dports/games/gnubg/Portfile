# $Id: Portfile,v 1.2 2003/12/16 15:50:14 matt Exp $

PortSystem 1.0
name			gnubg
version			0.13.0
revision		1
categories		games
platforms		darwin
maintainers		matt@opendarwin.org
homepage		http://www.gnubg.org/
description		GNU Backgammon

long_description	GNU Backgammon (gnubg) is a software for playing and analysing \
			backgammon positions, games and matches. It's based on a neural \
			network. Although it already plays at a very high level, it's \
			still work in progress. You can play at GNU Backgammon using the \
			command line or via a graphical interface based (on GTK+).

master_sites		ftp://alpha.gnu.org/gnu/${name}/ \
			http://public.planetmirror.com/pub/gnu-alpha/${name}/ \
			ftp://ftp.funet.fi/pub/mirrors/alpha.gnu.org/gnu/${name}/ \
			ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/${name}/
			
distfiles		${distname}.tar.gz ${name}.weights-0.13a.gz
extract.only		${distname}.tar.gz
			
checksums		${name}-${version}.tar.gz md5 91db5727b6589dbfd410e6ce1683fa95 \
			${name}.weights-0.13a.gz md5 5ea773401747c895149027bbfcfdc3d7

depends_lib		lib:libgtk.2:gtk2

post-extract {		cd ${worksrcpath}
			system "cp ${distpath}/${name}.weights-0.13a.gz ."
			system "gzip -d ${name}.weights-0.13a.gz"
			system "mv ${name}.weights-0.13a ${name}.weights"
			}

configure.env		CPPFLAGS="-I${prefix}/include" \
			CFLAGS="-lmx" \
			LDFLAGS="-L${prefix}/lib -L${x11prefix}/lib -lX11 \
			-bind_at_load -multiply_defined suppress"
			

configure.args		--mandir=${prefix}/share/man \
			--infodir=${prefix}/share/info \
			--sysconfdir=${prefix}/etc \
			--libdir=${prefix}/lib \
			--disable-esdtest \
			--disable-artsc-test \
			--without-libintl-prefix

post-destroot {		system "install -d -m 755 '${destroot}${prefix}/share/doc/${name}'"
			system "install -c -m 644 ${worksrcpath}/README \
			'${destroot}${prefix}/share/doc/${name}'"
			}

variant gdbm {		depends_lib-append	lib:libgdbm:gdbm
			configure.args-append	--with-gdbm
			}

