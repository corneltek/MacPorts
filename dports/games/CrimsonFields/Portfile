# $Id: Portfile,v 1.5 2004/02/26 08:18:15 blb Exp $

PortSystem 1.0

name		CrimsonFields
version		0.4.0
categories	games
platforms	darwin
maintainers	mww@opendarwin.org
description	Tactical war game in the tradition of Battle Isle
long_description	Crimson Fields is a tactical war game in the tradition \
			of Battle Isle, including a map editor and the \
			possibility to import the original History Line or \
			Battle Isle maps.

homepage	http://crimson.seul.org
master_sites	${homepage}/files/
distname	crimson-${version}
checksums	md5 fb28a27632e8f0697f2daf7c1e473c54

use_bzip2	yes

depends_lib	bin:sdl-config:libsdl \
		lib:libSDL_mixer:libsdl_mixer \
		lib:libSDL_ttf:libsdl_ttf \
		lib:libz:zlib

configure.args	--disable-sdltest

post-destroot	{
	file delete -force ${destroot}${prefix}/share/pixmap
	#rename binary to avoid potential conflicts with other programs...
	file rename ${destroot}${prefix}/bin/crimson \
		${destroot}${prefix}/bin/crimsonfields
}

variant editor	{
	configure.args-append	--enable-cfed
}

variant comet requires editor	{
	configure.args-append	--enable-comet
}

variant darwin	{
	pre-destroot	{
		file mkdir ${destroot}/Applications/DarwinPorts/CrimsonFields.app/Contents/MacOS
		system "ln -s ${prefix}/bin/crimsonfields \
			${destroot}/Applications/DarwinPorts/CrimsonFields.app/Contents/MacOS/CrimsonFields"
	}
}
