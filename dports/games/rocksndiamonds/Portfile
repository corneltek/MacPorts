# $Id: Portfile,v 1.2 2004/01/18 19:25:22 mww Exp $

PortSystem 1.0

name		rocksndiamonds
version		3.0.8
categories	games
maintainers	mww@opendarwin.org
description	Arcade style game Boulderdash or Emerald Mine clone
long_description	Arcade style game Boulderdash (C64) or Emerald Mine \
			(Amiga) clone. Included are many levels known from the \
			games Boulderdash, Emerald Mine, Sokoban, Supaplex and \
			DX-Boulderdash, level elements for Diamond Caves II \
			style games and a lot of new levels designed by others.

homepage	http://www.artsoft.org/rocksndiamonds/
master_sites	http://www.artsoft.org/RELEASES/unix/${name}
checksums	md5 3b8e00464137502ed66953d412b5a3e8
patchfiles	patch-Makefile.diff

depends_lib	bin:sdl-config:libsdl \
		lib:libSDL_image:libsdl_image \
		lib:libSDL_mixer:libsdl_mixer

configure	{
	reinplace "s|_PREFIX_|${prefix}|g" ${worksrcpath}/Makefile
}

build.target	sdl

destroot	{
	xinstall -s -m 755 ${worksrcpath}/rocksndiamonds \
		${destroot}${prefix}/bin
	file mkdir ${destroot}${prefix}/share/games/rocksndiamonds
	file copy ${worksrcpath}/graphics ${worksrcpath}/levels \
		${worksrcpath}/music ${worksrcpath}/sounds \
		${destroot}${prefix}/share/games/rocksndiamonds
}

variant darwin	{
	post-destroot	{
		file mkdir ${destroot}/Applications/DarwinPorts/RocksnDiamonds.app/Contents/MacOS
		system "ln -s ${prefix}/bin/rocksndiamonds \
			${destroot}/Applications/DarwinPorts/RocksnDiamonds.app/Contents/MacOS/RocksnDiamonds"
	}
}
