PortSystem 1.0
name		larn
version		4.6.2-RELEASE
categories	games
maintainers	eric@opendarwin.org
description	Text-based cavern exploring game
platforms	darwin
use_bzip2	yes
master_sites	http://www.opendarwin.org/projects/darwinports/distfiles/
checksums	md5 cea96f48caa057793f6bcaf3394ca388
build.type	bsd
build.args	LDADD+=-L${prefix}/lib\\ -lcompat\\ -lncurses
worksrcdir	${portname}
patchfiles	patch-io.c

configure	{ reinplace "s|MAN|MAN6|" ${worksrcpath}/Makefile
		  reinplace "s|/usr/share|${prefix}/share|g" \
		    ${worksrcpath}/pathnames.h
		  reinplace "s|/var/games|${prefix}/var/games|g" \
		    ${worksrcpath}/pathnames.h }

install		{ cd ${worksrcpath}
		  system "install -o root -m 755 -d ${prefix}/var/games/larn"
		  system "install -o root -m 755 -d ${prefix}/man/man6"
		  system "install -o root -m 755 -d ${prefix}/share/games/larn"
		  system "install -o root -m 755 -c larn ${prefix}/bin"
		  system "install -o root -m 644 -c larn.6.gz  \
		    ${prefix}/man/man6"
		  cd datfiles
		  system "install -o root -m 644 -c larn.help \
		    ${prefix}/share/games/larn"
		  system "install -o root -m 644 -c larnmaze \
		    ${prefix}/share/games/larn" }

contents	bin/larn \
		man/man6/larn.6.gz \
		share/games/larn/larn.help \
		share/games/larn/larnmaze
