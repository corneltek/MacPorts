# $Id: Portfile,v 1.4 2004/01/10 12:46:40 mww Exp $

PortSystem 1.0

name		openmortal
version		0.4
categories	games
platforms	darwin
maintainers	mww@opendarwin.org
description	Mortal Szombat is a parody of the coin-up game Mortal Kombat
long_description	Mortal Szombat is a parody of the popular coin-up \
			game, Mortal Kombat. It is currently playable (maybe \
			even enjoyable), although it is still under \
			development. Only two-player game is supported, \
			single-player games against computer opponent is not \
			planned yet. There are currently 9 playable \
			characters, and 8 more in the making!

homepage	http://openmortal.sourceforge.net/
master_sites	sourceforge
checksums	md5 350650ba1b66333f5736d4aa6ea944ba
use_bzip2	yes

depends_lib	bin:sdl-config:libsdl \
		lib:libSDL_mixer:libsdl_mixer \
		lib:libSDL_image:libsdl_image \
		lib:libSDL_ttf:libsdl_ttf \
		lib:libfreetype:freetype \
		bin:perl:perl

variant darwin	{
	patchfiles	patch-sge_tt_text.cpp.diff \
			patch-RlePack.cpp.diff
	post-destroot	{
		file mkdir ${destroot}/Applications/DarwinPorts/OpenMortal.app/Contents/MacOS
		system "ln -s ${prefix}/bin/openmortal \
			${destroot}/Applications/DarwinPorts/OpenMortal.app/Contents/MacOS/OpenMortal"
	}

}

configure.env	LDFLAGS="-L${prefix}/lib" \
		CPPFLAGS="-I${prefix}/include"
configure.args	--enable-main \
		--enable-characters \
		--enable-additional \
		--enable-thirdparty
