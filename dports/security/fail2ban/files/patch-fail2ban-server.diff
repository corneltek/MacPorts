--- fail2ban-server.orig	2013-02-19 16:39:38.000000000 +0100
+++ fail2ban-server	2013-02-19 20:23:45.000000000 +0100
@@ -25,12 +25,13 @@
 import getopt, sys, logging, os
 
 # Inserts our own modules path first in the list
-# fix for bug #343821
-if os.path.abspath(__file__).startswith('/usr/'):
-	# makes sense to use system-wide library iff -server is also under /usr/
-	sys.path.insert(1, "/usr/share/fail2ban")
+# Camusensei issue #112 - https://github.com/fail2ban/fail2ban/issues/112
+try:
+	from common.version import version
+except ImportError, e:
+	sys.path.insert(1, "@@PREFIX@@/share/fail2ban")
+	from common.version import version
 
-from common.version import version
 from server.server import Server
 
 # Gets the instance of the logger.
@@ -52,7 +53,7 @@
 		self.__conf = dict()
 		self.__conf["background"] = True
 		self.__conf["force"] = False
-		self.__conf["socket"] = "/var/run/fail2ban/fail2ban.sock"
+		self.__conf["socket"] = "@@PREFIX@@/var/run/fail2ban/fail2ban.sock"
 	
 	def dispVersion(self):
 		print "Fail2Ban v" + version
