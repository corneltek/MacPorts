# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                cfv
version             1.18.3
revision            2
categories          security
platforms           darwin
supported_archs     noarch
license             GPL-2
maintainers         nomaintainer

description         cfv is a utility to both test and create .sfv, .csv, \
                    .crc, .md5(sfv-like), md5sum, bsd md5, sha1sum, and \
                    .torrent files.
long_description    ${description} These files are commonly used to \
                    ensure the correct retrieval or storage of data.
homepage            http://cfv.sourceforge.net/

master_sites        sourceforge
checksums           rmd160 d239e5fe212b2458f5a3612b55591c7625a2318d

patchfiles          patch-Makefile.diff \
                    patch-cfv.diff
post-patch {
    reinplace "s|@PREFIX@|${prefix}|" ${worksrcpath}/Makefile
}

use_configure       no

build               {}

if {![variant_isset python27] && ![variant_isset python32]} {
    default_variants    +python27
}

variant python27 conflicts python32 description {Use Python 2.7} {
    depends_lib port:python27

    post-patch {
        reinplace "s|@PYTHON@|${prefix}/bin/python2.7|" \
                ${worksrcpath}/Makefile ${worksrcpath}/cfv
    }
}

variant python32 conflicts python27 description {Use Python 3.2} {
    depends_lib port:python32

    post-patch {
        reinplace "s|@PYTHON@|${prefix}/bin/python3.2|" \
                ${worksrcpath}/Makefile ${worksrcpath}/cfv
    }
}
