# $Id$

PortSystem       1.0
PortGroup        github 1.0

github.setup     ckolivas cgminer 3.6.6 v
categories       finance
platforms        darwin
maintainers      ram openmaintainer
license          GPL-3

description      ASIC/FPGA/GPU miner in c for bitcoin and litecoin
long_description \
  This is a multi-threaded multi-pool GPU, FPGA and ASIC miner with \
  ATI GPU monitoring, (over)clocking and fanspeed support for bitcoin \
  and derivative coins.

checksums        rmd160 f4dfcfca724f14214ca115b1eb09aa062846fa68 \
                 sha256 3d503dac6fe7fa17cb0c933384059ce65d3bf8f340b9aff53e4aab38d3e67a12

depends_build-append port:pkgconfig \
                 port:gawk

depends_lib      port:ncurses \
                 port:curl

use_autoreconf   yes

configure.args   --disable-adl \
                 --enable-opencl

post-destroot {
  delete ${destroot}${prefix}/include/jansson.h
  delete ${destroot}${prefix}/include/jansson_config.h
  xinstall -d ${destroot}${prefix}/share/doc/${name}
  xinstall -m 644 -W $worksrcpath API-README ASIC-README FPGA-README \
    GPU-README README SCRYPT-README ${destroot}${prefix}/share/doc/${name}
}

variant scrypt description {Add support for scrypt litecoin mining} {
  configure.args-append --enable-scrypt
  notes "
When you start scrypt mining with the --scrypt option, cgminer will
fail IN RANDOM WAYS. See ${prefix}/share/doc/cgminer/SCRYPT-README
for more information.
"
}

variant bflsc description {Add support for BFL ASICs} {
    configure.args-append --enable-bflsc
}

variant bitforce description {Add support for BitForce FPGAs} {
    configure.args-append --enable-bitforce
}

variant icarus description {Add support for Icarus} {
    configure.args-append --enable-icarus
}

variant avalon description {Add support for Avalon} {
    configure.args-append --enable-avalon
}

variant modminer description {Add support for ModMiner FPGAs} {
    configure.args-append --enable-modminer
}

variant ztex description {Add support for Ztex} {
    configure.args-append --enable-ztex
}
