# $Id$

PortSystem       1.0

name             cgminer
version          3.4.3
revision         1
categories       finance
platforms        darwin
maintainers      ram openmaintainer
license          GPL-3

description      ASIC/FPGA/GPU miner in c for bitcoin and litecoin
long_description \
  This is a multi-threaded multi-pool GPU, FPGA and ASIC miner with \
  ATI GPU monitoring, (over)clocking and fanspeed support for bitcoin \
  and derivative coins.

homepage         https://github.com/ckolivas/cgminer
master_sites     http://ck.kolivas.org/apps/cgminer
use_bzip2        yes

checksums        rmd160 670e27482ef80ba833de6808d4721e0ee879274b \
                 sha256 d8bd330707b18a0ca9b4aa377edcc23c8492f96fbf08a51c64019de12cbf7b0d

depends_build    port:pkgconfig \
                 port:gawk

depends_lib      port:ncurses \
                 port:curl

post-destroot {
  delete ${destroot}${prefix}/include/jansson.h
  delete ${destroot}${prefix}/include/jansson_config.h
  xinstall -d ${destroot}${prefix}/share/doc/${name}
  xinstall -m 644 -W $worksrcpath API-README GPU-README README \
    ${destroot}${prefix}/share/doc/${name}
}

variant scrypt description {Add support for scrypt litecoin mining} {
  configure.args-append --enable-scrypt
  post-destroot {
    xinstall -m 644 -W $worksrcpath SCRYPT-README \
      ${destroot}${prefix}/share/doc/${name}
  }
  notes "
When you start scrypt mining with the --scrypt option, cgminer will
fail IN RANDOM WAYS. See ${prefix}/share/doc/cgminer/SCRYPT-README
for more information.
"
}

livecheck.type   regex
livecheck.url    ${master_sites}
livecheck.regex  {cgminer-(\d+(?:\.\d+)*).tar.bz2}
