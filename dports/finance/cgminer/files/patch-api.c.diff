--- api.c
+++ api.c
@@ -26,6 +26,12 @@
 #include "util.h"
 #include "klist.h"
 
+#ifdef IPV6_ADD_MEMBERSHIP
+#define CGM_IPV6_ADD_MEMBERSHIP IPV6_ADD_MEMBERSHIP
+#else
+#define CGM_IPV6_ADD_MEMBERSHIP IPV6_JOIN_GROUP
+#endif
+
 #if defined(USE_BFLSC) || defined(USE_AVALON) || defined(USE_AVALON2) || \
   defined(USE_HASHFAST) || defined(USE_BITFURY) || defined(USE_BLOCKERUPTER) || defined(USE_KLONDIKE) || \
 	defined(USE_KNC) || defined(USE_BAB) || defined(USE_DRILLBIT) || \
@@ -4705,7 +4711,7 @@
 					sizeof(struct in6_addr));
 			grp.ipv6mr_interface= 0;
 
-			if (SOCKETFAIL(setsockopt(mcast_sock, IPPROTO_IPV6, IPV6_ADD_MEMBERSHIP,
+			if (SOCKETFAIL(setsockopt(mcast_sock, IPPROTO_IPV6, CGM_IPV6_ADD_MEMBERSHIP,
 							(void *)(&grp), sizeof(grp)))) {
 				applog(LOG_ERR, "API mcast join failed (%s)%s", SOCKERRMSG, MUNAVAILABLE);
 				goto die;
