# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem       1.0
PortGroup        cmake 1.0

name             qlandkartegt
version          1.7.7
categories       gis
platforms        darwin
maintainers      puffin.lb.shuttle.de:michael.klein mk
license          GPL-3

description      Use your Garmin GPS with Linux/Mac OS X
long_description QLandkarte GT is the ultimate outdoor aficionado's tool. It \
                 supports GPS maps in GeoTiff format as well as Garmin's img \
                 vector map format.  Additional it is the PC side front end to \
                 QLandkarte M, a moving map application for mobile devices.

homepage         http://www.qlandkarte.org/
master_sites     sourceforge:project/qlandkartegt/qlandkartegt/QLandkarteGT%20${version}

checksums        rmd160  b26a7124766dcbba8ced253e59460b2192cc19fd \
                 sha256  0b0d659bef580bff7c6aabd563ad9bf0cf2d32467fe11e613ceaab58be7363d0

depends_lib      port:libexif \
                 port:gdal \
                 port:qt4-mac \
                 port:qt4-mac-sqlite3-plugin \
                 port:gpsd \
                 port:libdmtx \
                 bin:gpsbabel:gpsbabel

patchfiles       patch-src-main.cpp.diff \
                 patch-remove-legacy-Dictionary.h.diff

post-patch {
    # needed by QDeviceWatcher
    reinplace "s|CoreFoundation|CoreFoundation -framework DiskArbitration|" ${worksrcpath}/src/CMakeLists.txt
}

destroot {
    xinstall -d ${destroot}${applications_dir}
    copy "${worksrcpath}/bin/QLandkarte GT.app" ${destroot}${applications_dir}
}

livecheck.regex  ${name}-(\[0-9.\]+)${extract.suffix}
