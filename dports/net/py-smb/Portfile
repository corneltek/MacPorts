# $Id: Portfile,v 1.1 2003/09/21 13:26:15 mww Exp $

PortSystem 1.0

name		py-smb
version		0.4.3
categories	net
maintainers	mww@opendarwin.org
description	SMB/CIFS library for python
long_description	SMB/CIFS library for python speaking NT LM0.12 \
		enables python to access shares from Windows computers or \
		machines running Samba.

homepage	http://miketeo.net/projects/pysmb/
master_sites	${homepage}
distfiles	pysmb-${version}${extract.sufx}
checksums	md5 73a87cd1d72e94824c687a444d857d77
patchfiles	patch-setup.py.diff

depends_lib	bin:python:python

set worksrcpath	${workpath}/pysmb
pre-patch	{ system "touch ${worksrcpath}/setup.py" }

configure	{ reinplace "s|VERSION|${version}|g" ${worksrcpath}/setup.py }

build.dir	${worksrcpath}
build.cmd	python setup.py
build.target	build

destroot.cmd	python setup.py
destroot.target	install
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{ system "cd ${worksrcpath} \
	&& install -m 755 -d ${destroot}${prefix}/share/doc/${name}/extra \
	&& install -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples \
	&& cp -r docs/*.html docs/*.gif \
		 ${destroot}${prefix}/share/doc/${name}/ \
	&& cp -r extra/*.reg ${destroot}${prefix}/share/doc/${name}/extra/ \
	&& cp nmbquery smbcp smbdu smblistshare \
		${destroot}${prefix}/share/doc/${name}/examples/" }

