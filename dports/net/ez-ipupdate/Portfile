# $Id: Portfile,v 1.3 2003/12/10 21:33:59 mww Exp $

PortSystem 1.0
name		ez-ipupdate
version		3.0.11b7
categories	net
maintainers	mww@opendarwin.org
platforms	darwin freebsd
description	dynamic dns client
long_description	ez-ipupdate is a small utility for updating your host \
			name at one of the dynamic DNS services. The daemon \
			mode is currently not working under Darwin/OS-X.

homepage	http://www.ez-ipupdate.com
master_sites	${homepage}/dist/
checksums	md5 525be4550b4461fdf105aed8e753b020

configure.args	--cache-file=${prefix}/var/ez-ipupdate

variant darwin	{
	configure.env	CPPFLAGS=-D__FreeBSD__
	configure.args-append --host=powerpc-apple-freebsd
}

build.target

pre-destroot	{
	reinplace "s|DESTDIR =|DESTDIR = ${destroot}|g" \
		${worksrcpath}/Makefile
}

post-destroot	{
	file mkdir ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/README ${worksrcpath}/COPYING \
		${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/example.conf \
		${destroot}${prefix}/etc/ez-ipupdate.conf.sample
	reinplace "s|/usr/local/bin/ez-ipupdate|${prefix}/bin/ez-ipupdate|g" \
		${destroot}${prefix}/etc/ez-ipupdate.conf.sample
}

post-install	{
	if { ![file exists ${prefix}/etc/ez-ipupdate.conf] }	{
		file copy ${prefix}/etc/ez-ipupdate.conf.sample \
			${prefix}/etc/ez-ipupdate.conf
	}
}
