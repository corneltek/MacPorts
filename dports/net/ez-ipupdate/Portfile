# $Id: Portfile,v 1.2 2003/09/23 10:14:22 mww Exp $

PortSystem 1.0
name		ez-ipupdate
version		3.0.11b7
categories	net
maintainers	mww@opendarwin.org
description	dynamic dns client
long_description	ez-ipupdate is a small utility for updating your host \
			name at one of the dynamic DNS services. The daemon \
			mode is currently not working under Darwin/OS-X.

homepage	http://www.ez-ipupdate.com/
master_sites	${homepage}dist/
checksums	md5 525be4550b4461fdf105aed8e753b020

post-patch	{ reinplace \
		"s|/usr/local/bin/ez-ipupdate|${prefix}/bin/ez-ipupdate|g" \
		${worksrcpath}/example.conf }

configure.args	--cache-file=${prefix}/var/ez-ipupdate

variant darwin {
	configure.env	CPPFLAGS=-D__FreeBSD__
	configure.args-append --host=powerpc-apple-freebsd
}

build.target

destroot.destdir	prefix=${destroot}${prefix}

post-destroot	{ system "install -m 755 -d \
				${destroot}${prefix}/share/doc/ez-ipupdate \
		&& install -m 644 ${worksrcpath}/README \
				${destroot}${prefix}/share/doc/ez-ipupdate \
		&& install -m 644 ${worksrcpath}/COPYING \
				${destroot}${prefix}/share/doc/ez-ipupdate \
		&& install -m 700 ${worksrcpath}/example.conf \
				${destroot}${prefix}/etc/ez-ipupdate.conf.sample" }

post-install	{ if {![file exists ${prefix}/etc/ez-ipupdate.conf]} {
			system "cp ${prefix}/etc/ez-ipupdate.conf.sample \
					${prefix}/etc/ez-ipupdate.conf"
		  } }
