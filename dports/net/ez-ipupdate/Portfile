# $Id: Portfile,v 1.1 2003/08/17 01:18:53 fenner Exp $

PortSystem 1.0
name		ez-ipupdate
version		3.0.11b8
categories	net
maintainers	mail@mweissmann.de
description	dynamic dns client
long_description	ez-ipupdate is a small utility for updating your host \
			name at one of the dynamic DNS services. The daemon \
			mode is currently not working under Darwin/OS-X.

homepage	http://gusnet.cx/proj/ez-ipupdate/
master_sites	${homepage}dist/
checksums	md5 000211add4c4845ffa4211841bff4fb0

configure.args	--cache-file=${prefix}/var/ez-ipupdate

variant darwin {
	configure.env	CPPFLAGS=-D__FreeBSD__
	configure.args-append --host=powerpc-apple-freebsd
}

post-patch	{ reinplace \
		"s|/usr/local/bin/ez-ipupdate|${prefix}/bin/ez-ipupdate|g" \
		${worksrcpath}/example.conf }

build.type	gnu
build.target

destroot.type	gnu
destroot.destdir	prefix=${destroot}${prefix}

post-destroot	{ system "install -d ${destroot}${prefix}/doc/ez-ipupdate \
		&& install -m 644 ${worksrcpath}/README \
				${destroot}${prefix}/doc/ez-ipupdate \
		&& install -m 644 ${worksrcpath}/COPYING \
				${destroot}${prefix}/doc/ez-ipupdate \
		&& install -m 700 ${worksrcpath}/example.conf \
				${destroot}${prefix}/etc/ez-ipupdate.conf.sample" }

post-install	{ if {![file exists ${prefix}/etc/ez-ipupdate.conf]} {
			system "cp ${prefix}/etc/ez-ipupdate.conf.sample \
					${prefix}/etc/ez-ipupdate.conf"
		  } }
