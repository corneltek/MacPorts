# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                vantages
version             0.8.8b
revision            2
categories          net
platforms           darwin
maintainers         nomaintainer
license             BSD

description         A suite of services and tools to make adoption of DNSSEC easier.
long_description    Vantages is a suite of services designed to make the adoption of \
                    DNSSEC easier for administrators of both authoritative name servers \
                    (i.e. zone administrators) and recursive resolvers. Though the suite \
                    comes with a set of useful command line tools (dnsfunnel, dnskey-grab, \
                    etc.), its main functionality is a single daemon (vantaged) that \
                    performs the various tasks needed to smoothly operate either a DNSSEC \
                    zone, or a validating recursive resolver. Vantages' single daemon acts \
                    as a one-stop-shopping solution for the needs of DNSSEC operators. \
                    This is in contrast to other DNSSEC tool suites that require users to \
                    become familiar with numerous daemons and tools and must configure and \
                    run them all separately. With Vantages, operators just install the \
                    daemon and use its web dashboards to configure the services that are needed.

homepage            http://vantage-points.org/

# homepage temporarily disabled by GoDaddy

#master_sites       ${homepage}src/
master_sites        macports_distfiles:${name}
extract.suffix      .tgz

checksums           rmd160  4e5720a929c8d7cea95fee107a7b38fd00838699 \
                    sha256  f7e0017fcaf03a72c8f4a74092253619cb686f1b377af150be10cb5a6c6e4496

patchfiles          patch-makefile_fixes.diff \
                    patch-bad_paths.diff \
                    patch-curl-headers.diff

# /usr/bin/ranlib: library member: libshttpd.a(compat_unix.c) is not an object file (not allowed in a library with multiple architectures)
universal_variant   no

depends_lib         port:expat \
                    port:gnupg \
                    port:gpgme \
                    port:libgpg-error \
                    port:libtool \
                    port:libpcap \
                    path:lib/libssl.dylib:openssl \
                    port:p5.16-term-readkey \
                    port:sqlite3

depends_run         path:share/curl/curl-ca-bundle.crt:curl-ca-bundle

use_autoreconf      yes

configure.universal_args-delete --disable-dependency-tracking

build.args          CC="${configure.cc} [get_canonical_archflags cc]"

livecheck.type      regex
livecheck.url       ${homepage}download.html
livecheck.regex     "${name}-(\[0-9.a-d\]+)${extract.suffix}"
