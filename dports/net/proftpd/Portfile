# $Id: Portfile,v 1.2 2003/04/28 23:35:57 fkr Exp $

PortSystem 1.0
name		proftpd
version		1.2.8	
categories	net
maintainers	fkr@opendarwin.org
description	Highly configurable ftp-server.	
long_description	ProFTPD is a highly configurable ftp daemon for unix \
			and unix-like operating systems. ProFTPD is designed \
			to be somewhat of a "drop-in" replacement for wu-ftpd \
			with a configuration format like Apache.	
homepage	http://proftpd.linux.co.uk/	
platforms	darwin freebsd
master_sites	ftp://ftp.proftpd.org/distrib/source/
checksums	md5 35e669cb085879eea21c6db9e7af2040
use_bzip2	yes

depends_run 	path:/Library/StartupItems/DarwinPortsStartup:DarwinPortsStartup
configure.args  --sysconfdir=${prefix}/etc --localstatedir=${prefix}/var/run

pre-install { 	cd ${worksrcpath}
		reinplace "s|nogroup|nobody|g" sample-configurations/basic.conf 
		system "install -d ${destroot}${prefix}/var"
		system "install -d ${destroot}${prefix}/var/proftpd" }

post-install {	system "install -o root -m 755 -d ${destroot}${prefix}/etc/rc.d"
   		system "install -o root -m 755 -c \
                      ${portpath}/files/proftpd.sh ${prefix}/etc/rc.d"
                reinplace "s|__PREFIX|${prefix}|g" ${prefix}/etc/rc.d/proftpd.sh }

variant mysql {	depends_lib-append      lib:libmysqlclient:mysql
   		configure.args-append   --with-modules=mod_sql:mod_sql_mysql \
					--with-includes=${prefix}/include/mysql \
					--with-libraries=${prefix}/lib/mysql }
