# $Id: Portfile,v 1.17 2003/11/22 19:47:52 mij Exp $

PortSystem 1.0
name		gaim
version		0.73
categories	net
maintainers	mij@opendarwin.org
description	AIM message service client with a gtk2 interface
long_description Gaim is an Open Source clone of America OnLine's \
		 Instant Messenger client that uses GTK+ version 2.  It \
		 features multiple groups, group chat, user information \
		 fetching and registration, time stamping, and more.  It \
		 also supports other IM protocols, including Yahoo!, \
		 MSN, ICQ, Jabber, Napster, IRC, and Zephyr via included \
		 plugins.

master_sites	http://us.dl.sourceforge.net/gaim/ \
		http://eu.dl.sourceforge.net/gaim/ \
		ftp://us.dl.sourceforge.net/pub/sourceforge/gaim/ \
		ftp://ftp.kddlabs.co.jp/sourceforge/gaim/ \
		ftp://ftp.chg.ru/pub/sourceforge/gaim/

checksums	md5 b8c9a2c37d13e72badf28f1fa478f4bb

use_bzip2	yes

depends_lib	lib:libgtk.2:gtk2

patchfiles	patch-src-gaimrc.c patch-ltmain.sh

configure.env	CPPFLAGS="-I${prefix}/include -I${x11prefix}/include -no-cpp-precomp" \
		LDFLAGS="-L${prefix}/lib -L${x11prefix}/lib -bind_at_load" 

configure.args	--disable-audio --disable-screensaver --disable-gtkspell \
		--mandir=${prefix}/share/man

platform darwin 6 { depends_lib-append lib:libdl.1:dlcompat }

default_variants +msn

variant msn	{ depends_lib-append lib:libgnutls.8:gnutls }

variant audio	{ depends_lib-append lib:libao.2:libao \
				     lib:libaudiofile:audiofile
		  configure.args-delete --disable-audio
		  configure.args-append	--enable-audio }
