# $Id: Portfile,v 1.4 2003/11/17 21:20:01 jkh Exp $
PortSystem 1.0

name		hfsrsync
version		2.5.5
categories	net
maintainers	rshaw@opendarwin.org
description	implementation of rsync with HFS+ support
long_description	hfsrsync is an implementation of rsync with HFS+ \
			support for support of HFS+ filesystems.
homepage	http://www.macosxlabs.org/rsyncx/intro.html
master_sites	http://www.macosxlabs.org/rsyncx/
distname	rsync-${version}.hfs
extract.suffix	.tgz
checksums	md5 f3a1d329c710d3c2f0183e77b3b8071e
platforms	darwin
configure.args	--with-rsync-path=hfsrsync \
		--disable-ipv6

variant ipv6 	{ configure.args-delete  --disable-ipv6
		  configure.args-append  --enable-ipv6 }

build.type	gnu

post-build	{ reinplace "s|/usr/bin/rsync|${prefix}/bin/hfsrsync|g" ${worksrcpath}/rsync.1
		  reinplace "s|/usr/bin/rsync|${prefix}/bin/hfsrsync|g" ${worksrcpath}/rsyncd.conf.5 }

destroot	{ system "install -m 755 -d ${destroot}${prefix}/bin"
		  system "install -m 755 -s ${worksrcpath}/rsync \
			  ${destroot}${prefix}/bin/hfsrsync"
		  system "install -m 755 -d ${destroot}${prefix}/share/man/man1"
		  system "install -m 644 -s ${worksrcpath}/rsync.1 \
			  ${destroot}${prefix}/share/man/man1/hfsrsync.1"
		  system "install -m 755 -d ${destroot}${prefix}/share/man/man5"
		  system "install -m 644 -s ${worksrcpath}/rsyncd.conf.5 \
			  ${destroot}${prefix}/share/man/man5/hfsrsyncd.conf.5" }

