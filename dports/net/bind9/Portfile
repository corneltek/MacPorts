# $Id: Portfile,v 1.1 2003/04/27 15:57:26 jpm Exp $

PortSystem 1.0
name			bind9
version			9.2.2
revision		1
categories		net
maintainers		bchesneau@mac.com
description		Domain Name System server
long_description  	The BIND DNS Server is used on the vast majority of name serving machines on the Internet, providing a robust and stable architecture on top of which an organization's naming architecture can be built.  The resolver library included in the BIND distribution provides the standard APIs for translation between domain names and Internet addresses and is intended to be linked with applications requiring name service.

platforms		darwin freebsd
master_sites		ftp://ftp.isc.org/isc/${portname}/${version}/
distname		bind-${version}
worksrcdir		bind-${version}
checksums		md5 6ea7d64a0856893ab3eb541ab7bbc725

depends_run path:/Library/StartupItems/DarwinPortsStartup:DarwinPortsStartup


configure.args		--mandir=${prefix}/share/man --localstatedir=${prefix}/var

post-patch	{
	system "sed -e \"s=%%PREFIX%%=${prefix}=g\" ${filespath}/bind.sh >${portpath}/bind.sh"
}

post-install	{
	file mkdir ${destroot}${prefix}/etc/rc.d/
	file mkdir ${destroot}${prefix}/var/run/
	file mkdir ${destroot}${prefix}/var/named/
	system "install -bC -o root ${portpath}/bind.sh ${destroot}${prefix}/etc/rc.d/"
}

variant darwin {
        depends_lib-append      lib:libdl.1:dlcompat
}


variant ipv6 {
	configure.args-append 	--enable-ipv6
}

variant ssl {
	depends_lib-append      lib:libssl.0.9:openssl
	configure.args-append	--with-openssl
}	 	
