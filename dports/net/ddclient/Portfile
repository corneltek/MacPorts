# $Id: Portfile,v 1.6 2003/10/22 05:30:11 rshaw Exp $
PortSystem 1.0
name		ddclient
version		3.6.3beta2
platforms	darwin
categories	net
maintainers	rshaw@opendarwin.org
description	Update dynamic DNS entries
long_description	ddclient is a Perl client used to update dynamic \
			DNS entries for accounts on many dynamic DNS services.
homepage	http://burry.ca:4141/ddclient/
master_sites	http://distfiles.opendarwin.org/ \
		http://burry.ca:4141/ddclient/	
checksums	md5 98edbaea5459f47eb9164f8e58bc162a
depends_run	path:/Library/StartupItems/DarwinPortsStartup:DarwinPortsStartup

configure	{ reinplace "s|\[\r\]$||" ${worksrcpath}/${portname}
		  reinplace "s|^#!.*/perl.*$|#!/usr/bin/env perl|" ${worksrcpath}/${portname}
		  reinplace "s|/etc/|${prefix}/etc/|" ${worksrcpath}/${portname} }

build		{ file copy -force ${portpath}/files/ddclient.sh ${worksrcpath}/
		  reinplace "s|__PREFIX|${prefix}|g" ${worksrcpath}/ddclient.sh }

destroot	{ system "install -m 755 -d ${destroot}${prefix}/etc"
		  system "install -m 555 ${worksrcpath}/sample-etc_ddclient.conf \
			  ${destroot}${prefix}/etc/ddclient.conf.sample"
		  system "install -m 755 -d ${destroot}${prefix}/sbin"
		  system "install -m 555 ${worksrcpath}/${portname} \
			  ${destroot}${prefix}/sbin"
		  system "install -m 755 -d ${destroot}${prefix}/etc/rc.d"
		  system "install -m 755 -c ${worksrcpath}/ddclient.sh ${destroot}${prefix}/etc/rc.d/"
		  system "install -m 755 -d ${destroot}${prefix}/share/doc/${portname}"
		  system "install -m 444 ${worksrcpath}/COPY* \
			  ${destroot}${prefix}/share/doc/${portname}"
		  system "install -m 444 ${worksrcpath}/README* \
			  ${destroot}${prefix}/share/doc/${portname}"
		  system "install -m 444 ${worksrcpath}/sample-* \
			  ${destroot}${prefix}/share/doc/${portname}"
		  file mkdir ${destroot}${prefix}/var/run
		  system "touch ${destroot}${prefix}/var/run/.turd" }

