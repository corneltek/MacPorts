# $Id: Portfile,v 1.4 2004/01/15 20:36:28 toby Exp $

PortSystem 1.0
name             cvsync
version          0.24.3
categories       net
maintainers      toby@opendarwin.org
description      cvsync is a portable CVS repository synchronization utility 
long_description cvsync is a portable CVS repository synchronization utility. \
                 cvsync is freely available under the BSD license and is a \
                 compelling, if not raw, replacement for CVSup written in C.

platforms        darwin

master_sites     ftp://ftp.daemon-systems.org/pub/cvsync/ \
                 ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ \
                 ftp://ftp.allbsd.org/pub/cvsync/

checksums        md5 fef7bbcc21dbf4e37f083a45e5e9cb74
configure        {}
build.target
build.args       HASH_TYPE=openssl \
                     CVSYNC_DEFAULT_CONFIG=${prefix}/etc/cvsync.conf \
                     CVSYNCD_DEFAULT_CONFIG=${prefix}/etc/cvsyncd.conf \
                     PREFIX=${destroot}${prefix}
destroot.args    HASH_TYPE=openssl \
                     CVSYNC_DEFAULT_CONFIG=${prefix}/etc/cvsync.conf \
                     CVSYNCD_DEFAULT_CONFIG=${prefix}/etc/cvsyncd.conf \
                     PREFIX=${destroot}${prefix}
post-configure   { reinplace "s|\"/var/run/cvsyncd.pid\"|\"${prefix}/var/run/cvsyncd.pid\"|g" \
                   ${worksrcpath}/cvsyncd/defs.h }

post-destroot    { system "install -d -g admin -m 755 \
                       ${destroot}${prefix}/share/doc/${name}"
                   system "install -C -g admin -m 644 ${worksrcpath}/doc/* \
                       ${destroot}${prefix}/share/doc/${name}"
                   system "install -C -g admin -m 644 \
                       ${worksrcpath}/samples/*.conf \
                       ${destroot}${prefix}/share/doc/${name}"
                   system "install -d -g admin -m 755 \
                       ${destroot}${prefix}/var/run"
                   system "touch ${destroot}${prefix}/var/run/.turd" }

