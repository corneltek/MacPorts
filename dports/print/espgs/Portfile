# $Id: Portfile,v 1.1 2003/03/11 07:20:50 michaelm Exp $

PortSystem 1.0

name               espgs 
version            7.05.6
categories         print textproc
description   
master_sites       http://easynews.dl.sourceforge.net/sourceforge/espgs/ \
                     http://mirror.cs.wisc.edu/pub/mirrors/ghost/AFPL/fonts/:fonts
                   
distname           ${name}-${version}-source
set std_fonts      ghostscript-fonts-std-6.0
set other_fonts    ghostscript-fonts-other-6.0
distfiles	       ${distname}${extract.sufx} \
                     ${std_fonts}${extract.sufx}:fonts \
                     ${other_fonts}${extract.sufx}:fonts
                   
checksums         ${name}-${version}-source${extract.sufx} md5 23595e166693dcf9d504d7b8bd4ae48c \
                    ${std_fonts}${extract.sufx} md5 8250132d6fcc6eb1419f505f06c7690b \
                    ${other_fonts}${extract.sufx} md5 1a643ae62ef166562e4d422b1a601272

depends_lib        lib:libjpeg:jpeg lib:libpng:libpng lib:libzlib:zlib \
                    path:${prefix}/include/cups/cups.h:cups-headers
platforms          darwin
worksrcdir         ${name}-${version}
      
configure.args     --with-gimp-print LDFLAGS='-L${prefix}/lib'  CFLAGS=-I'${prefix}/include' \
                   --with-fontpath="${prefix}/share/ghostscript/fonts:/usr/share/ghostscript/fonts"

build.target       ""
install.destroot   prefix=${destroot}${prefix}

post-install      { system "mkdir -p ${destroot}/${prefix}/share/ghostscript/"
                  system "cd ${workpath} && \
                        tar -cf - fonts | \
                        tar -xf - -C ${destroot}/${prefix}/share/ghostscript/"
                   }


variant     x11 {
                  depends_lib-append      lib:libX11:XFree86
                  configure.args-append   --with-x
                }
                
variant extra_fonts {
                  set other_fonts    ghostscript-fonts-other-6.0
                  distfiles-append   ${other_fonts}${extract.sufx}:fonts
                  checksums-append   ${other_fonts}${extract.sufx} md5 1a643ae62ef166562e4d422b1a601272
                  }
                 