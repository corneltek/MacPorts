# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem                      1.0

name                            giflib
version                         4.2.0
set major                       [lindex [split ${version} .] 0]
categories                      graphics
maintainers                     ryandesign
license                         MIT
platforms                       darwin
homepage                        http://sourceforge.net/projects/giflib/
master_sites                    sourceforge:project/giflib/giflib-${major}.x
use_bzip2                       yes

description                     GIF library using patented LZW algorithm

long_description                GIF loading and saving shared library. \
                                Uses the LZW algorithm.

checksums                       rmd160  4549579f5fd8418dcca678f917b7c1aa7745b098 \
                                sha256  9ef613b8235c8b718d1a8db7201418d5522e8aa50a60c8eccdea82d5e8da2026

patchfiles                      patch-gif_lib.h.diff

depends_build                   port:xmlto

configure.args                  --disable-x11

use_parallel_build              yes

post-destroot {
    set docdir ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}/html
    xinstall -W ${worksrcpath} AUTHORS BUGS COPYING NEWS README TODO api.txt history.txt ${destroot}${docdir}
    eval xinstall -m 644 [glob ${worksrcpath}/doc/*.html] ${destroot}${docdir}/html
    eval xinstall -m 644 [glob ${worksrcpath}/doc/*.1] ${destroot}${prefix}/share/man/man1
}

variant no_x11 conflicts x11 description {Legacy compatibility variant} {}
variant x11 {
    depends_lib-append          port:xorg-libsm \
                                port:xorg-libX11
    
    configure.args-delete       --disable-x11
}

if {[variant_isset no_x11]} {
    default_variants -x11
} else {
    default_variants +x11
}

livecheck.regex                 /${name}-(\[0-9.\]+)${extract.suffix}
