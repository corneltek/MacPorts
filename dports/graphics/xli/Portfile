# $Id: Portfile,v 1.4 2004/01/14 19:23:18 olegb Exp $
PortSystem 1.0

name		xli
version		1.17.0
categories	graphics
depends_lib	lib:png:libpng lib:jpeg:jpeg
master_sites	http://pantransit.reptiles.org/prog/
homepage	http://pantransit.reptiles.org/prog/index.html#xli
checksums	md5 996d8cd0b2be2071332412c6802852e6
maintainers	fenner@research.att.com
patchfiles	patch-Imakefile patch-rlelib.c
description	X11 Image Loading Utility
post-extract {
	# Handle "zopen" collision with /usr/include/stdio.h .
	#
	set files [glob "${worksrcpath}/*.\[ch]"]
	# It'd be nice to pass files to reinplace all at once.
	foreach file $files {
		# Some files come read-only and reinplace doesn't like that
		file attributes $file -permissions +w
		reinplace s/zopen/xli_zopen/ $file
	}
}
#use_xmkmf	yes
configure {
	system "cd ${worksrcpath} && imake -DUseInstalled -I/usr/X11R6/lib/X11/config -T../../files/Port.tmpl"
}
pre-destroot {
	# XXX
	# need X11-in-prefix mtree
	system "mkdir -p ${destroot}${prefix}/lib/X11/app-defaults"
}
destroot.destdir	DESTDIR=${destroot} prefix=${prefix}
build.args	prefix=${prefix} JPEG_INCLUDES=-I${prefix}/include JPEG_LDFLAGS=-L${prefix}/lib
long_description xli is a fast image viewer for X11, which supports \
 many different types of images.
