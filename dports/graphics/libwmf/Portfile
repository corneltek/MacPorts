# $Id: Portfile,v 1.2 2004/01/14 03:42:34 blb Exp $
PortSystem		1.0
name			libwmf
version			0.2.8.2
categories		graphics
maintainers		blb@pobox.com
description		Library for converting WMF (Window Metafile Format) files

long_description \
	libwmf is a library for reading vector images in Microsoft's native \
	Windows Metafile Format (WMF) and for either (a) displaying them in, \
	e.g., an X window, or (b) converting them to more standard/open file \
	formats.

homepage		http://wvware.sourceforge.net/libwmf.html

master_sites	sourceforge:wvware

platforms		darwin
checksums		md5 1e0422026dd392651f0b8641fa33599d
depends_lib		lib:libz:zlib lib:libpng:libpng lib:libfreetype:freetype
patchfiles		patch-ltmain.sh

post-patch {
	reinplace "s|@LIBWMF_GDK_PIXBUF_TRUE@|#|g" ${worksrcpath}/src/Makefile.in
	reinplace "s|@LIBWMF_GDK_PIXBUF_FALSE@||g" ${worksrcpath}/src/Makefile.in
}

configure.env	CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib" \
				PKG_CONFIG_PATH="${prefix}/lib/pkgconfig:/usr/X11R6/lib/pkgconfig"

configure.args	--disable-static --without-x

variant expat {
	depends_lib-append		lib:libexpat:expat
	configure.args-append	--with-expat
}

variant jpeg {
	depends_lib-append		lib:libjpeg:jpeg
	configure.args-append	--with-jpeg
}

variant x11 {
	depends_lib-append		lib:libX11.6:XFree86
	configure.args-delete	--without-x
	configure.args-append	--with-x
}

variant xml2 {
	depends_lib-append		lib:libxml2:libxml2
	configure.args-append	--with-libxml2
}

