# $Id: Portfile,v 1.12 2004/02/25 17:44:55 gwright Exp $

PortSystem 1.0
name		graphviz
version		1.10
categories	graphics
maintainers	gwright@comcast
description	Graph visualization software from AT&T and Bell Labs
long_description \
		Graph Visualization Software from AT&T Laboratories and \
		Bell Laboratories (Lucent Technologies).		\
									\
		The package contains:					\
    		dotty  - customizable X windows graph viewer written in	\
			 the Lefty editor				\
    		tcldot - customizable TCL/tk graph viewer written by	\
			 John Ellson					\
    		dot    - batch program for drawing directed graphs as	\
			 hierarchies					\
    		neato  - batch program for drawing undirected graphs	\
			 using Kamada-Kawai spring models.

platforms	darwin
homepage	http://www.graphviz.org/
master_sites	http://www.graphviz.org/pub/graphviz/ARCHIVE/

checksums	md5 e1402531abff68d146bf94e72b44dc2a

depends_lib	lib:libX11.6:XFree86 lib:libjpeg.62:jpeg lib:libpng.3:libpng \
		lib:libfreetype.6:freetype

patchfiles	patch-ltmain.sh patch-dgl.c

configure.args	--mandir=${prefix}/share/man

#
# The post-destroot phase is a hack to fix a name collision between
# graphviz's 'gpr' graph processing language and the 'pr' program from
# the coreutils port, which installs as 'gpr'. (Coreutils 'pr' acquires
# a 'g' to denote its GNU origin.)
#

post-destroot	{ cd ${destroot}/${prefix}/bin
		  file rename gpr gv-gpr

		  cd ${destroot}/${prefix}/man/man1
		  file rename gpr.1 gv-gpr.1

		  reinplace s/gpr/gv-gpr/g acyclic.1
		  reinplace s/gpr/gv-gpr/g ccomps.1
		  reinplace s/gpr/gv-gpr/g colorize.1
		  reinplace s/gpr/gv-gpr/g gc.1
		  reinplace s/gpr/gv-gpr/g gv-gpr.1
		  reinplace s/gpr/gv-gpr/g gvpack.1
		  reinplace s/gpr/gv-gpr/g nop.1
		  reinplace s/gpr/gv-gpr/g prune.1
		  reinplace s/gpr/gv-gpr/g sccmap.1
		  reinplace s/gpr/gv-gpr/g tred.1
		  reinplace s/gpr/gv-gpr/g unflatten.1
		}
