From c21e7b581c898692b6721468b0568d705280ad1e Mon Sep 17 00:00:00 2001
From: Michael Natterer <mitch@gimp.org>
Date: Sun, 10 Nov 2013 17:58:23 +0000
Subject: configure: run check for gtk-mac-integration only on OSX

---
diff --git a/configure.ac b/configure.ac
index 038b5e6..d82ca48 100644
--- configure.ac
+++ configure.ac
@@ -1844,14 +1844,6 @@ if test "x$enable_python" != xno; then
 fi
 AM_CONDITIONAL(BUILD_PYTHON, test "x$enable_python" != xno)
 
-####################################
-# Check for GTK Mac Integration
-####################################
-
-if test "x$platform_osx" != xno; then
-  PKG_CHECK_MODULES(GTK_MAC_INTEGRATION, gtk-mac-integration >= gtk_mac_integration_required_version)
-fi
-
 
 #########################################
 # Check whether Script-Fu should be built
@@ -1901,6 +1893,15 @@ esac
 AM_CONDITIONAL(PLATFORM_OSX, test "x$platform_osx" = xyes)
 
 
+###############################
+# Check for GTK Mac Integration
+###############################
+
+if test "x$platform_osx" != xno; then
+  PKG_CHECK_MODULES(GTK_MAC_INTEGRATION, gtk-mac-integration >= gtk_mac_integration_required_version)
+fi
+
+
 ####################################
 # Check for Mac OS X TWAIN framework
 ####################################
--
cgit v0.9.2
From fef663774e90bbf5edc47a1f85ad14fcc45f80f1 Mon Sep 17 00:00:00 2001
From: Michael Natterer <mitch@gimp.org>
Date: Sun, 10 Nov 2013 19:51:37 +0000
Subject: configure: check for gtk-mac-intregration only if GTK+ is built for quartz

(cherry picked from commit cfa074628f24211d681b18d96be8eef7d217fcd9)
---
diff --git a/configure.ac b/configure.ac
index d82ca48..d6e4b78 100644
--- configure.ac
+++ configure.ac
@@ -1897,7 +1897,8 @@ AM_CONDITIONAL(PLATFORM_OSX, test "x$platform_osx" = xyes)
 # Check for GTK Mac Integration
 ###############################
 
-if test "x$platform_osx" != xno; then
+if test "x$platform_osx" != xno &&
+   test "x`$PKG_CONFIG --variable=target gtk+-2.0`" == "xquartz"; then
   PKG_CHECK_MODULES(GTK_MAC_INTEGRATION, gtk-mac-integration >= gtk_mac_integration_required_version)
 fi
 
--
cgit v0.9.2
