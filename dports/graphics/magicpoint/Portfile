# $Id: Portfile,v 1.2 2004/01/23 00:39:27 fenner Exp $
PortSystem 1.0

name		magicpoint
version		1.10a
categories	graphics
maintainers	fenner@research.att.com
homepage	http://www.mew.org/mgp/
master_sites	ftp://ftp.mew.org/pub/mgp/
checksums	md5 7a5d91b2b3bdabea704ee3cb6505d772
description	An X11 based presentation tool.
long_description Magic Point is an X11 based presentation tool. It \
 is designed to make simple presentations easy while to make complicated \
 presentations possible.  Its presentation file (whose suffix is \
 typically .mgp) is just text so that you can create presentation \
 files quickly with your favorite editor (e.g. Emacs, vi).

#XXX this should be in portmain.tcl
set localprefix ${prefix}
prefix		${x11prefix}

patchfiles	patch-config.guess patch-image.h patch-new.c patch-parse.c \
		patch-default.mgp patch-configure

depends_lib	lib:libXft.2:Xft2 lib:libpng12.0:libpng \
		lib:libungif.4:libungif

# pkg-config should have both ${x11prefix} and ${prefix} hardcoded;
# until it does, we let it know about ${x11prefix}.
# LOCALPREFIX= is for configure to find libungif.
configure.env	PKG_CONFIG_PATH=${x11prefix}/lib/pkgconfig LOCALPREFIX=${localprefix}
configure.args	--enable-gif

post-configure {
	# unusual port: uses not just autoconf but also Imake
	system "cd \"${worksrcpath}\" && xmkmf && make Makefiles"
}

# note destroot requires root due to use of "install -u root"

destroot.target	install install.man

post-destroot {
	# darwinports tries to force man pages into share/man;
	# for X applications the man dir is simply man, so move them
	system "cd \"${destroot}${prefix}\" && rm man && mv share/man ."

	# install some of the documentation and examples
}
