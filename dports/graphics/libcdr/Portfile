# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            libcdr
version         0.0.10
categories      graphics
license         {GPL-2.1+ LGPL-2.1+ MPL-1.1+}
maintainers     devans openmaintainer
platforms       darwin
homepage        http://www.freedesktop.org/wiki/Software/libcdr
master_sites    http://dev-www.libreoffice.org/src/

description \
    Libcdr is a library and a set of tools for reading and converting binary files \
    produced by Corel DRAW.

long_description \
    ${description}

use_xz          yes

checksums       sha256  8d704bb391ecbcd171686ef6437d99e42f8b556e694d57581b3424fff8d037e4 \
                rmd160  1b437ea4e1d7e26e782c617d2b2618e0e8d7f0e8

depends_build   port:pkgconfig

depends_lib     port:icu \
                port:libwpd \
                port:libwpg \
                port:lcms2 \
                port:zlib

configure.args  --without-docs

if {${os.major} > 9 && ${configure.compiler} == "clang"} {
    configure.cxxflags-append -std=c++11
} else {
    configure.args-append --disable-werror
    configure.cxxflags-append -Wno-long-long
}

variant docs description {Build reference documentation} {
    depends_build-append  port:doxygen
    configure.args-replace --without-docs --with-docs
}

livecheck.type  regex
livecheck.url   ${master_sites}
livecheck.regex "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"
