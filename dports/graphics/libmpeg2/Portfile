# $Id: Portfile,v 1.2 2003/03/03 06:53:22 mij Exp $

PortSystem 1.0
name			libmpeg2
version			0.3.1
revision		0
categories		graphics
maintainers		daved@nostrum.com
distname		mpeg2dec-${version}
platforms		darwin freebsd
master_sites		http://libmpeg2.sourceforge.net/files/
checksums		md5 e9f899d232eee5e7282c9c96ffde8016
homepage		http://libmpeg2.sourceforge.net/
description		A free library for decoding mpeg-2 and \
			mpeg-1 video streams.
long_description	libmpeg2 is a free library for decoding \
			mpeg-2 and mpeg-1 video streams.  The main \
			goals in libmpeg2 development are \
			conformance, speed, portability, and \
			reuseability.
depends_lib		lib:libSDL:libsdl
configure.args		--enable-shared

patch {
	reinplace "s|@INCLUDES@|@INCLUDES@ -I\$(prefix)/include|" \
		${worksrcpath}/src/Makefile.in
	reinplace "37s|^|#include <SDL/SDL.h>|" \
		${worksrcpath}/src/mpeg2dec.c
}

variant darwin {
	configure.env	CPPFLAGS="-no-cpp-precomp"
}
