# $Id: Portfile,v 1.18 2003/03/03 06:53:21 mij Exp $

PortSystem 1.0
name		jpeg
version		6b 
set libver	9
categories	graphics
maintainers	eric@opendarwin.org
distname	jpegsrc.v6b
worksrcdir	${portname}-${portversion}
description	Library for manipulating JPEG images
long_description	This distribution contains the sixth public release of the Independent JPEG \
			Group's free JPEG software.  You are welcome to redistribute this software and \
			to use it for any purpose, subject to the conditions under LEGAL ISSUES, below. \
			Serious users of this software (particularly those incorporating it into \
			larger programs) should contact IJG at jpeg-info@uunet.uu.net to be added to \
			our electronic mailing list.  Mailing list members are notified of updates \
			and have a chance to participate in technical discussions, etc. \
			More Informations: http://www.ijg.org/

platforms	darwin freebsd
master_sites	http://www.ijg.org/files/
checksums	md5 dbd5f3b47ed13132f04c685d608a7547

post-build	{ cd ${worksrcpath}
		  system "cc -dynamiclib -install_name \
		  ${prefix}/lib/libjpeg.${libver}.dylib -compatibility_version \
		  ${libver} -all_load libjpeg.a -o libjpeg.${libver}.dylib" }

pre-install	{ system "install -o root -m 755 -d ${destroot}/${prefix}/bin"
		  system "install -o root -m 755 -d ${destroot}/${prefix}/man/man1"
		  system "install -o root -m 755 -d ${destroot}/${prefix}/include"
		  system "install -o root -m 755 -d ${destroot}/${prefix}/lib" 
		  cd ${worksrcpath} 
		  reinplace "s|^prefix = ${prefix}|prefix = ${destroot}/${prefix}|" Makefile }

post-install	{ cd ${worksrcpath}
		  system "install -o root -m 644 -c libjpeg.${libver}.dylib ${destroot}/${prefix}/lib"
		  system "ln -sf libjpeg.${libver}.dylib ${destroot}/${prefix}/lib/libjpeg.dylib"
		  system "make install-headers"
		}

