# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               active_variants 1.1
PortGroup               bitbucket 1.0

bitbucket.setup         Coin3D coin 1.5.0 SoQt-
bitbucket.tarball_from  downloads
name                    SoQt
categories              graphics devel
platforms               darwin
maintainers             gmail.com:mark.brethen openmaintainer
license                 BSD

description             SoQt is a Qt GUI component toolkit library for Coin.

long_description        ${description}

distname                ${name}-${version}

checksums               rmd160  04e9179954f7e3bfb5d1c595ad6c62215bc24ad2 \
                        sha256  f6a34b4c19e536c00f21aead298cdd274a7a0b03a31826fbe38fc96f3d82ab91

depends_build-append    port:pkgconfig \
                        port:doxygen

patchfiles              patch-configure.diff

post-build {
    reinplace -E {s|-arch [a-z0-9_]+||g} \
        ${worksrcpath}/SoQt.pc \
        ${worksrcpath}/soqt-default.cfg
}

platform darwin {
    configure.args-append   --disable-debug \
                            --disable-symbols \
                            --disable-dependency-tracking \
                            --enable-darwin-x11

    depends_lib-append      port:qt4-x11 \
                            port:Coin

    variant aqua description {Install as an OS X framework without X11} {
        depends_lib-replace     port:qt4-x11 port:qt4-mac

        require_active_variants Coin aqua

        patchfiles-append       patch-src-Inventor-Qt-Makefile.in.diff

        configure.args-delete   --enable-darwin-x11
    }
}
