# $Id: Portfile,v 1.2 2003/11/17 21:19:58 jkh Exp $
PortSystem 1.0
name            netpbm
version		10.11.10
categories      graphics
maintainers     norume@aps.anl.gov
description     Image manipulation
long_description    A whole bunch of utilities for primitive manipulation \
                    of graphic images.  Wide array of converters from one \
                    graphics format to another.  E.g. from g3 fax format to \
                    jpeg.  Many basic graphics editing tools such as \
                    magnifying and cropping.
homepage        http://netpbm.sourceforge.net/
master_sites	sourceforge:netpbm
platforms	darwin
depends_lib     lib:libzlib.1:zlib lib:libjpeg.6:jpeg lib:libtiff.3:tiff \
		lib:libpng.1:libpng
extract.suffix    .tgz
checksums	md5 4c057801d3c5bd116fda88a57cedb057
configure {
	system "cd ${worksrcpath} &&
		cat Makefile.config.in ../../files/Makefile.config.darwin |
		    sed -e '/@PREFIX@/s@@${prefix}@' >Makefile.config";
}
destroot {
	# netpbm has its own destroot-ish procedure.
	# unfortunately, it doesn't want the darwinports destroot
	# since it doesn't want anything to exist, including
	# directories.  So, we let netpbm build its destroot-like
	# area and then copy that into the port's destroot.
	system "rm -rf ${worksrcpath}/insttmp &&
		cd ${worksrcpath} &&
		make package pkgdir=${worksrcpath}/insttmp &&
		( cd ${worksrcpath}/insttmp/lib ;
			  ln -s libnetpbm.${version}.dylib libnetpbm.dylib ) &&
		( cd ${worksrcpath}/insttmp ;
		  tar cf - bin lib include man ) | ( cd ${destroot}${prefix} ;
						     tar xf - )";
}
