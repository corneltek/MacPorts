# $Id: Portfile,v 1.5 2003/12/21 19:05:34 rshaw Exp $

PortSystem 1.0
name			ImageMagick
version			5.5.6
revision		2
categories		graphics
maintainers		blb@pobox.com

description		Collection of tools and libraries to manipulate images in many formats

long_description	A robust collection of tools and libraries to read, write, \
                    	and manipulate an image in many image formats (over 87 major \
                    	formats) including popular formats like TIFF, JPEG, PNG, PDF, \
                    	PhotoCD, and GIF.  With ImageMagick you can create images \
                    	dynamically, making it suitable for Web applications. You \
		        can also resize, rotate, sharpen, color reduce, or add special \
                    	effects to an image or image sequence and save your completed \
                    	work in the same or differing image format. Image processing \
                    	operations are available from the command line, as well as \
                    	through C, C++, Perl, or Java programming interfaces.

homepage		http://www.imagemagick.org/

master_sites    	ftp://ftp.imagemagick.org/pub/${name}/ 
use_bzip2		yes
checksums		md5 eac3971f0704059dcf2f7a5737b7daa8

configure.args		--enable-shared=yes --enable-static=no \
                    	--without-perl --without-magick-plus-plus \
			--with-x --with-dps --with-ttf \
			--without-bzlib --without-fpx --without-gslib \
			--without-jbig --without-jpeg --without-jp2 \
			--without-lcms --without-png --without-tiff \
			--without-wmf --without-xml --without-zlib \
			--mandir=${prefix}/share/man
                    
configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
depends_build   	lib:libX11.6:XFree86

default_variants	+bzlib +jpeg +png +tiff +zlib
variant bzlib	{
	depends_lib-append	lib:libbz2:bzip2
	configure.args-delete	--without-bzlib
	configure.args-append	--with-bzlib
}
variant gs	{
	depends_lib-append	lib:libgs:ghostscript
	configure.args-delete	--without-gslib
	configure.args-append	--with-gslib
}
variant jpeg	{
	depends_lib-append	lib:libjpeg:jpeg
	configure.args-delete	--without-jpeg
	configure.args-append	--with-jpeg
}
variant lcms	{
	depends_lib-append	lib:liblcms:lcms
	configure.args-delete	--without-lcms
	configure.args-append	--with-lcms
}
variant png	{
	depends_lib-append	lib:libpng:libpng
	configure.args-delete	--without-png
	configure.args-append	--with-png
}
variant tiff	{
	depends_lib-append	lib:libtiff:tiff
	configure.args-delete	--without-tiff
	configure.args-append	--with-tiff
}
variant wmf	{
	depends_lib-append	lib:libwmf:libwmf
	configure.args-delete	--without-wmf
	configure.args-append	--with-wmf
}
variant xml	{
	depends_lib-append	lib:libxml:libxml2
	configure.args-delete	--without-xml
	configure.args-append	--with-xml
}
variant zlib	{
	depends_lib-append	lib:libz:zlib
	configure.args-delete	--without-zlib
	configure.args-append	--with-zlib
}
variant mpeg	{
	depends_lib-append	bin:mpeg2encode:mpeg2vidcodec \
				bin:mpeg2decode:mpeg2vidcodec
}
