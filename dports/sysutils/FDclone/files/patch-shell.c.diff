--- shell.c.orig	2012-07-27 00:00:00.000000000 +0900
+++ shell.c	2012-07-27 09:18:47.000000000 +0900
@@ -1716,7 +1716,7 @@
 	if (!histfile[n] || !*(histfile[n]) || savehist[n] <= 0) return(0);
 	if (!history[n] || !history[n][0]) return(-1);
 	lck = lockfopen(histfile[n], "w",
-		O_BINARY | O_WRONLY | O_CREAT | O_TRUNC, 0);
+		O_BINARY | O_WRONLY | O_CREAT | O_TRUNC, 077);
 	if (!lck || !(lck -> fp)) {
 		lockclose(lck);
 		return(-1);
