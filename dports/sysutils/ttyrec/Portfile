# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                ttyrec
version             1.0.8
categories          sysutils
maintainers         cal openmaintainer
platforms           darwin
license             BSD
description         ttyrec is a tty recorder and player.
long_description    \
    ttyrec is a tty recorder. Recorded data can be played back with the \
    included ttyplay command. ttyrec is just a derivative of script command \
    for recording timing information with microsecond accuracy as well. It \
    can record emacs -nw, vi, lynx, or any programs running on tty.

homepage            http://0xcc.net/ttyrec/
master_sites        ${homepage}

checksums           sha256  ef5e9bf276b65bb831f9c2554cd8784bd5b4ee65353808f82b7e2aef851587ec \
                    rmd160  f7538fa742d1c1e07b8b48f3fa79cfcf13ca8044

use_configure       no
universal_variant   yes

build.args          CC='${configure.cc}' \
                    CFLAGS='${configure.cflags} [get_canonical_archflags]' \
                    LDFLAGS='${configure.ldflags} [get_canonical_archflags]'

destroot {
    set bin {ttyrec ttyplay ttytime}
    set man {ttyrec.1 ttyplay.1 ttytime.1}
    set share {README}
    foreach binfile $bin {
        xinstall -m 755 "${worksrcpath}/${binfile}" "${destroot}${prefix}/bin/"
    }
    foreach manfile $man {
        xinstall -m 644 "${worksrcpath}/${manfile}" "${destroot}${prefix}/share/man/man1/"
    }
    xinstall -d -m 755 "${destroot}${prefix}/share/doc"
    xinstall -d -m 755 "${destroot}${prefix}/share/doc/${name}"
    foreach sharefile $share {
        xinstall -m 644 "${worksrcpath}/${sharefile}" "${destroot}${prefix}/share/doc/${name}/"
    }
}

livecheck.regex     "${name}-(\[0-9.\]+)\\${extract.suffix}"
livecheck.type      regex
livecheck.url       ${homepage}

