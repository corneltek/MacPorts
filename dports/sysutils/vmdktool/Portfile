# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                vmdktool
version             1.3
categories          sysutils emulators
platforms           darwin
maintainers         e-dad.net:glenn
license             BSD

description         converts raw filesystems to VMDK files and vice versa

long_description    ${name} ${description}. \
                    VMDK files can be imported directly into most Virtual Machine servers \
                    as guest filesystems. Automatic machine deployments into products \
                    such as VMwareâ€™s ESXi and VirtualBox requires the ability to construct \
                    VMDK files as the initial filesystem images for the created guests.

homepage            http://manned.org/vmdktool

master_sites        http://people.freebsd.org/~brian/vmdktool/ \
                    ftp://ftp.awfulhak.org/pub/vmdktool/

checksums           sha1    cf5ceb2ad33e7a20a408953a4431fe48ad151a21 \
                    sha256  4582ffb5127c7f69e0da53beff3d5466f2408e15f42e1d067623c21f9ca336cc

depends_lib         port:zlib

patchfiles          patch-Makefile.diff

use_configure       no

variant universal {}

build.env           CC=${configure.cc} \
                    CFLAGS="${configure.cflags} [get_canonical_archflags cc]"

test.run            yes

destroot.args       PREFIX=${prefix}

livecheck.type      regex
livecheck.url       [lindex ${master_sites} 0]
livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
