PortSystem 1.0
name		john
version		1.6
revision	0
categories	net
maintainers	jpm@opendarwin.org
description	John the Ripper password cracker
long_description	XXX
platforms	darwin
default_variants	+stable
master_sites	http://www.openwall.com/john/ \
		ftp://ftp.ca.openwall.com/pub/projects/john/ \
		ftp://ftp.openwall.com/pub/projects/john/ \
		ftp://ftp1.ru.openwall.com/pub/projects/john/ \
		ftp://ftp2.ru.openwall.com/pub/projects/john/ \
		ftp://ftp.pl.openwall.com/pub/projects/john/ \
		ftp://ftp.ua.openwall.com/pub/projects/john/ \
		ftp://ftp.cz.openwall.com/pub/projects/john/
variant stable {
	version		1.6
	checksums	md5 aae782f160041b2bdc624b0a84054e32
	patchfiles 	patch-Makefile
	worksrcdir	${distname}/src
	contents {
		bin/john
		share/john/run/all.chr
		share/john/run/alpha.chr
		share/john/run/digits.chr
		share/john/run/john
		share/john/run/john.ini
		share/john/run/lanman.chr
		share/john/run/mailer
		share/john/run/password.lst
		share/john/run/unafs
		share/john/run/unique
		share/john/run/unshadow
		share/john/run/
		share/john/
		share/doc/john/CONFIG
		share/doc/john/CREDITS
		share/doc/john/EXAMPLES
		share/doc/john/EXTERNAL
		share/doc/john/FAQ
		share/doc/john/INSTALL
		share/doc/john/MODES
		share/doc/john/NEWS
		share/doc/john/OPTIONS
		share/doc/john/README
		share/doc/john/RULES
		share/doc/john/
	}
}
variant unstable {
	version		1.6.32
	checksums	md5 fc43647268a2841bf9c8df819fafef26
	patchfiles-delete	patch-Makefile
	worksrcdir	${distname}/src
	contents {
		bin/john
		share/john/run/john
		share/john/run/john.conf
		share/john/run/mailer
		share/john/run/password.lst
		share/john/run/unafs
		share/john/run/unique
		share/john/run/unshadow
		share/john/run/
		share/john/
		share/doc/john/CHANGES
		share/doc/john/LICENSING
		share/doc/john/README
		share/doc/john/
	}
}	
configure	{}
build.args	macosx-ppc-cc
build.target.all
install {
	file mkdir ${prefix}/share/john/
	system "cp -fR ${portpath}/${workdir}/${distname}/run ${prefix}/share/john/"
	#file copy -force ${portpath}/${workdir}/${distname}/run ${prefix}/share/john/
	system "chmod -R ugo+rx ${prefix}/share/john/run/"
	system "ln -s ${prefix}/share/john/run/john ${prefix}/bin/john"
	
	file mkdir ${prefix}/share/doc/john/
	system "cp -fR ${portpath}/${workdir}/${distname}/doc/* ${prefix}/share/doc/john/"
	#file copy -force ${portpath}/${workdir}/${distname}/doc/* ${prefix}/share/doc/john/
	system "chmod -R ugo+rx ${prefix}/share/doc/john/"
}
