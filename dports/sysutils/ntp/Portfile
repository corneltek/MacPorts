# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name            ntp
version         4.2.7p470
checksums       rmd160  6d7432caf37d42af4088cf82dcee3cc571526551 \
                sha256  b25ce2a3ccbbdc011044b45ef8ab1d4ea9d1290427bce78c07158e19fb65b333

categories      sysutils net
maintainers     geeklair.net:dluke
description     NTP is a protocol designed to synchronize the clocks of computers over a network
#license        NTP (http://www.eecis.udel.edu/~mills/ntp/html/copyright.html), see http://opensource.org/licenses/NTP
license         Permissive

long_description        NTP is an implementation of RFC-5905. It is widely \
                        used to synchronize a computer to Internet time \
                        servers or other sources.
homepage        http://www.ntp.org/
master_sites    http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-dev/
distname        ntp-dev-${version}

platforms       darwin

startupitem.create      yes
startupitem.netchange   yes
startupitem.executable  ${prefix}/bin/ntpd -n -g -p ${prefix}/var/run/ntpd.pid -f ${prefix}/var/db/ntp.drift -c ${prefix}/etc/ntp.conf

post-destroot   {
            xinstall -o root -m 644 ${filespath}/ntp.conf \
                ${destroot}${prefix}/etc/ntp.conf.dist

            xinstall -m 755 -d ${destroot}${prefix}/var/run \
                ${destroot}${prefix}/var/db

            destroot.keepdirs ${destroot}${prefix}/var/run \
                ${destroot}${prefix}/var/db
        }

post-activate   {
            if {![file exists ${prefix}/etc/ntp.conf]} {
                file copy ${prefix}/etc/ntp.conf.dist ${prefix}/etc/ntp.conf
            }
        }

livecheck.type regex
livecheck.url http://support.ntp.org/rss/releases.xml
livecheck.regex (\\d+\.\\d+.\\d+p\\d+)\.\*Development
