--- configure.orig	Thu Feb  5 09:38:05 2004
+++ configure	Thu Feb  5 09:39:47 2004
@@ -12512,8 +12512,8 @@
 WITH_PYTHON_VERSION=
 if test $withval = auto ; then
 
-  echo $ac_n "checking for python 2.2""... $ac_c" 1>&6
-echo "configure:12517: checking for python 2.2" >&5
+  echo $ac_n "checking for python 2.3""... $ac_c" 1>&6
+echo "configure:12517: checking for python 2.3" >&5
   if test "$cross_compiling" = yes; then
   withval=yes
 else
@@ -12521,9 +12521,9 @@
 #line 12522 "configure"
 #include "confdefs.h"
 
-#include <python2.2/Python.h>
+#include <python2.3/Python.h>
 main() {
-  exit(strncmp("2.2", PY_VERSION, 3));
+  exit(strncmp("2.3", PY_VERSION, 3));
 } 
 EOF
 if { (eval echo configure:12530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
@@ -12540,9 +12540,40 @@
 
   echo "$ac_t""$withval" 1>&6
   if test $withval = yes ; then
-    WITH_PYTHON_VERSION="2.2"
+    WITH_PYTHON_VERSION="2.3"
   else
 
+	echo $ac_n "checking for python 2.2""... $ac_c" 1>&6
+	echo "configure:12517: checking for python 2.2" >&5
+	if test "$cross_compiling" = yes; then
+	    withval=yes
+	else
+	    cat > conftest.$ac_ext <<EOF
+#line 12522 "configure"
+#include "confdefs.h"
+
+#include <python2.2/Python.h>
+main() {
+	exit(strncmp("2.2", PY_VERSION, 3));
+} 
+EOF
+	    if { (eval echo configure:12530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+		then
+		withval=yes
+	    else
+		echo "configure: failed program was:" >&5
+		cat conftest.$ac_ext >&5
+		rm -fr conftest*
+		withval=no
+	    fi
+	    rm -fr conftest*
+	fi
+
+	echo "$ac_t""$withval" 1>&6
+	if test $withval = yes ; then
+	    WITH_PYTHON_VERSION="2.2"
+	else
+
     echo $ac_n "checking for python 1.5.2""... $ac_c" 1>&6
 echo "configure:12548: checking for python 1.5.2" >&5
     if test "$cross_compiling" = yes; then
@@ -12574,7 +12605,7 @@
       WITH_PYTHON_VERSION="1.5"
     fi
   fi
-
+  fi
 fi
 
 if test -n "$WITH_PYTHON_VERSION" ; then
