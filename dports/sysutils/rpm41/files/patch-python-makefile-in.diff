--- python-orig/Makefile.in	Thu Feb 14 15:58:41 2002
+++ python/Makefile.in	Fri May 30 14:53:52 2003
@@ -210,15 +210,15 @@
 	$(top_builddir)/popt/libpopt.la
 
 
-LDADD = 
+LDADD = 
 
 pythondir = $(prefix)/lib/python${PYVER}/site-packages
-python_PROGRAMS = rpmmodule.so poptmodule.so
+python_LTLIBRARIES = rpmmodule.so poptmodule.so
 
 rpmmodule_so_SOURCES = 
-rpmmodule_so_LDFLAGS = $(mylibs) $(LIBS) -shared -Wl,-soname,rpmmodule.so
+rpmmodule_so_LDFLAGS = $(mylibs) $(LIBS) -bundle -bundle_loader $(__PYTHON)
 poptmodule_so_SOURCES = poptmodule.c
-poptmodule_so_LDFLAGS = $(mylibs) $(LIBS) -shared -Wl,-soname,poptmodule.so
+poptmodule_so_LDFLAGS = $(mylibs) $(LIBS) -bundle -bundle_loader $(__PYTHON)
 
 noinst_LTLIBRARIES = librpmmodule.la
 librpmmodule_la_SOURCES = rpmmodule.c hash.c upgrade.c
@@ -476,10 +476,10 @@
 
 
 rpmmodule.so: $(librpmmodule_la_OBJECTS)
-	$(LINK) -o $@ $(librpmmodule_la_OBJECTS) $(rpmmodule_so_LDFLAGS)
+	$(LINK) $(librpmmodule_la_OBJECTS) $(rpmmodule_so_LDFLAGS)
 
 poptmodule.so: $(poptmodule_so_OBJECTS)
-	$(LINK) -o $@ $(poptmodule_so_OBJECTS) $(poptmodule_so_LDFLAGS)
+	$(LINK) $(poptmodule_so_OBJECTS) $(poptmodule_so_LDFLAGS)
 
 .PHONY:	lclint
 lclint:
