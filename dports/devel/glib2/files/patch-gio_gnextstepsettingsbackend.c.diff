--- gio/gnextstepsettingsbackend.c.orig	2012-04-10 10:00:16.000000000 -0700
+++ gio/gnextstepsettingsbackend.c	2012-04-10 10:11:15.000000000 -0700
@@ -340,7 +340,12 @@ g_nextstep_settings_backend_get_g_varian
 
           g_variant_builder_init (&builder, type);
 
-          for (key in object)
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 1050
+          for(key in object)
+#else
+          NSEnumerator *enumerator = [object objectEnumerator];
+          while((key = [enumerator nextObject]))
+#endif
             {
               GVariant *name;
               id value;
@@ -376,7 +381,12 @@ g_nextstep_settings_backend_get_g_varian
           value_type = g_variant_type_element (type);
           g_variant_builder_init (&builder, type);
 
-          for (value in object)
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 1050
+          for(value in object)
+#else
+          NSEnumerator *enumerator = [object objectEnumerator];
+          while((value = [enumerator nextObject]))
+#endif
             {
               GVariant *variant = g_nextstep_settings_backend_get_g_variant (value, value_type);
 
