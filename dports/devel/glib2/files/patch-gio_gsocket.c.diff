https://bugzilla.gnome.org/show_bug.cgi?id=686786
--- gio/gsocket.c.orig	2012-11-09 21:27:29.000000000 -0600
+++ gio/gsocket.c	2012-11-13 23:05:03.000000000 -0600
@@ -2385,6 +2385,8 @@
   gulong avail = 0;
 #else
   gint avail = 0;
+#endif
+#ifdef SO_NREAD
   gsize avail_len = sizeof (avail);
 #endif
 
