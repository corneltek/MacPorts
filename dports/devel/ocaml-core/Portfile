# $Id$

PortSystem          1.0

name                ocaml-core
version             107.01
categories          devel ml
platforms           darwin
maintainers         mww openmaintainer
description         Jane Street's alternative to the standard OCaml library
license             LGPL-2.1
long_description    ${description}
homepage            http://www.janestreet.com/ocaml/
master_sites        ${homepage}
checksums           md5     375d8f46e47d44e1de35cf36b78b9c8e \
                    sha1    ef4443939cb42f5778912608d3023a669b06d44f \
                    rmd160  5a496d71ac40bd709675e12a90233956a7a9309d

distname            core-${version}

depends_lib         port:ocaml port:ocaml-findlib port:ocaml-sexplib \
                    port:ocaml-res port:ocaml-bin-prot port:ocaml-fieldslib

use_configure       no

build.env           PREFIX=${prefix}
use_parallel_build  no

set ocamlfind_destdir ${destroot}${prefix}/lib/ocaml/site-lib

destroot.env        OCAMLFIND_DESTDIR="$ocamlfind_destdir"

pre-destroot {
    xinstall -m 755 -d $ocamlfind_destdir/stublibs
}

platform darwin {
    patchfiles-append lib_zone.ml.diff
}
