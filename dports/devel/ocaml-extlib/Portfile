# $Id$

PortSystem 1.0

name                ocaml-extlib
version             1.6.0
revision            0
categories          devel ml
maintainers         mww openmaintainer
license             LGPL-2.1
description         Extended Standard Library for OCaml
long_description    A User-supported Extended Standard Library for OCaml
homepage            http://code.google.com/p/ocaml-extlib/
platforms           darwin
master_sites        googlecode:ocaml-extlib

checksums           md5     b8a874ca244e9369464156b1ba7c1842 \
                    rmd160  482a4408f90378a4b4ebbff2b0971e47443eaaa5 \
                    sha256  625d2a15e829209803a537342f72c66dcae37d8baab72658f75ce24bf290720d
distname            extlib-${version}

depends_lib         port:ocaml port:ocaml-findlib

patchfiles          patch-install.ml

use_configure       no

build {}

destroot.cmd        "${prefix}/bin/ocaml"
destroot.pre_args   install.ml
destroot.args       -b -n -doc
destroot.post_args

pre-destroot {
        set extlib_destdir ${destroot}[exec ${prefix}/bin/ocamlfind printconf destdir]
        xinstall -m 755 -d ${extlib_destdir}
        reinplace s|##PREFIX##|${prefix}| ${worksrcpath}/install.ml
        reinplace s|##DESTDIR##|${extlib_destdir}| ${worksrcpath}/install.ml
}

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc
    file copy ${worksrcpath}/extlib-doc ${destroot}${prefix}/share/doc/${name}
}
