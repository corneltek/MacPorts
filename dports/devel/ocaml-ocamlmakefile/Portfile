# $Id$

PortSystem          1.0

name                ocaml-ocamlmakefile
version             6.36.0
revision            1
categories          devel ml
maintainers         mww openmaintainer
license             LGPL-2.1
platforms           darwin
supported_archs     noarch
description         Automated compilation of complex OCaml-projects
long_description    ${description}

homepage            https://bitbucket.org/mmottl/ocaml-makefile
master_sites        https://bitbucket.org/mmottl/ocaml-makefile/downloads/

distname            ocaml-makefile-${version}

checksums           md5     641a7cf489d638e89491503d8c3b4ec8 \
                    sha1    8062c381221007edfea451031606e75d3bf5d71f \
                    rmd160  31f9670e501a4e2cc4c081ed6a05ffe198e3c746

depends_lib         port:ocaml \
                    port:ocaml-findlib

worksrcdir          ${distname}

use_configure       no

build               {}

destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/${name}/ \
        ${destroot}${prefix}/share/doc/${name} \
        ${destroot}${prefix}/share/examples/${name}
    xinstall -m 644 -W ${worksrcpath} OCamlMakefile \
        ${destroot}${prefix}/share/${name}
    foreach d {calc camlp4 gtk idl threads} {
        file copy ${worksrcpath}/${d} ${destroot}${prefix}/share/examples/${name}
    }
    xinstall -m 644 -W ${worksrcpath} README.txt LICENSE Changelog \
        ${destroot}${prefix}/share/doc/${name}
}

livecheck.type      regex
livecheck.url       ${master_sites}
livecheck.regex     "ocaml-makefile-(\[0-9\.]+).tar.gz"
