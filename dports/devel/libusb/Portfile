# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0
PortGroup       github 1.0

name            libusb
categories      devel

description     library for USB device access
long_description \
    library for use by user level applications to \
    access USB devices regardless of OS
homepage        http://libusb.info/

platforms       darwin
license         LGPL-2.1+
maintainers     michaelld toby

github.setup    libusb libusb 1.0.19 v
checksums       rmd160 c1ebcb76759695ef288bf1137e131ca1fa3456df \
                sha256 5b743a35a13af01f965818ca4a5f78d56b0335426632a6dc5820f5f66fd4edd4

configure {
    ui_debug "executing 'cd ${worksrcpath} && CC=${configure.cc} CFLAGS='${configure.cflags}' ./autogen.sh --prefix=${prefix}'"
    system -W ${worksrcpath} "CC=${configure.cc} CFLAGS='${configure.cflags}' ./autogen.sh  --prefix=${prefix}"
}

# build verbosely

build.args-append AM_DEFAULT_VERBOSITY=1

# overload the github livecheck regex to look for versions that
# are just numbers and '.', no letters (e.g., "1.0.19rc1").

livecheck.regex archive/[join ${github.tag_prefix} ""](\[0-9\.\]+)${extract.suffix}
