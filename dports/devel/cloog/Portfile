# $Id$

PortSystem          1.0
PortGroup           muniversal 1.0

name                cloog
version             0.16.3
revision            1
categories          devel math

maintainers         openmaintainer adfernandes
platforms           darwin

description         CLooG, the Chunky Loop Generator, generates code for scanning Z-polyhedra

long_description    CLooG is a free software and library to generate code for scanning Z-polyhedra. \
                    That is, it finds a code (e.g. in C, FORTRAN...) that reaches each \
                    integral point of one or more parameterized polyhedra. CLooG has been \
                    originally written to solve the code generation problem for optimizing \
                    compilers based on the polytope model. Nevertheless it is used now in \
                    various area e.g. to build control automata for high-level synthesis \
                    or to find the best polynomial approximation of a function. CLooG may \
                    help in any situation where scanning polyhedra matters. While the user \
                    has full control on generated code quality, CLooG is designed to avoid \
                    control overhead and to produce a very effective code.

license             LGPL-2.1
homepage            http://repo.or.cz/w/cloog.git
master_sites        http://www.bastoul.net/cloog/pages/download/count.php3?url=./

checksums           md5     a0f8a241cd1c4f103f8d2c91642b3498 \
                    sha1    f6765fa231f38c2f747e2b05e4eaaa470fd5851a \
                    rmd160  e2cd5f93b2221c037027b20ce23636952902235c

depends_lib         port:gmp

post-build {
    # Remove extraneous '-arch' flag from the 'pkgconfig' files (#34395)
    foreach file [glob -nocomplain -directory ${worksrcpath} *.pc */*.pc] {
        reinplace -E "s@-arch +\[A-Za-z0-9_\]+ *@@g" "${file}"
    }
    if {[variant_isset universal]} {
        foreach arch ${universal_archs_to_use} {
            foreach file [glob -nocomplain -directory ${worksrcpath}-${arch} *.pc */*.pc ] {
                reinplace -E "s@-arch +\[A-Za-z0-9_\]+ *@@g" "${file}"
            }
        }
    }
}

livecheck.type      regex
livecheck.url       ${master_sites}
livecheck.regex     ${name}-(\[0-9.\]+)\\.tar.gz
