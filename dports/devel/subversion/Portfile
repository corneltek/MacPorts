# $Id: Portfile,v 1.13 2003/06/19 01:16:08 rooneg Exp $

PortSystem 1.0

name		subversion
version		0.24.2
categories	devel
maintainers	rooneg@electricjellyfish.net
description	a cvs like version control system, but without the suck

long_description	Subversion is a version control system designed to be \
			as similar to cvs(1) as possible, while fixing many \
			outstanding problems with cvs(1).

homepage	http://subversion.tigris.org/
platforms	darwin

master_sites	http://subversion.tigris.org/files/documents/15/4807/

checksums	md5 535956794859aab9da34b78b6c783210

depends_lib	lib:libexpat.0:expat lib:libneon.23:neon lib:libapr-0.0:apr \
		lib:libapr-util-0.0:apr-util lib:libdb-4.1:db4

patchfiles	patch-Makefile.in

configure.type	gnu
configure.args	--with-berkeley-db=${prefix}/include/db4:${prefix}/lib \
		--with-neon=${prefix} \
		--with-apr=${prefix} \
		--with-apr-util=${prefix} \
		--without-apxs

post-configure	{
	 reinplace "s|need_relink=yes|need_relink=no|g" ${worksrcpath}/libtool
}

variant mod_dav_svn {
	depends_build	path:${prefix}/apache2/bin/apxs:apache2
	configure.args-append	--with-apxs=${prefix}/apache2/bin/apxs \
				--disable-mod-activation
	configure.args-delete	--without-apxs
}
