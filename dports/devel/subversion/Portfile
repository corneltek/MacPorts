# $Id: Portfile,v 1.18 2004/01/19 22:32:01 matt Exp $

PortSystem 1.0
name                subversion
version             0.36.0
categories          devel
maintainers         dluke@geeklair.net
description         a cvs like version control system, but without the suck

long_description    Subversion is a version control system designed to be \
                    as similar to cvs(1) as possible, while fixing many \
                    outstanding problems with cvs(1).

homepage            http://subversion.tigris.org/
master_sites	    http://svn.collab.net/tarballs/
checksums	    md5 84749fc90377e8ac23dbcd7aa4d99f75

depends_lib         lib:libexpat:expat lib:libneon.24.0.4:neon \
                    lib:libapr-0.0.9.5:apr lib:libaprutil-0.0.9.5:apr-util \
                    lib:libdb-4:db4

patchfiles          patch-Makefile.in

configure.args      --with-berkeley-db=${prefix}/include/db4:${prefix}/lib \
                    --with-neon=${prefix} --with-apr=${prefix} \
                    --with-apr-util=${prefix} --without-apxs \
					--mandir=${destroot}${prefix}/share/man

post-configure      { reinplace "s|need_relink=yes|need_relink=no|g" \
                          ${worksrcpath}/libtool
                    }

variant mod_dav_svn { depends_build path:${prefix}/apache2/bin/apxs:apache2
                      configure.args-append \
                          --with-apxs=${prefix}/apache2/bin/apxs \
                          --disable-mod-activation
                      configure.args-delete --without-apxs
                    }

