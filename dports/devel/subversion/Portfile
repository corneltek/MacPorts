# $Id: Portfile,v 1.17 2003/09/25 19:59:13 fkr Exp $

PortSystem 1.0
name                subversion
version             0.30.0
categories          devel
maintainers         jcorley1@nc.rr.com    
description         a cvs like version control system, but without the suck

long_description    Subversion is a version control system designed to be \
                    as similar to cvs(1) as possible, while fixing many \
                    outstanding problems with cvs(1).

homepage            http://subversion.tigris.org/
master_sites	    http://svn.collab.net/tarballs/
checksums	    md5 9dac76a67a217dc6b7f63259761ff93f

depends_lib         lib:libexpat.0:expat lib:libneon.24:neon \
                    lib:libapr-0.0:apr lib:libapr-util-0.0:apr-util \
                    lib:libdb-4.1:db4

patchfiles          patch-Makefile.in patch-configure

configure.args      --with-berkeley-db=${prefix}/include/db4:${prefix}/lib \
                    --with-neon=${prefix} --with-apr=${prefix} \
                    --with-apr-util=${prefix} --without-apxs

post-configure      { reinplace "s|need_relink=yes|need_relink=no|g" \
                          ${worksrcpath}/libtool
                    }

variant mod_dav_svn { depends_build path:${prefix}/apache2/bin/apxs:apache2
                      configure.args-append \
                          --with-apxs=${prefix}/apache2/bin/apxs \
                          --disable-mod-activation
                      configure.args-delete --without-apxs
                    }

