# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            libdmapsharing
version         2.9.28
categories      devel
license         LGPL-2+
maintainers     devans openmaintainer

description     A DMAP client and server library

long_description \
                libdmapsharing implements the DMAP protocols. This includes \
                support for DAAP and DPAP.

homepage        http://www.flyn.org/projects/libdmapsharing/
master_sites    ${homepage}

platforms       darwin

checksums       rmd160  a0d6dd09f670081f3077ca200d96f049fc2b18dc \
                sha256  fff5214007834d0120d7569de4dbd6270158cdca86437fb766b36b0057622ad9

depends_build   port:pkgconfig

# gst-plugins-base for libgstapp.
depends_lib     port:gtk2 \
                port:avahi \
                port:libgee \
                port:libsoup \
                port:gstreamer1-gst-plugins-base

patchfiles      patch-vala.diff

use_parallel_build no

use_autoreconf  yes
autoreconf.args -fvi

configure.args  --with-mdns=avahi \
                --enable-introspection=no \
                --disable-silent-rules

# gobject-introspection uses g-ir-scanner, which uses $CC from env

build.args-append CC="${configure.cc} ${configure.cc_archflags}"

livecheck.type  regex
livecheck.url   http://www.flyn.org/projects/libdmapsharing/download.html
livecheck.regex libdmapsharing-(\[0-9\]+\\\.\[0-9\\\.\]+).tar.gz
