# $Id: Portfile,v 1.3 2003/06/21 09:10:35 jkh Exp $

PortSystem 1.0
name		ddd
version		3.3.1
categories	devel
maintainers	jkh@opendarwin.org
description	Data Display Debugger
long_description DDD is a graphical front-end for GDB and other command-line debuggers.
homepage	http://www.gnu.org/software/ddd/
platforms	darwin
master_sites	ftp://ftp.gnu.org/gnu/ddd/
checksums	md5 38589618d7cd02a03d062bb116bbf1d2
depends_lib	lib:libXm.3:openMotif
patchfiles	patch-combo patch-logplayer.C

if {${os.version} > 6} {
	configure.env CC=gcc3 CXX=c++3
}

post-configure {
	system "for i in `grep -rl '^#pragma implementation' ${worksrcpath}` ; do sed -e 's:^#pragma implementation:// #pragma implementation:' < \$i > \$i.new && mv \$i.new \$i; done"
	system "for i in `grep -rl '^#pragma interface' ${worksrcpath}` ; do sed -e 's:^#pragma interface:// #pragma interface:' < \$i > \$i.new && mv \$i.new \$i; done"
}
