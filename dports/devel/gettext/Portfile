# $Id: Portfile,v 1.22 2003/11/12 20:33:35 mij Exp $

PortSystem 1.0
name		gettext
version		0.10.40
revision	3
categories	devel
maintainers	mij@opendarwin.org
description	GNU gettext package
homepage	http://www.gnu.org/software/gettext/
platforms	darwin freebsd

long_description This is the GNU gettext package.  It is interesting for \
		 authors or maintainers of other packages or programs \
		 which they want to see internationalized.  As one \
		 step the handling of messages in different languages \
		 should be implemented.  For this task GNU gettext \
		 provides the needed tools and library functions.

master_sites	ftp://ftp.gnu.org/pub/gnu/${portname}/ \
		http://wuarchive.wustl.edu/mirrors/gnu/${portname}/

checksums	md5 6a17767b47ffb45b4866cec9fb0a39b0

depends_lib	lib:libiconv.2:libiconv

patchfiles	patch-configure patch-ltmain.sh

configure.env	LDFLAGS="-fno-common"

configure.args	--with-libiconv-prefix=${prefix} --with-included-gettext \
		--mandir=${prefix}/share/man --infodir=${prefix}/share/info

post-patch	{ reinplace "s|(prefix)/doc|(prefix)/share/doc|g" \
		    ${worksrcpath}/doc/Makefile.am
		  reinplace "s|(prefix)/doc|(prefix)/share/doc|g" \
		    ${worksrcpath}/doc/Makefile.in
		  reinplace "s|(prefix)/doc|(prefix)/share/doc|g" \
		    ${worksrcpath}/man/Makefile.am
		  reinplace "s|(prefix)/doc|(prefix)/share/doc|g" \
		    ${worksrcpath}/man/Makefile.in }

variant darwin	{ depends_lib-append	lib:libdl.1:dlcompat 
		  configure.env-append	CPPFLAGS="-no-cpp-precomp" }

post-destroot	{ system "rm -f ${destroot}${prefix}/lib/charset.alias" }

