--- m4/python.m4.orig	2014-03-13 14:25:51.000000000 -0700
+++ m4/python.m4	2014-03-13 14:34:43.000000000 -0700
@@ -96,8 +96,13 @@
   dnl distinct variables so they can be overridden if need be.  However,
   dnl general consensus is that you shouldn't need this ability.
 
-  AC_SUBST([PYTHON_PREFIX], ['${prefix}'])
-  AC_SUBST([PYTHON_EXEC_PREFIX], ['${exec_prefix}'])
+  dnl This is not always true for MacPorts due to the file structure used
+  dnl to install multiple versions of Python in parallel. Rather than
+  dnl assuming the standard values of $prefix and $exec_prefix, we
+  dnl determine them by querying the Python executable specified in $PYTHON
+
+  AC_SUBST([PYTHON_PREFIX], [`$PYTHON -c "import sys; sys.stdout.write(sys.prefix);"`])
+  AC_SUBST([PYTHON_EXEC_PREFIX], [`$PYTHON -c "import sys; sys.stdout.write(sys.exec_prefix);"`])
 
   dnl At times (like when building shared libraries) you may want
   dnl to know which OS platform Python thinks this is.
