# $Id$

PortSystem        1.0

name              ocamlsdl
version           0.8.0
categories        devel multimedia
license           LGPL
maintainers       nomaintainer
description       OCaml bindings for SDL
long_description  \
    SDL (Simple DirectMedia Layer) is a generic API that provides low level access to audio, keyboard, mouse, and display\
    framebuffer across multiple platforms. OCamlSDL is an OCaml interface to the SDL and might be used to write multimedia\
    applications in Objective Caml.
homepage          http://ocamlsdl.sourceforge.net/
platforms         darwin
master_sites      sourceforge:project/${name}/OCamlSDL/${name}-${version}
checksums           md5     b7ee334cf107867cc8d08cbcc319c9af \
                    sha1    ebccd8c47d3c0ada8b97a7f6de5483197c885194 \
                    rmd160  f4595325d075cc6348c341e63ea321952758d7fb
#patchfiles              patch-configure.diff patch-src-Makefile.diff
depends_lib       port:libsdl_image port:libsdl_mixer port:libsdl_ttf port:ocaml port:lablgl port:ocaml-findlib

set ocamlfind_destdir ${destroot}${prefix}/lib/ocaml/site-lib

# cheat the system by providing a thin ocamlfind-wrapper that obeys destdir
post-extract {
    system -W ${worksrcpath} "echo ${prefix}/bin/ocamlfind \\$* -destdir ${ocamlfind_destdir} -ldconf ignore > ocamlfind"
    system -W ${worksrcpath} "chmod +x ocamlfind"
}

configure.args    --disable-sdltest
configure.env     OCAMLFIND=${worksrcpath}/ocamlfind

pre-destroot {
    xinstall -m 755 -d ${ocamlfind_destdir} ${destroot}${prefix}/share/doc/${name}
    file copy ${worksrcpath}/doc/html ${destroot}${prefix}/share/doc/${name}
}
