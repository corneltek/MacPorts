# $Id: Portfile,v 1.1 2004/01/19 12:11:52 toby Exp $

PortSystem 1.0
name             smalltalk
version          2.1.7
categories       lang
maintainers      toby@opendarwin.org
description      free implementation of Smalltalk-80
long_description \
    GNU Smalltalk is a free implementation of the Smalltalk-80 language \
    which runs on most versions on Unix and, in general, everywhere you \
    can find a POSIX-compliance library. An uncommon feature of it is \
    that it is well-versed to scripting tasks and headless processing.
homepage         http://www.gnu.org/software/smalltalk/
platforms        darwin
master_sites     gnu
checksums        md5 b3066f9068ab485eab32ccc0d104415b

pre-configure {
    reinplace s|<sys/poll.h>|"/usr/include/poll.h"| \
        ${worksrcpath}/lib-src/poll.h
}
configure.args   --disable-generational-gc \
                 --infodir=${prefix}/share/info \
                 --mandir=${prefix}/share/man

test.run         yes
test.cmd         make
test.target      check

variant darwin {
    depends_lib-append lib:libdl:dlcompat
}
