# $Id: Portfile,v 1.3 2003/05/13 15:32:16 gwright Exp $

PortSystem 1.0
name		clisp
version		2.29
categories	lang
maintainers	gwright@comcast.net
platforms	darwin
description	The Clisp Common Lisp Implementation
long_description	\
		CLISP is a Common Lisp implementation by Bruno Haible, \
		formerly of Karlsruhe University, and Michael Stoll, \
		formerly of Munich University, both in Germany. \
		It mostly supports the Lisp described in the \
		ANSI Common Lisp standard. \
			CLISP includes an interpreter, a compiler, almost all \
		of CLOS, a foreign language interface and a socket interface. \
		An X11 interface is available through CLX and Garnet. \
		Command line editing is provided by readline.

#bugs		Version 2.29 is compatible with maxima 5.9.0. Version \
#		2.30 introduced floating point bugs that maxima trips \
#		over.

homepage	http://clisp.cons.org/
master_sites	http://cvs2.cons.org/ftp-area/clisp/source/2.29/ \
		http://ftp.gnu.org/pub/gnu/clisp/release/ \
		http://telia.dl.sourceforge.net/sourceforge/clisp/

checksums	md5 53f7cfba5c5f3f7d536541e1df210b74

pre-patch	{ cd ${workpath}
		  file rename  ${name} ${name}-${version}
		}

patchfiles	patch-makemake.in patch-_clisp.c patch-stream.d

build.dir	${workpath}/${worksrcdir}/src

post-configure	{ cd ${build.dir}
		  system "./makemake --without-dynamic-ffi \
			  --with-readline --with-gettext \
			  --prefix=${prefix} > Makefile && \
			  make config.lisp"
		}

build		{ system "ulimit -s 8192 && \
			  cd ${build.dir} && \
			  make && \
			  make check"
		}

pre-install	{ cd ${build.dir} }


