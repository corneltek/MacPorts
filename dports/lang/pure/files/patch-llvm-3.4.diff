https://bitbucket.org/purelang/pure-lang/commits/00f09b2a47d3a7811f767ab30f679ebb984084d7
--- configure.ac.orig
+++ configure.ac
@@ -376,6 +376,19 @@
 if test "$pure_cv_new_ostream" = yes; then
   AC_DEFINE(NEW_OSTREAM, 1, [Define when building with new llvm::raw_fd_ostream interface (LLVM >= 2.7).])
 fi
+AC_CACHE_CHECK([for new llvm::raw_fd_ostream interface (LLVM >= 3.4)], [pure_cv_new_ostream34],
+  [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([
+	#include <string>
+        #include <llvm/Support/raw_ostream.h>
+      ], [
+  	std::string error;
+        llvm::raw_fd_ostream os("xxxjunk", error, llvm::sys::fs::F_Excl);
+      ])
+    ], [pure_cv_new_ostream34=yes], [pure_cv_new_ostream34=no])
+  ])
+if test "$pure_cv_new_ostream34" = yes; then
+  AC_DEFINE(NEW_OSTREAM34, 1, [Define when building with new llvm::raw_fd_ostream interface (LLVM >= 3.4).])
+fi
 else
 AC_CACHE_CHECK([for new LLVM IRBuilder class (LLVM >= 2.4)], [pure_cv_new_builder],
   [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([
--- interpreter.cc.orig
+++ interpreter.cc
@@ -10240,6 +10240,9 @@
 #define ostream_clear_error(os) os.clear()
 #endif
 
+#if NEW_OSTREAM34 // LLVM 3.4 cosmetic changes
+#define new_raw_fd_ostream(s,binary,msg) new llvm::raw_fd_ostream(s,msg,(binary)?llvm::sys::fs::F_Binary:llvm::sys::fs::F_None)
+#else
 #if NEW_OSTREAM // LLVM >= 2.7 takes an enumeration as the last parameter
 #define new_raw_fd_ostream(s,binary,msg) new llvm::raw_fd_ostream(s,msg,(binary)?llvm::raw_fd_ostream::F_Binary:0)
 #else
@@ -10249,6 +10252,7 @@
 #define new_raw_fd_ostream(s,binary,msg) new llvm::raw_fd_ostream(s,binary,msg)
 #endif
 #endif
+#endif
 
 void interpreter::check_used(set<Function*>& used,
 			     map<GlobalVariable*,Function*>& varmap)
