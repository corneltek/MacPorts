From 09393586b6207b5aafd0067fc6f6ee339b7d3ff4 Mon Sep 17 00:00:00 2001
From: Tobias Leich <email@froggs.de>
Date: Wed, 11 Mar 2015 16:07:37 +0100
Subject: [PATCH] use env's CFLAGS and LDFLAGS if set, fixes #182

---
 Configure.pl | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/Configure.pl b/Configure.pl
index 59e51e9..1403356 100644
--- a/Configure.pl
+++ b/Configure.pl
@@ -305,6 +305,7 @@
 push @cflags, $config{ccdefflags};
 push @cflags, $config{ccshared}     unless $args{static};
 push @cflags, '-fno-omit-frame-pointer -fsanitize=address' if $args{asan};
+push @cflags, $ENV{CFLAGS} if $ENV{CFLAGS};
 $config{cflags} = join ' ', @cflags;
 
 # generate LDFLAGS
@@ -314,6 +315,7 @@
 push @ldflags, $config{ldinstflags}       if $args{instrument};
 push @ldflags, $config{ldrpath}           unless $args{static};
 push @ldflags, $^O eq 'darwin' ? '-faddress-sanitizer' : '-fsanitize=address' if $args{asan};
+push @ldflags, $ENV{LDFLAGS} if $ENV{LDFLAGS};
 $config{ldflags} = join ' ', @ldflags;
 
 # setup library names
