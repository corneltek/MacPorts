# $Id: Portfile,v 1.1 2003/12/22 10:34:56 jkh Exp $

PortSystem 1.0
name		g-wrap
version		1.3.4
categories	lang
maintainers	jkh@opendarwin.org
platforms	darwin
description	A tool for autogenerating scheme bindings for C language functions, structures & enums.
long_description	${description}

homepage	http://www.gnucash.org/pub/g-wrap
master_sites	http://www.gnucash.org/pub/g-wrap/source/
checksums	md5 bf29b8b563cc27d9f7fd90a6243653aa
depends_lib	lib:lib:slib-guile

pre-build {
	if {![file exists ${prefix}/share/guile/slib]} {
		  file link -s ${prefix}/share/guile/slib ${prefix}/lib/slib
	}
	system "${prefix}/bin/guile -c \"(use-modules (ice-9 slib)) (require 'new-catalog)\""
}

post-destroot {
	system "mkdir -p ${destroot}${prefix}/share/info"
	system "mv ${destroot}${prefix}/info/* ${destroot}${prefix}/share/info"
	system "rmdir ${destroot}${prefix}/info"
	system "rm ${destroot}${prefix}/man"
}
