# $Id: Portfile,v 1.5 2003/04/05 20:26:09 jpm Exp $

PortSystem 1.0
name		ocaml
version		3.06
revision	1
categories	lang
maintainers	jpm@opendarwin.org
description	Latest implementation of the Caml dialect of ML
long_description	\
	The main novelties compared with its ancestor, Caml Light, are: \
	1) Full support for objects and classes -- here combined for the \
	first time with ML-style type reconstruction. \
	2) A powerful module calculus in the style of Standard ML (but \
	retaining separate compilation). \
	3) A high-performance native code compiler (in addition to a Caml \
	Light-style bytecode compiler).
homepage	http://caml.inria.fr/ocaml
platforms	darwin
master_sites	http://caml.inria.fr/distrib/${distname}/
checksums	\
	${distname}${extract.sufx} md5 51530ed183b511ce19fed325c8ab1b43
patchfiles	#the darwin variant this var to be forward declared
configure {
	cd ${worksrcpath}
	system	"./configure --no-tk --tk-no-x11 --bindir ${prefix}/bin \
		--libdir ${prefix}/lib/ocaml --mandir ${prefix}/man/man1 \
		--prefix ${prefix}"
}
build.target	world opt
install.args	BINDIR=${destroot}/${prefix}/bin \
	LIBDIR=${destroot}/${prefix}/lib MANDIR=${destroot}/${prefix}/man/man1

variant darwin {
	patch_sites	http://caml.inria.fr/caml-macosx-howto/
	patchfiles	ocaml-3.06-macosx-5.patch
	checksums-append	\
		${patchfiles} md5 dcb64e73b0aff37170bd2358c7138b3f
}
#variant tk {
#	depends_lib	lib:libtk8:tk
#	configure {
#		cd ${worksrcpath}
#		system	"./configure -tkdefs -I${prefix}/include -tklibs -L${prefix}/lib \
#			-bindir ${prefix}/bin -libdir ${prefix}/lib/ocaml -mandir \
#			${prefix}/man/man1 -prefix ${prefix}"
#	}
#}
