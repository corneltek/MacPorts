diff --git a/configure b/configure
index 71beb82..9353a3f 100755
--- a/configure
+++ b/configure
@@ -401,7 +401,7 @@ fi
 step_msg "looking for build programs"
 
 probe_need CFG_PERL        perl
-probe_need CFG_CURL        curl
+probe      CFG_CURL        curl
 probe_need CFG_PYTHON      python2.7 python2.6 python2 python
 
 python_version=$($CFG_PYTHON -V 2>&1)
@@ -420,8 +420,10 @@ else
     probe_need CFG_GIT     git
 fi
 
-probe CFG_CLANG            clang++
-probe CFG_GCC              gcc
+# CFG_CLANG and CFG_GCC will be from the same compiler suite now, but we
+# don't care because we're forcing a particular compiler anyway.
+probe CFG_CLANG            $CXX
+probe CFG_GCC              $CC
 probe CFG_LD               ld
 probe CFG_VALGRIND         valgrind
 probe CFG_PERF             perf
@@ -814,20 +816,11 @@ do
                    --enable-bindings=none --disable-threads \
                    --disable-pthreads"
 
-        if [ "$CFG_C_COMPILER" = "clang" ]
-        then
-            LLVM_CXX_32="clang++ -m32"
-            LLVM_CC_32="clang -m32"
-
-            LLVM_CXX_64="clang++"
-            LLVM_CC_64="clang"
-        else
-            LLVM_CXX_32="g++ -m32"
-            LLVM_CC_32="gcc -m32"
+        LLVM_CXX_32="$CXX -m32"
+        LLVM_CC_32="$CC -m32"
 
-            LLVM_CXX_64="g++"
-            LLVM_CC_64="gcc"
-        fi
+        LLVM_CXX_64="$CXX"
+        LLVM_CC_64="$CC"
 
         LLVM_CFLAGS_32="-m32"
         LLVM_CXXFLAGS_32="-m32"
