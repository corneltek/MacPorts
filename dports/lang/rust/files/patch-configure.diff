--- configure	2013-07-02 03:38:47.000000000 +0200
+++ configure.new	2013-07-03 23:28:50.000000000 +0200
@@ -402,7 +402,7 @@
 step_msg "looking for build programs"
 
 probe_need CFG_PERL        perl
-probe_need CFG_CURL        curl
+probe      CFG_CURL        curl
 probe_need CFG_PYTHON      python2.7 python2.6 python2 python
 
 python_version=$($CFG_PYTHON -V 2>&1)
@@ -421,9 +421,11 @@
     probe_need CFG_GIT     git
 fi
 
-probe CFG_CLANG            clang++
+# CFG_CLANG and CFG_GCC will be from the same compiler suite now, but we
+# don't care because we're forcing a particular compiler anyway.
+probe CFG_CLANG            $CXX
 probe CFG_CCACHE           ccache
-probe CFG_GCC              gcc
+probe CFG_GCC              $CC
 probe CFG_LD               ld
 probe CFG_VALGRIND         valgrind
 probe CFG_PERF             perf
@@ -836,35 +838,10 @@
         # Disable unused LLVM features
         LLVM_OPTS="$LLVM_DBG_OPTS --disable-docs --enable-bindings=none"
 
-        case "$CFG_C_COMPILER" in
-            ("ccache clang")
-            LLVM_CXX_32="ccache clang++ -m32 -Qunused-arguments"
-            LLVM_CC_32="ccache clang -m32 -Qunused-arguments"
-
-            LLVM_CXX_64="ccache clang++ -Qunused-arguments"
-            LLVM_CC_64="ccache clang -Qunused-arguments"
-            ;;
-            ("clang")
-            LLVM_CXX_32="clang++ -m32"
-            LLVM_CC_32="clang -m32"
-
-            LLVM_CXX_64="clang++"
-            LLVM_CC_64="clang"
-            ;;
-            ("ccache gcc")
-            LLVM_CXX_32="ccache g++ -m32"
-            LLVM_CC_32="ccache gcc -m32"
-
-            LLVM_CXX_64="ccache g++"
-            LLVM_CC_64="ccache gcc"
-            ;;
-            ("gcc")
-            LLVM_CXX_32="g++ -m32"
-            LLVM_CC_32="gcc -m32"
-
-            LLVM_CXX_64="g++"
-            LLVM_CC_64="gcc"
-        esac
+		LLVM_CXX_32="$CXX -m32"
+		LLVM_CC_32="$CC -m32"
+		LLVM_CXX_64="$CXX"
+		LLVM_CC_64="$CC"
 
         LLVM_CFLAGS_32="-m32"
         LLVM_CXXFLAGS_32="-m32"
