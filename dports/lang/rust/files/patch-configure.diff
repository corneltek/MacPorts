diff --git a/configure b/configure
index f2afa2d..172984f 100755
--- a/configure
+++ b/configure
@@ -363,7 +363,7 @@ fi
 step_msg "looking for build programs"
 
 probe_need CFG_PERL        perl
-probe_need CFG_CURL        curl
+probe      CFG_CURL        curl
 probe_need CFG_PYTHON      python2.7 python2.6 python2 python
 
 python_version=$($CFG_PYTHON -V 2>&1)
@@ -382,8 +382,10 @@ else
     probe_need CFG_GIT     git
 fi
 
-probe CFG_CLANG            clang++
-probe CFG_GCC              gcc
+# CFG_CLANG and CFG_GCC will be from the same compiler suite now, but we
+# don't care because we're forcing a particular compiler anyway.
+probe CFG_CLANG            $CXX
+probe CFG_GCC              $CC
 probe CFG_LD               ld
 probe CFG_LLVM_CONFIG      llvm-config
 probe CFG_VALGRIND         valgrind
@@ -494,7 +496,7 @@ then
     LLVM_VERSION=$($LLVM_CONFIG --version)
 
     case $LLVM_VERSION in
-	(3.1svn|3.1|3.0svn|3.0)
+	(3.?svn|3.?)
 	    msg "found ok version of LLVM: $LLVM_VERSION"
 	    ;;
 	(*)
@@ -516,7 +518,7 @@ then
                       | cut -d ' ' -f 2)
 
     case $CFG_CLANG_VERSION in
-        (3.0svn | 3.0 | 3.1 | 4.0 | 4.1)
+        (3.0svn | 3.? | 4.?)
         step_msg "found ok version of CLANG: $CFG_CLANG_VERSION"
         CFG_C_COMPILER="clang"
         ;;
@@ -727,20 +729,11 @@ do
                    --enable-bindings=none --disable-threads \
                    --disable-pthreads"
 
-        if [ "$CFG_C_COMPILER" = "clang" ]
-        then
-            LLVM_CXX_32="clang++ -m32"
-            LLVM_CC_32="clang -m32"
-
-            LLVM_CXX_64="clang++"
-            LLVM_CC_64="clang"
-        else
-            LLVM_CXX_32="g++ -m32"
-            LLVM_CC_32="gcc -m32"
+        LLVM_CXX_32="$CXX -m32"
+        LLVM_CC_32="$CC -m32"
 
-            LLVM_CXX_64="g++"
-            LLVM_CC_64="gcc"
-        fi
+        LLVM_CXX_64="$CXX"
+        LLVM_CC_64="$CC"
 
         LLVM_CFLAGS_32="-m32"
         LLVM_CXXFLAGS_32="-m32"
