Index: configure
===================================================================
--- configure	(revision 12596)
+++ configure	(working copy)
@@ -1561,6 +1561,9 @@
 if sh ./tryassemble cfi.S; then
   echo "#define ASM_CFI_SUPPORTED" >> m.h
   asm_cfi_supported=true
+  echo "assembler supports CFI"
+else
+  echo "assembler does not support CFI"
 fi
 
 # Final twiddling of compiler options to work around known bugs
Index: asmcomp/emitaux.ml
===================================================================
--- asmcomp/emitaux.ml	(revision 12596)
+++ asmcomp/emitaux.ml	(working copy)
@@ -132,7 +132,7 @@
    display .loc for every instruction. *)
 let emit_debug_info dbg =
   if !Clflags.debug && not (Debuginfo.is_none dbg) then (
-    let line = dbg.Debuginfo.dinfo_line in
+    let line = max 1 dbg.Debuginfo.dinfo_line in (* clang wants line >= 1 *)
     let file_name = dbg.Debuginfo.dinfo_file in
     let file_num =
       try List.assoc file_name !file_pos_nums
