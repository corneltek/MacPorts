# $Id: Portfile,v 1.1 2003/11/29 21:48:38 matt Exp $

PortSystem 1.0
name			bluefish
version			0.12
categories		editors www
platforms		darwin
maintainers		matt@opendarwin.org
homepage		http://bluefish.openoffice.nl/
description		A powerful editor for web designers

long_description	Bluefish is a powerful editor for experienced web designers and \
			programmers. Bluefish supports many programming and markup languages \
			but it focuses on editing dynamic and interactive websites.

master_sites		ftp://ftp.ratisbona.com/pub/${name}/downloads/ \
			http://pkedu.fbt.eitn.wau.nl/~olivier/downloads/ \
			ftp://${name}.advancecreations.com/${name}/downloads/ \
			http://${name}.mrball.net/downloads/ \
			http://${name}.shellhung.org/downloads/
			
checksums		md5 9b01162747c7be6e2fc46475544bf995
use_bzip2		yes

depends_lib		lib:libgtk.2:gtk2 \
			lib:libpcre:pcre

configure.env		LDFLAGS="-L${prefix}/lib -L${x11prefix}/lib" \
                	CFLAGS="-I${prefix}/include" CPPFLAGS="-I${prefix}/include \
		        -I${x11prefix}/include -no-cpp-precomp" \

configure.args		--mandir=${prefix}/share/man \
			--infodir=${prefix}/share/info \
			--sysconfdir=${prefix}/etc \
			--with-icon-path=${prefix}/share/pixmaps \
			--without-PACKAGE

post-configure {	reinplace "s|/opt/local/share/pixmaps|${destroot}${prefix}/share/pixmaps|g" ${worksrcpath}/Makefile
			reinplace "s|/opt/local|${destroot}${prefix}|g" ${worksrcpath}/Makefile ${worksrcpath}/data/Makefile
			reinplace "s|/usr/share/gnome/apps|${destroot}${prefix}/share/gnome/apps|" ${worksrcpath}/data/Makefile
			reinplace "s|/usr/share/applications|${destroot}${prefix}/share/applications|" ${worksrcpath}/data/Makefile
			reinplace "s|prefix = /opt/local|prefix = ${destroot}${prefix}|" ${worksrcpath}/src/Makefile
			reinplace "s|/man/man1|/share/man/man1|" ${worksrcpath}/src/Makefile
			}

destroot.destdir        prefix=${destroot}${prefix} \
                        mandir=${destroot}${prefix}/share/man

pre-destroot {		system "install -d -o root -m 755 '${destroot}${prefix}/share/pixmaps'"
			system "install -d -o root -m 755 '${destroot}${prefix}/share/gnome/apps'"
			system "install -d -o root -m 755 '${destroot}${prefix}/share/applications'"
			}

destroot {		system "install -c -o root -m 644 '${worksrcpath}/debian/bluefish.1' '${destroot}${prefix}/share/man/man1'"
			}

