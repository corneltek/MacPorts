# $Id: Portfile,v 1.6 2004/01/01 09:45:52 jkh Exp $

PortSystem 1.0
name		xemacs
version		21.5.16
categories	editors
maintainers	jkh@opendarwin.org
description	The XEmacs editor, based on GNU Emacs
long_description	GNU Emacs is a self-documenting, customizable, extensible real-time display editor. \
			Users new to Emacs will be able to use basic features fairly rapidly \
			by studying the tutorial and using the self-documentation features. \
			Emacs also has an extensive interactive manual browser.  It is easily \
			extensible since its editing commands are written in Lisp.  XEmacs adds many extensions to GNU Emacs to take particilar advantage of the X Window System.
platforms	darwin
master_sites	http://ftp.xemacs.org/xemacs-21.5/
configure.post_args	--pdump
checksums	${name}-${version}.tar.gz md5 09f532e91cda52d9a4e9239c8909e631
destroot.args	prefix=${destroot}/${prefix}

# Warning: This is highly version dependent.  If you update the version
# of this port, you will almost certainly have to adjust the values below.
variant sumo {
	distfiles-append xemacs-sumo-2003-11-13.tar.gz
	master_sites-append http://ftp.xemacs.org/packages/
	checksums-append xemacs-sumo-2003-11-13.tar.gz md5 7b38d7829cbd1588d2a64dc072ec394e
	post-destroot {
		ui_info "Installing sumo distribution into destroot"
		system "tar -cpf - -C ${worksrcpath}/../xemacs-packages etc info lisp | tar -xpf - -C ${destroot}${prefix}/lib/${name}-21.5-b16"
		file mkdir ${destroot}${prefix}/share/doc/${name}
		system "tar -cpf - -C ${worksrcpath}/../xemacs-packages/man . | tar -xpf - -C ${destroot}${prefix}/share/doc/${name}"
	}
}
