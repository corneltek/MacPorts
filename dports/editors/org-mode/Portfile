# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           elisp 1.0

name                org-mode
version             7.9.4
categories          editors
license             GPL-3+
maintainers         dports
platforms           darwin
supported_archs     noarch

description         an Emacs Mode for Notes, Project Planning, and Authoring
long_description    Org is a mode for keeping notes, maintaining TODO lists, \
                    and doing project planning with a fast and effective     \
                    plain-text system.

homepage            http://orgmode.org/
master_sites        ${homepage}
distname            org-${version}

checksums           rmd160  a3c65d8d83de882b41d77c499a9ecf0b80bf3cc3 \
                    sha256  2a1b2b9cf5a9c3606aede007d05d5ee978b42d88cfeaaf28f45ae11c21f81848

depends_lib         path:${emacs_binary}:${emacs_binary_provider}
depends_build       port:texinfo


configure {
    system -W ${worksrcpath} "make local.mk"
    reinplace "s|EMACS	= emacs|EMACS	= ${emacs_binary}|g" ${worksrcpath}/local.mk
}

destroot.destdir    prefix=${destroot}${prefix}/share
destroot.target     install-lisp install-info

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     {Stable version <b>([\w.]+)</b>}
