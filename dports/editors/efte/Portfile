# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           cmake 1.0

name                efte
version             0.96
revision            4
categories          editors
platforms           darwin
maintainers         reiffert openmaintainer
description         configurable programmers editor
long_description    eFTE is a lightweight, extendable, folding text editor \
                    geared toward the programmer. eFTE is a fork of FTE with goals of \
                    taking FTE to the next step, hence, Enhanced FTE.

homepage            http://efte.sourceforge.net
master_sites        sourceforge:project/efte/efte/${version}
use_bzip2           yes

checksums           rmd160  ad62ddd4e3dffab0bf9f44e9f5d365b54f5d34fe \
                    sha256  75241d23f7f6f34922153edef8e40470587653bd38bf161f34616e8717a1e4d2

depends_lib         port:ncurses

configure.args      -DUSE_GPM=OFF \
                    -DBUILD_CONSOLE=ON \
                    -DBUILD_X=OFF

variant x11 conflicts no_x11 {
    depends_lib-append      port:xorg-libice\
                            port:xorg-libsm \
                            port:xorg-libXext \
                            port:xorg-libX11 \
                            port:xpm

    configure.args-replace  -DBUILD_X=OFF -DBUILD_X=ON
}

# Legacy no_x11 variant to be removed after December 2014.
variant no_x11 conflicts x11 description {Legacy compatibility variant} {}

if {[variant_isset no_x11]} {
    default_variants -x11
} else {
    default_variants +x11
}

post-destroot {
    system -W "${destroot}${prefix}/share/efte"  "../../bin/cefte config/mymain.fte system.fterc"
}
