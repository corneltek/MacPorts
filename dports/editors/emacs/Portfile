# $Id: Portfile,v 1.21 2003/12/23 08:29:18 jkh Exp $

PortSystem 1.0
name		emacs
version		21.2
categories	editors
maintainers	jkh@opendarwin.org
description	The GNU Emacs text editor
long_description	GNU Emacs is a self-documenting, customizable, extensible real-time display editor. \
			Users new to Emacs will be able to use basic features fairly rapidly \
			by studying the tutorial and using the self-documentation features. \
			Emacs also has an extensive interactive manual browser.  It is easily \
			extensible since its editing commands are written in Lisp.
platforms	darwin freebsd
master_sites	ftp://ftp.gnu.org/pub/gnu/emacs/
checksums	md5 f4b58e5c2d923fc92495e0c2f167c5db
configure.args	--without-x
destroot.args	prefix=${destroot}/${prefix}

variant darwin {
	patchfiles	apple-patches ange-ftp.el.diff
	patch.pre_args	-p1
}

variant devel {
	version 21.3.50.1
	fetch.type	cvs
	cvs.root	:pserver:anoncvs@subversions.gnu.org:/cvsroot/emacs
	cvs.module	emacs
	worksrcdir	emacs
	build.target	bootstrap
	patchfiles-delete	apple-patches
}

variant x11 {
	configure.args --with-x --disable-carbon
}

# Overrides darwin
variant carbon requires devel {
	configure.args-append	--with-carbon --enable-carbon-app=${destroot}/Applications
	patchfiles-append mac.c.diff
}
