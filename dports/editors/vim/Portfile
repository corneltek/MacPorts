# $Id: Portfile,v 1.37 2003/07/11 17:23:31 mij Exp $

PortSystem 1.0
name			vim
set vim_patchlevel	21
version			6.2.$vim_patchlevel
categories		editors
maintainers		mij@opendarwin.org
description		Vi "workalike" with many additional features
homepage		http://www.vim.org/
platforms		darwin freebsd

long_description	Vim is a virtually compatible, extremely \
			enhanced version of the vi editor.

master_sites		ftp://ftp.vim.org/pub/vim/unix/  \
			ftp://ftp.is.co.za/applications/editors/vim/unix/  \
			ftp://ftp.prz.tu-berlin.de/pub/unix/editors/vim/unix/  \
			ftp://ftp.mirror.ac.uk/sites/ftp.vim.org/pub/vim/unix/

eval patch_sites	[strsed $master_sites g/unix/patches/]

dist_subdir		vim
distname		$portname-[strsed $portversion {s/\.[0-9]*$//}]
worksrcdir		vim62

use_bzip2		yes

configure.args		--enable-gui=no --without-x --disable-gpm

set vim_badpatches	"009 013 019"

eval patchfiles		[split [exec /usr/bin/jot -s " " -w \
			[strsed $portversion {s/\.[0-9]*$//}].%03d \
			$vim_patchlevel 1 $vim_patchlevel] " "]

foreach p ${vim_badpatches} {
			patchfiles-delete 6.2.${p}
}

variant x11		{ configure.args --enable-gui=auto --with-x }
variant tiny		{ configure.args-append	--with-features=tiny }
variant small		{ configure.args-append	--with-features=small }
variant big		{ configure.args-append	--with-features=big }
variant huge		{ configure.args-append	--with-features=huge }
variant multibyte	{ configure.args-append	--enable-multibyte }

include checksums
