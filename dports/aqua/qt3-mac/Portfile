# $Id: Portfile,v 1.6 2004/01/02 21:05:57 fkr Exp $

PortSystem 1.0
name		qt3-mac
version		3.2.1
revision	3
categories	aqua
maintainers	ranger@befunk.com, leimy@opendarwin.org
description	Qt Tool Kit (Native Aqua Version)
platforms	darwin
master_sites	ftp://ftp.trolltech.com/qt/source/
patchfiles	patch-02-notutorials.macx
distname	qt-mac-free-${portversion}
extract.suffix	.tar.bz2
use_bzip2	yes

set env(DYLD_LIBRARY_PATH) "${worksrcpath}/lib"

checksums qt-mac-free-${version}.tar.bz2 md5 18a1b0b4d60f888ad23fe1ed9594a8cc
configure.cmd "echo yes | ./configure"
configure.env QMAKESPEC='' QTDIR=''
configure.args	-prefix '${prefix}' -docdir '${prefix}/share/doc/${portname}/html' \
	-datadir '${prefix}/share/qt3' -headerdir '${prefix}/include/qt3' \
	-plugindir '${prefix}/lib/qt3-plugins' -release -shared -fast -thread \
	-stl -qt-gif -qt-imgfmt-png -qt-imgfmt-jpeg -qt-imgfmt-mng -system-zlib \
	-largefile '-I${prefix}/include' '-L${worksrcpath}/lib' '-L${prefix}/lib'
destroot.destdir INSTALL_ROOT='${destroot}'

long_description This is Qt, TrollTech's C++ toolkit for writing \
cross-platform GUI applications.

variant darwin	{
		patchfiles-append	patch-01-librarysearch.macx patch-03-libname.macx patch-06-qmake.macx
		post-destroot {
			system "sh ${portpath}/${filesdir}/fix_install_names.sh '${prefix}' '${destroot}'"
		}
}
