# $Id: Portfile,v 1.2 2004/03/01 03:08:31 rshaw Exp $
PortSystem 1.0

name			ZopeEditManager
version			0.9.3
categories		aqua zope www python
maintainers		rshaw@opendarwin.org
description		Zope Edit Manager for External Editing support on Mac OS X
long_description	${description}
platforms		darwin
homepage		http://zope.org/Members/urbanape/${name}/
master_sites	http://zope.org/Members/urbanape/${name}/${name}%20${version}
dist_subdir		zope/${name}
distname		${name}-src-${version}
distfiles		${name}-${version}-src${extract.suffix}
checksums		md5 1fbff1fe16d104a3f17de5ef8cbb30ca

# Use Python 2.3 from DarwinPorts explicitly 
set python		${prefix}/bin/python2.3
set pythonlib	${prefix}/lib/python2.3

# Depends on Python and Py-Objc
depends_build	path:${python}:python23
depends_run		path:${pythonlib}/site-packages/PyObjC:py-objc

use_configure	no

build.cmd		${python} buildapp.py
build.target	
build.args		--verbose \
				--python=${python} \
				--resource=ZopeEditController.py \
				--resource=ZopeDocument.py \
				--resource=PreferenceController.py \
				--builddir=${worksrcpath} build

destroot		{ set appPath ${destroot}/Applications/DarwinPorts
				  cd ${worksrcpath}
				  xinstall -d -m 0755 ${appPath}
				  system "ditto -v ${name}.app ${appPath}/${name}.app"
				  set docPath ${destroot}${prefix}/share/doc
				  xinstall -d -m 0755 ${docPath}
				  system "ditto -v Docs ${docPath}/${name}" }

