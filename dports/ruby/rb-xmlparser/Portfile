# $Id: Portfile,v 1.2 2004/03/01 03:07:50 rshaw Exp $
PortSystem 1.0

name			rb-xmlparser
version			0.6.5
categories		ruby
maintainers		rshaw@opendarwin.org
description		Ruby extension allowing use of James Clark's XML Parser (expat).
homepage		http://www.yoshidam.net/Ruby.html
platforms		darwin
master_sites	http://www.yoshidam.net/
dist_subdir		ruby
distname		xmlparser-${version}
worksrcdir		xmlparser
checksums		md5 ead5d1fd5f57b99a40445b66f1be1551

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby
depends_lib		lib:libexpat:expat

configure.cmd	${ruby} extconf.rb
configure.args	--with-expat-lib=${prefix}/lib \
				--with-expat-include=${prefix}/include
post-configure	{
	reinplace "s|^\\(RUBYCOMMONDIR.*\\)sitedir.*$|\\1rubylibdir)|" \
		${worksrcpath}/Makefile
	reinplace "s|^\\(RUBYLIBDIR.*\\)sitelibdir|\\1rubylibdir|" \
		${worksrcpath}/Makefile
	reinplace "s|^\\(RUBYARCHDIR.*\\)sitearchdir|\\1archdir|" \
		${worksrcpath}/Makefile
}

destroot.args	RUBY=${ruby}

