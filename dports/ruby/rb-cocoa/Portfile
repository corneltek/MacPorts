# $Id: Portfile,v 1.2 2004/01/19 03:29:04 rshaw Exp $
PortSystem 1.0

name			rb-cocoa
version			0.4.0
categories		ruby
maintainers		rshaw@opendarwin.org
description		Ruby bindings for writing cocoa programs
long_description	RubyCocoa is a Ruby library for using Cocoa Objects \
					on Mac OS X in Ruby scripts. You can use RubyCocoa \
					to work with Cocoa objects in Ruby scripts, write \
					Cocoa applications with Ruby and Interface Builder, \
					develop small scale simple Cocoa applications and \
					such.
homepage		http://www.imasy.or.jp/~hisa/mac/rubycocoa/
platforms		darwin
master_sites	http://www.imasy.or.jp/~hisa/mac/rubyosx/files/
dist_subdir		ruby
distname		rubycocoa-${version}
extract.suffix	.tgz
checksums		md5 0582ec18473d9903fa0092a11f5d283a
patchfiles		patch-rb_NSGraphics.m \
				patch-rb_NSSavePanel.m

set ruby	${prefix}/bin/ruby
depends_build	bin:${ruby}:ruby

post-patch		{
	set xcodebuild "xcodebuild"
	if {[catch {set xcodebuild [binaryInPath $xcodebuild]}] == 0} {
		reinplace "s%pbxbuild%${xcodebuild}%" ${worksrcpath}/install.rb
	}
}

configure.cmd		${ruby} install.rb
configure.pre_args	config
configure.args		--install-prefix=${destroot}${prefix} \
					--install-root=${destroot}

build.cmd			${ruby} install.rb
build.target		setup

destroot.cmd		${ruby} install.rb 
destroot.destdir

