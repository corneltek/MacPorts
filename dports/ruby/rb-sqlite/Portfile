# $Id: Portfile,v 1.4 2004/03/01 03:07:49 rshaw Exp $
PortSystem 1.0

name			rb-sqlite
version			1.0
revision		1
categories		ruby
maintainers		rshaw@opendarwin.org
description		Interface to the SQLite DB engine from Ruby
long_description	Provides an interface for the SQLite DB engine. This \
					differs from the 'ruby-sqlite' project (also on RAA) \
					in that it is more complete, and from the ruby DBI \
					version of SQLite in that it is SQLite specific, so \
					you can do things that would otherwise be more \
					difficult via DBI. If you want portability between \
					backends, use DBI. If you want ease of use with \
					SQLite, use this.
homepage		http://sqlite-ruby.sf.net/
platforms		darwin
master_sites	sourceforge:sqlite-ruby
dist_subdir		ruby
distname		sqlite-ruby-${version}
worksrcdir		sqlite
checksums		md5 cc22e5ce8b3ddcb3de27eb4d7eaa23bc

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby
depends_lib		lib:libsqlite:sqlite

configure.cmd	${ruby} extconf.rb
configure.pre_args
post-configure	{ cd ${worksrcpath}
				  reinplace "s|^\\(RUBYCOMMONDIR.*\\)sitedir.*$|\\1rubylibdir)|" Makefile
				  reinplace "s|^\\(RUBYLIBDIR.*\\)sitelibdir|\\1rubylibdir|" Makefile
				  reinplace "s|^\\(RUBYARCHDIR.*\\)sitearchdir|\\1archdir|" Makefile }

build.target

test.run		yes
test			{ cd ${worksrcpath}
				  system "${ruby} samples/define_db.rb"
				  system "${ruby} samples/queries.rb"
				  system "${ruby} samples/advanced.rb" }

