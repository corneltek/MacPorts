# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           cmake 1.0

name                mysql-connector-cpp
set name_package    mysql-connector-c++
version             1.1.0
set branch          [join [lrange [split ${version} .] 0 1] .]
categories          databases
platforms           darwin
maintainers         pixilla
license             GPL-2
description         The MySQL Connector/C++
long_description    Standardized MySQL database driver for C++ development.

set mirror_dir      Downloads/Connector-C++
homepage            http://www.mysql.com/products/connector/
master_sites        http://mysql.mirrors.pair.com/${mirror_dir} \
                    http://mysql.he.net/${mirror_dir} \
                    http://mirrors.sunsite.dk/mysql/${mirror_dir} \
                    http://sunsite.informatik.rwth-aachen.de/mysql/${mirror_dir} \
                    http://ftp.plusline.de/mysql/${mirror_dir}

distname            ${name_package}-${version}
checksums           rmd160  f98bf0a4c987f49054da62e1e86197049b03250a \
                    sha256  dfb8933dada706a1b3188b162fc5a9686b5ed46323bf09548ce291e8dd4545e2

depends_build-append \
                    port:boost
depends_lib-append \
                    port:mysql5

configure.args-append \
                    -DMYSQL_CONFIG_EXECUTABLE:FILEPATH=${prefix}/bin/mysql_config5 \
                    -DMYSQLCPPCONN_BUILD_EXAMPLES:BOOL=1

post-destroot {
    xinstall -d ${destroot}${prefix}/share/${name_package}
    eval move [glob -type f ${destroot}${prefix}/*] \
        ${destroot}${prefix}/share/${name_package}
    copy ${worksrcpath}/examples \
        ${destroot}${prefix}/share/${name_package}/
}

livecheck.type      regex
livecheck.url       [lindex ${master_sites} 0]
livecheck.regex     "\"mysql-connector-c\\+\\+-(\\d\[\\d\\.\]*)\\${extract.suffix}\""
