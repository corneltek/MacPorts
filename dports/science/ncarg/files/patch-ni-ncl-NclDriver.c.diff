--- ni/src/ncl/NclDriver.c.orig	2014-04-01 11:23:16.000000000 +0900
+++ ni/src/ncl/NclDriver.c	2014-08-20 13:45:56.000000000 +0900
@@ -62,11 +62,13 @@
     yydebug = 1;
 #endif /* YYDEBUG */
 
+#ifdef _OPENMP
     /* make sure that only one OMP thread runs unless OMP_NUM_THREADS is explicitly defined  -- on Darwin at least the default is not a single thread */
 
     if (! getenv("OMP_NUM_THREADS")) {
 	    omp_set_num_threads(1);
     }
+#endif
 
     strcpy(buffer,(char *)GetNCARGPath("tmp"));
     sr = access(buffer,W_OK|X_OK|F_OK);
