# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                xraylib
version             2.16.0
categories          science
platforms           darwin
maintainers         me.com:Tom.Schoonjans

description         A library for X-ray matter interaction cross sections

long_description    ${name} provides an API with over 50 functions designed \
                    to provide convenient access to databases with cross \
                    sections (photoelectric, Compton, Rayleigh, XRF etc.), \
                    line energies, edge energies, fluorescence yields, \
                    scattering factors, refractive indices, Compton profiles \
                    etc. Bindings exist for Perl, Python, Java, Fortran, IDL, \
                    Lua and .NET.

homepage            http://github.com/tschoonj/xraylib
master_sites        https://github.com/tschoonj/xraylib/downloads/

checksums           rmd160  3b9a0db5fe2ae285cd364478c9e8c3d76e855069 \
                    sha256 91ccbd25338c00027d58ee13239375926a0e106d9b883d1c927e846e035e276c 

configure.args      --disable-idl \
                    --disable-fortran2003 \
                    --disable-perl \
                    --disable-python \
                    --disable-java \
                    --disable-lua

# to be fixed in later versions of xraylib...
use_parallel_build  no
configure.ccache    no

variant perl description {Perl bindings} {
    configure.args-append --enable-perl
    configure.args-delete --disable-perl
    depends_build-append port:swig-perl
}

variant python description {Python bindings} {
    configure.args-append --enable-python --enable-python-integration
    configure.args-delete --disable-python
    depends_build-append port:swig-python
}

variant java description {Java bindings} {
    configure.args-append --enable-java
    configure.args-delete --disable-java
    depends_build-append port:swig-java
}

variant lua description (Lua bindings) {
    configure.args-append --enable-lua
    configure.args-delete --disable-lua
    depends_build-append port:swig-lua
    depends_lib-append port:lua
}

variant gcc44 description {build with gfortran from gcc44} conflicts gcc45 g95 gcc46 gcc47 {
    configure.args-append --enable-fortran2003
    configure.args-delete --disable-fortran2003
    depends_lib-append port:gcc44
    configure.fc ${prefix}/bin/gfortran-mp-4.4
}

variant gcc45 description {build with gfortran from gcc45} conflicts gcc44 g95 gcc46 gcc47 {
    configure.args-append --enable-fortran2003
    configure.args-delete --disable-fortran2003
    depends_lib-append port:gcc45
    configure.fc ${prefix}/bin/gfortran-mp-4.5
}

variant g95 description {build with g95} conflicts gcc44 gcc45 gcc46 gcc47 {
    configure.args-append --enable-fortran2003
    configure.args-delete --disable-fortran2003
    depends_lib-append port:g95
    configure.fc ${prefix}/bin/g95
}

variant gcc46 description {build with gfortran from gcc46} conflicts gcc44 g95 gcc45 gcc47 {
    configure.args-append --enable-fortran2003
    configure.args-delete --disable-fortran2003
    depends_lib-append port:gcc46
    configure.fc ${prefix}/bin/gfortran-mp-4.6
}

variant gcc47 description {build with gfortran from gcc47} conflicts gcc44 g95 gcc45 gcc46 {
    configure.args-append --enable-fortran2003
    configure.args-delete --disable-fortran2003
    depends_lib-append port:gcc47
    configure.fc ${prefix}/bin/gfortran-mp-4.7
}

default_variants    +python
