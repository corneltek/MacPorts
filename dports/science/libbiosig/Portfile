# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           cmake 1.0

name                libbiosig
version             1.5.10
categories          science
platforms           darwin
license             GPL-3
maintainers         gmx.de:christsc
description         I/O library for biomedical data
long_description    BioSig is a library for accessing files in several \
                    biomedical data formats (including EDF, BDF, GDF, \
                    BrainVision, BCI2000, CFWB, HL7aECG, SCP_ECG (EN1064), \
                    MFER, ACQ, CNT(Neuroscan), DEMG, EGI, EEG1100, FAMOS, \
                    SigmaPLpro, TMS32)
homepage            http://biosig.sourceforge.net/index.html
master_sites        sourceforge:biosig
master_sites.mirror_subdir \
                    /BioSig%20for%20C_C++/src
patch_sites         http://www.stimfit.org/
distname            biosig4c++-${version}.src
patchfiles          biosig-macports.patch
worksrcdir          biosig4c++-${version}
checksums           ${distname}${extract.suffix} \
                        rmd160  2cd5b3c431fe8bd2cc3128fee3c378097f25fcd0 \
                        sha256  53472928c0ae409de6b4e9a6006f33f3bcdfb72462b1661bf8f42a7eef98877c \
                    biosig-macports.patch \
                        rmd160  b0ee44bc532a001b2cece62ed0cef3d0d0c81f3e \
                        sha256  d8cd7befe06d16e66e5979e5ea947a18d7737005a4a9477599b9816b3ce68435

depends_build-append \
                    port:gawk
depends_lib         port:SuiteSparse \
                    port:zlib

# SuiteSparse support is off until the patch gets released
configure.args      -DUSE_SUITESPARSE=ON \
                    -DUSE_ZLIB=ON \
                    -DCMAKE_C_FLAGS=-DMACPORTS \
                    -DCMAKE_CXX_FLAGS=-DMACPORTS
configure.ldflags-append \
                    -lz -lcholmod
