# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               github 1.0
PortGroup               python 1.0

github.setup            Cantera cantera 2.1.2 v
categories              science
platforms               darwin
maintainers             thomasfiala.de:macports openmaintainer
license                 BSD

description             Cantera software package
long_description        Cantera is a suite of object-oriented software tools for \
                        problems involving chemical kinetics, thermodynamics, \
                        and/or transport processes. \
                        Fortran support is disabled by install using MacPorts

homepage                https://cantera.github.io/docs/sphinx/html/index.html
github.tarball_from     releases

checksums               rmd160  39cded4062438402580dc0dd88b6385fac55efe3 \
                        sha256  910ef1cff2be7b618abb3eb4a24636b2acd35419935790932489f7216a54a57b

depends_lib-append      port:py${python.version}-numpy \
                        port:py${python.version}-cython

depends_build-append    port:scons

python.versions         27

use_configure           no

build.cmd               ${prefix}/bin/scons install
build.target
build.args              prefix=${prefix} \
                        CC=${configure.cc} \
                        CXX=${configure.cxx} \
                        f90_interface=n \
                        python_prefix=${python.prefix} \
                        stage_dir=${destroot}

destroot {
    eval move [glob ${destroot}${prefix}/man/man1/*] ${destroot}${prefix}/share/man/man1/
}

notes "
Cantera C++ demos are installed in:
${prefix}/share/cantera/samples
Cantera python demos are installed in:
${python.pkgd}/cantera/examples
Cantera data files are installed in:
${prefix}/share/cantera/data

Try the following in python to find the equilibrium composition
of a stoichiometric methane/air mixture at 1000 K and 1 atm:
>>> import cantera as ct
>>> g = ct.Solution('gri30.xml')
>>> g.TPX = 1000, ct.one_atm, 'CH4:1, O2:2, N2:8'
>>> g.equilibrate('TP')
>>> g()

Don't forget to set the appropriate python interpreter using
sudo port select python
"

variant sundials description {Build with sundials support (default)} {
    depends_lib-append      port:sundials

    build.args-append       use_sundials=y \
                            sundials_include=${prefix}/include \
                            sundials_libdir=${prefix}/lib
}

variant old_python description {Install old Python interface} {
    build.args-append   python_package='full'
}

default_variants    +sundials
