# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                sparskit
version             2
categories          science
platforms           darwin
maintainers         gmail.com:dstrubbe
license             LGPL-2.1+

description         A basic tool-kit for sparse matrix computations

long_description    A basic tool-kit for sparse matrix computations: programs \
                    for converting data structures, printing simple \
                    statistics on a matrix, plotting a matrix profile, \
                    performing basic linear algebra operations with sparse \
                    matrices and so on.

homepage            http://www-users.cs.umn.edu/~saad/software/SPARSKIT
master_sites        ${homepage}
distname            SPARSKIT${version}

checksums           rmd160  95554593896300d7823f40956a428e8e7c57bb78 \
                    sha1    702bb646024f62fafbd827aa29d4f8994a74b90a

use_configure       no

pre-build {
    build.args      F77=${configure.f90} OPT="-c -O3"
}

use_parallel_build  yes

destroot {
    xinstall ${worksrcpath}/libskit.a ${destroot}${prefix}/lib/
}

variant gcc46 conflicts gcc47 description {Build with GCC 4.6} {
    configure.compiler  macports-gcc-4.6
}

variant gcc47 conflicts gcc46 description {Build with GCC 4.7} {
    configure.compiler  macports-gcc-4.7
}

if {![variant_isset gcc46]} {
    default_variants    +gcc47
}

livecheck.type      regex
livecheck.url       [lindex ${master_sites} 0]
livecheck.regex     SPARSKIT(\[0-9.\]+)${extract.suffix}
