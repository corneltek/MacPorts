Index: /trunk/SOURCE_TOOLS/arb_compiler_version.pl
===================================================================
--- SOURCE_TOOLS/arb_compiler_version.pl (revision 12310)
+++ SOURCE_TOOLS/arb_compiler_version.pl (revision 12604)
@@ -38,4 +38,20 @@
     if ($detectedCompiler eq 'unknown') {
       if ($detailedVersion =~ /apple.*llvm.*clang/oi) { $detectedCompiler = 'clang'; }
+      else {
+        # check for clang according to #582
+        my $cmd = "$compiler -dM -E -x c /dev/null";
+        if (open(CMD,$cmd.'|')) { 
+        LINE: foreach (<CMD>) {
+            if (/__clang__/) {
+              $detectedCompiler = 'clang';
+              last LINE;
+            }
+          }
+          close(CMD);
+        }
+        else {
+          print STDERR "failed to execute '$cmd'";
+        }
+      }
     }
 