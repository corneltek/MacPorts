# $Id: Portfile,v 1.1 2004/01/16 11:22:33 toby Exp $

PortSystem       1.0
name             xephem
version          3.5.2
categories       science
maintainers      toby@opendarwin.org
description      interactive astronomical ephemeris program
long_description \
    Xephem is an interactive astronomical ephemeris program for X Windows \
    systems. It computes heliocentric, geocentric and topocentric \
    information for fixed celestial objects and objects in heliocentric \
    and geocentric orbits\; has built-in support for all planet positions\; \
    the moons of Jupiter, Saturn and Earth\; Mars' and Jupiter's central \
    meridian longitude\; Saturn's rings\; and Jupiter's Great Red Spot
homepage         http://www.clearskyinstitute.com/xephem/
platforms        darwin
master_sites     http://www.clearskyinstitute.com/cgi-bin/download/
checksums        md5 5820b51667531743d0db0e7f712a9fae
depends_lib      lib:libXm:lesstif
worksrcdir       ${distname}/GUI/xephem
use_xmkmf        yes
build.target

pre-configure {
    cd ${worksrcpath}/../../libastro
    system "make"
    cd ${worksrcpath}/../../libip
    system "make"
}

destroot.destdir-append BINDIR=${prefix}/bin INSTALLFLAGS= \
    DOCHTMLDIR=${prefix}/share/doc MANDIR=${prefix}/share/man/man1
destroot.target-append  install.man

post-destroot {
    set share ${prefix}/share/xephem
    set appdefaults /usr/X11R6/lib/X11/app-defaults

    file mkdir ${destroot}${share}
    file copy \
        ${worksrcpath}/auxil \
        ${worksrcpath}/catalogs \
        ${worksrcpath}/fifos \
        ${worksrcpath}/fits \
        ${destroot}${share}

    file mkdir ${destroot}${appdefaults}
    system "echo XEphem.ShareDir: ${share} > ${destroot}${appdefaults}/XEphem"
}
