# $Id: Portfile,v 1.2 2003/08/05 09:29:30 jkh Exp $

PortSystem 1.0

name                rasmol
version             2.7.1.1
description         Molecular graphics visualisation tool
categories          science graphics
maintainers         michaelm@opendarwin.org
distname            RasMol_${version}
master_sites        http://www.bernstein-plus-sons.com/software/
checksums           md5 0d5c99eeda079d8cbf413944d284740b 
depends_lib         lib:libX11.6:XFree86
patchfiles          patch-lmakefile.diff
pre-patch           { reinplace "s|@PREFIX@|${prefix}|g" ${portpath}/${filedir}/patch-lmakefile.diff  }
worksrcdir          RasMol_${version}/src
configure.cmd       xmkmf
configure.pre_args
build.target        rasmol
destroot             { cd ${workpath}/${distname}
                     file mkdir ${destroot}${prefix}/man/man1
                     system "gunzip doc/rasmol.1"
                     system "gunzip doc/manualA4.pdf"
                     system "gunzip doc/manualUS.pdf"
                     system "gunzip doc/refcardA4.pdf"
                     system "cp doc/rasmol.1 ${destroot}${prefix}/man/man1"
                     file mkdir ${destroot}${prefix}/bin
                     system "cp src/rasmol ${destroot}${prefix}/bin"
                     file mkdir ${destroot}${prefix}/lib/rasmol
                     system "cp doc/rasmol.hlp ${destroot}${prefix}/lib/rasmol"
                     system "cp -r data  ${destroot}${prefix}/lib/rasmol"
 }
 
variant             darwin { depends_lib-append   lib:libdl.1:dlcompat }



long_description \
RasMol is a molecular graphics program  intended  for  the \
visualisation  of  proteins,  nucleic  acids  and  small \
molecules.  The program is aimed at display, teaching  and \
generation of publication quality images. 
