# $Id: Portfile,v 1.3 2003/12/10 19:30:36 rshaw Exp $

PortSystem 1.0

name		py-pil
version		1.1.4
categories	python graphics
maintainers	rshaw@opendarwin.org
description	Python Imaging Library
long_description	The Python Imaging Library (PIL) adds image processing \
		capabilities to your Python interpreter. This library supports \
		many file formats, and provides powerful image processing and \
		graphics capabilities. 
platforms	darwin freebsd
homepage	http://www.pythonware.com/
master_sites	http://effbot.org/downloads/
distname	Imaging-${version}
checksums	md5 d2c03c25a9a0128832137dd536da88da
patchfiles	patch-Makefile.in \
		patch-setup.py \
		patch-Image.py

depends_lib	bin:python:python \
		lib:libjpeg:jpeg

post-patch	{
	reinplace s,@prefix@,${prefix},g ${worksrcpath}/setup.py
}

configure.dir	${worksrcpath}/libImaging
configure.env   CFLAGS="-I${prefix}/include" \
                LDFLAGS="-L${prefix}/lib"

build.dir	${configure.dir}
post-build	{
	system	"cd ${worksrcpath} && python setup.py build"
}

destroot.dir	${worksrcpath}
destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}
post-destroot	{
	file mkdir ${destroot}${prefix}/share/doc
	file copy ${worksrcpath}/Doc ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/BUILDME ${worksrcpath}/CHANGES-114 \
		${worksrcpath}/CONTENTS ${worksrcpath}/README \
		${destroot}${prefix}/share/doc/${name}
}
