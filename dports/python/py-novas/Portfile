# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               python 1.0

name                    py-novas
version                 3.1.1.1
categories-append       science
platforms               darwin
maintainers             aronnax
description             Naval Observatory Vector Astrometry Software, \
                        Python Edition
long_description \
  Python ctypes wrapper for Naval Observatory Vector Astrometry Software \
  (NOVAS).  Provides extremely accurate astrometric coordinate conversions \
  and position of solar system objects.
license                 public-domain

homepage                https://pypi.python.org/pypi/novas/
master_sites            https://pypi.python.org/packages/source/n/novas/
distname                novas-${version}
checksums               md5     08a0a55fc2871b3ba92719f625abfb51

python.versions         26 27 32 33

livecheck.url           https://pypi.python.org/packages/source/n/novas/
livecheck.regex         novas-((\[0-9\]+)(\.\[0-9\]+)\*)[quotemeta ${extract.suffix}]

if {${name} != ${subport}} {

    livecheck.type      none

    # This port replaces py-novas_py. If py${python.version}-novas_py is active,
    # then deactivate it.
    pre-activate {
        if {[file exists ${python.pkgd}/novas/__init__.py]
            && ![catch {set vers [lindex [registry_active py${python.version}-novas_py] 0]}]
            } {
            registry_deactivate_composite py${python.version}-novas_py "" [list ports_nodepcheck 1]
        }
    }

}
