# $Id: Portfile,v 1.1 2003/12/21 00:23:17 mww Exp $

PortSystem 1.0

name		py-ldap
version		2.0.0pre18
categories	python
platforms	darwin
maintainers	mww@opendarwin.org
description	object-oriented api for python to access LDAP directory servers
long_description	python-ldap provides an object-oriented API to access \
			LDAP directory servers from Python programs. Mainly it \
			wraps the OpenLDAP 2.x libs for that purpose. \
			Additionally the package contains modules for other \
			LDAP-related stuff (e.g. processing LDIF, LDAPURLs, \
			LDAPv3 schema, etc.).

homepage	http://python-ldap.sourceforge.net/
master_sites	sourceforge:python-ldap
distname	python-ldap-${version}
checksums	md5 3df0aa4135417ea71138afd25d0114f9
patchfiles	patch-setup.cfg.diff

depends_lib	bin:python:python

set include	"/usr/include"
set lib		"/usr/lib"
set config	"ldap lber"

configure	{
	reinplace "s|LIBDIR|${include}|g" ${worksrcpath}/setup.cfg
	reinplace "s|INCDIR|${lib}|g" ${worksrcpath}/setup.cfg
	reinplace "s|LIBS|${config}|g" ${worksrcpath}/setup.cfg
}

build.cmd	python setup.py
build.target	build

destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{
	file mkdir ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/CHANGES ${worksrcpath}/INSTALL \
		${worksrcpath}/LICENCE ${worksrcpath}/MANIFEST.in \
		${worksrcpath}/PKG-INFO ${worksrcpath}/README \
		${worksrcpath}/TODO ${destroot}${prefix}/share/doc/${name}
}
