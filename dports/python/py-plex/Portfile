# $Id: Portfile,v 1.3 2003/09/24 17:13:10 mww Exp $

PortSystem 1.0

name		py-plex
version		1.1.4.1
categories	devel
maintainers	mww@opendarwin.org
description	lexical analysis module for python
long_description	Plex is a Python module for constructing lexical \
		analysers, or scanners. Plex scanners have almost all the \
		capabilities of the scanners generated by GNU Flex, and are \
		specified in a very similar way. Tokens are defined by regular \
		expressions, and each token has an associated action, which \
		may be to return a literal value, or to call an arbitrary \
		function. 

homepage	http://www.cosc.canterbury.ac.nz/~greg/python/Plex/
master_sites	${homepage}
distname	Plex-${version}
checksums	md5 e6ec70ab691c465910a8c010586c7500
patchfiles	patch-setup.py.diff

depends_lib	bin:python:python

pre-patch	{ system "touch ${worksrcpath}/setup.py" }
configure	{ reinplace "s|PORTVERSION|${version}|g" \
			${worksrcpath}/setup.py }

build.cmd	python setup.py
build.target	build

destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{ system "cd ${worksrcpath} \
		&& install -m 755 -d \
			${destroot}${prefix}/share/doc/${name}/examples/ \
		&& cp -r examples/* \
			${destroot}${prefix}/share/doc/${name}/examples/ \
		&& cp -r README TODO doc/* \
			${destroot}${prefix}/share/doc/${name}/" }
