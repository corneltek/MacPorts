# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           python 1.0

name                py-logilab-common
version             0.58.2
license             LGPL-2.1+
maintainers         dh stromnov openmaintainer
description         A number of modules used by various projects from Logilab
long_description    ${description}

platforms           darwin

homepage            http://www.logilab.org/project/logilab-common
master_sites        http://download.logilab.org/pub/common/ \
                    ftp://ftp.logilab.fr/pub/common
distname            logilab-common-${version}

checksums           md5     a745888475d988300a76b0c87a5f4381 \
                    sha1    a1df7965bb9382f56047e616e420f49d6181a0b2 \
                    rmd160  041cc7a66beba31410435699809d3867e50fb8eb

python.versions 24 25 26 27

if {$subport != $name} {
    post-destroot {
        xinstall -m 755 -d ${destroot}${prefix}/share/doc/${subport}
        xinstall -m 644 -W ${worksrcpath} ChangeLog README \
        ${destroot}${prefix}/share/doc/${subport}

        # Python 2.4 installs pytest in ${prefix}/bin while newer
        # Pythons install it into ${python.prefix}/bin.
        if {$subport == "py24-logilab-common"} {
            move ${destroot}${prefix}/bin/pytest \
                ${destroot}${prefix}/bin/pytest-${python.branch}
        } else {
            move ${destroot}${python.prefix}/bin/pytest \
                ${destroot}${python.prefix}/bin/pytest-${python.branch}
            ln -sf ${python.prefix}/bin/pytest-${python.branch} \
                ${destroot}${prefix}/bin/pytest-${python.branch}
        }
    }
    
    livecheck.type  none
} else {
    livecheck.type      regex
    livecheck.url       http://ftp.logilab.org/pub/common/
    livecheck.regex     {logilab-common-(\d+(?:\.\d+)*)\.tar\.gz}
}
