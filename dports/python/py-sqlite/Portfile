# $Id: Portfile,v 1.2 2003/11/16 19:07:01 mww Exp $

PortSystem 1.0

name		py-sqlite
version		0.4.3
categories	python databases
maintainers	mww@opendarwin.org
description	python database extension for sqlite
long_description	PySQLite is a Python extension for SQLite that \
			conforms to the Python Database API Specification 2.0.

homepage	http://pysqlite.sourceforge.net/
master_sites	sourceforge:pysqlite
distname	pysqlite-${version}
checksums	md5 a55ae9b6f1968a5fe0df10731a5b5a7c

depends_lib	lib:libsqlite.a:sqlite \
		bin:python:python

configure	{
	reinplace "s|/usr/local|${prefix}|g" ${worksrcpath}/setup.py
}

build.env	LDFLAGS="-L${prefix}/lib"
build.cmd	${prefix}/bin/python setup.py
build.target	build

pre-destroot	{
	file copy ${portpath}/files/setup.cfg ${worksrcpath}
	reinplace "s|DESTROOT|${destroot}${prefix}|g" ${worksrcpath}/setup.cfg
}
destroot.cmd	${prefix}/bin/python setup.py
destroot.destdir
set doc		${destroot}${prefix}/share/doc/${name}
post-destroot	{
	file mkdir ${doc}/examples
	file copy ${worksrcpath}/README ${worksrcpath}/LICENSE ${doc}
	file copy ${worksrcpath}/examples/xmlimport \
		${worksrcpath}/examples/species ${worksrcpath}/examples/README \
		${worksrcpath}/examples/calflora ${doc}/examples
}
