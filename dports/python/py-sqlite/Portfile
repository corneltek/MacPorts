# $Id: Portfile,v 1.1 2003/10/20 20:54:11 mww Exp $

PortSystem 1.0

name		py-sqlite
version		0.4.3
categories	python databases
maintainers	mww@opendarwin.org
description	python database extension for sqlite
long_description	PySQLite is a Python extension for SQLite that \
			conforms to the Python Database API Specification 2.0.

homepage	http://pysqlite.sourceforge.net/
master_sites	sourceforge:pysqlite
distname	pysqlite-${version}
checksums	md5 a55ae9b6f1968a5fe0df10731a5b5a7c

depends_lib	lib:libsqlite.a:sqlite \
		bin:python:python

configure	{ reinplace "s|/usr/local|${prefix}|g" ${worksrcpath}/setup.py }

build.cmd	python setup.py
build.target	build

post-build	{ system "echo \[install\] > ${worksrcpath}/setup.cfg \
			&& echo prefix=DESTROOT >> ${worksrcpath}/setup.cfg" }

pre-destroot	{ reinplace "s|DESTROOT|${destroot}${prefix}|g" \
		${worksrcpath}/setup.cfg }
destroot.cmd	python setup.py
destroot.destdir	{}
post-destroot	{ system "cd ${worksrcpath} \
		&& install -m 755 -d \
			${destroot}${prefix}/share/doc/${name}/examples \
		&& cp README LICENSE ${destroot}${prefix}/share/doc/${name} \
		&& cp -r examples/README examples/calflora examples/species \
			examples/xmlimport \
			${destroot}${prefix}/share/doc/${name}/examples" }

