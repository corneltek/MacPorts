# $Id: Portfile,v 1.4 2003/11/29 15:23:47 mww Exp $

PortSystem 1.0

name		py-smb
version		0.4.3
categories	python net
maintainers	mww@opendarwin.org
platforms	darwin freebsd
description	SMB/CIFS library for python
long_description	SMB/CIFS library for python speaking NT LM0.12 \
		enables python to access shares from Windows computers or \
		machines running Samba.

homepage	http://miketeo.net/projects/pysmb/
master_sites	${homepage}
distname	pysmb-${version}
checksums	md5 73a87cd1d72e94824c687a444d857d77

depends_lib	bin:python:python

set worksrcpath	${workpath}/pysmb

configure	{
	file copy ${portpath}/files/setup.py ${worksrcpath}
	reinplace "s|VERSION|${version}|g" ${worksrcpath}/setup.py
}

build.dir	${worksrcpath}
build.cmd	python setup.py
build.target	build

destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{
	file delete -force ${worksrcpath}/docs/CVS ${worksrcpath}/extra/CVS
	file mkdir ${destroot}${prefix}/share/doc
	file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/extra \
		${destroot}${prefix}/share/doc/${name}/extra
	file mkdir ${destroot}${prefix}/share/doc/${name}/examples
	file copy ${worksrcpath}/nmbquery ${worksrcpath}/smbcp \
		${worksrcpath}/smbdu ${worksrcpath}/smblistshare \
		${destroot}${prefix}/share/doc/${name}/examples
}
