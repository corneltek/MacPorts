# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               python 1.0

name                    py-goocanvas
homepage                http://live.gnome.org/PyGoocanvas
license                 GPL-2+
version                 0.14.1
revision                4

python.versions         24 25 26 27 31 32
python.default_version  27

categories              python gnome
platforms               darwin
maintainers             ucla.edu:alexander.afanasyev

description             GooCanvas python bindings

long_description        PyGoocanvas are the python bindings for GooCanvas which is a canvas \
                        widget for GTK+ that uses the cairo 2D library for drawing.

set branch              [join [lrange [split ${version} .] 0 1] .] 
master_sites            gnome:sources/pygoocanvas/${branch}/
distname                pygoocanvas-${version}
use_bzip2               no
checksums               md5     d502dea5c0d2ac71d953895df81c32e8 \
                        sha1    ea1e10a24ef15a1d3880552fff6352d8b0621ef5 \
                        rmd160  162628947fd6a0d630bd20f9dec570c50fab2d23

use_configure           yes
depends_build-append    port:docbook-xml-4.1.2 \
                        port:docbook-xsl

if {$subport != $name} {
    depends_lib-append          port:goocanvas \
                                port:gtk2 \
                                port:py${python.version}-gtk \
                                port:py${python.version}-cairo \
                                port:py${python.version}-gobject

    patchfiles                  patch-configure.diff

    if {${python.version} != 24} {
        set python.setup_prefix "${python.prefix}"
    } else {
        set python.setup_prefix "${prefix}"
    }

    configure.python            ${python.bin}
    configure.args-append       "--prefix=${python.setup_prefix}"
    configure.pkg_config_path   ${python.prefix}/lib/pkgconfig

    build.cmd                   make
    build.target    
    destroot.cmd                make
    destroot.target             install
    destroot.destdir            "DESTDIR=${destroot}"
}

