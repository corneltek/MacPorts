# $Id: Portfile,v 1.2 2004/02/08 17:41:22 mww Exp $

PortSystem 1.0

name		py-gsl
version		0.1b
categories	python
platforms	darwin
maintainers	mww@opendarwin.org
description	Python interface to the GNU scientific library
long_description	Python interface to the GSL, the GNU scientfic \
			library\; a lot of functions, random number generators \
			are available.

homepage	http://pygsl.sourceforge.net/
master_sites	sourceforge:pygsl
distname	pygsl-${version}
checksums	md5 0bcc497610b1e85f9c1ac789dbd70f68
patchfiles	patch-const_cgs_array.c.diff \
		patch-const_mks_array.c.diff \
		patch-constmodule.c.diff \
		patch-gsl_block_helpers.ic.diff

post-patch	{
	reinplace "s|_CGS_|_CGSA_|g" ${worksrcpath}/src/const_cgs_array.c
	reinplace "s|_MKS_|_MKSA_|g" ${worksrcpath}/src/const_mks_array.c
}

depends_lib	bin:python:python \
		bin:gsl-config:gsl \
		lib:XXX:py-numeric

use_configure	no

build.env	CFLAGS="-I${prefix}/include -I${prefix}/include/gsl"\
		LDFLAGS=-L${prefix}/lib
build.cmd	python setup.py
build.target	build

destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/README \
		${destroot}${prefix}/share/doc/${name}
}
