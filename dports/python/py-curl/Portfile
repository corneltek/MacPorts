# $Id: Portfile,v 1.1 2003/11/11 10:24:46 mww Exp $

PortSystem 1.0
name		py-curl
version		7.10.8
categories	python net devel
maintainers	jpm@opendarwin.org
description	python interface to libcurl
long_description	Python module interface to the cURL library which is \
		a tool for transferring files with URL syntax, supporting many \
		protocols.
platforms	darwin
homepage	http://pycurl.sourceforge.net
master_sites	${homepage}/download
distname	pycurl-${version}
checksums	md5 68663ae7bc73979a2f07e9693aed70ea
patchfiles	patch-setup.py.diff

# libcurl needs version dependency - horrible interim solution
depends_lib	bin:XXX:curl \
		bin:python:python

post-patch {
	reinplace "s|@include_dirs@|${prefix}/include|g" \
		${worksrcpath}/setup.py
}

use_configure	no

build.cmd	python setup.py
build.target	build
build.args	--curl-config=${prefix}/bin/curl-config

destroot.cmd	${build.cmd}
destroot.args	${build.args}
destroot.destdir	--prefix=${destroot}${prefix}
post-destroot {
	# remind user to define/add installed path to python path
	ui_msg "\nbe sure the install path is included in your python path:"
	ui_msg "setenv PYTHONPATH \$PYTHONPATH:${prefix}/lib/python2.2/site-packages\n"
}
