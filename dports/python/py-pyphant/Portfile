# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           python 1.0
PortGroup           wxWidgets 1.0

name                py-pyphant
version             1.0b2
revision            1
categories-append   science
description         python framework for analysing and managing scientific data
maintainers         fmf.uni-freiburg.de:servicegruppe.wissinfo \
                    fmf.uni-freiburg.de:alexander.held rowue
long_description    The python framework pyphant allows for the creation \
                    and application of data flow models. The central idea \
                    of this approach is to encapsulate each data processing \
                    step in one unit which is called a worker. \
                    A worker receives input via sockets and provides the \
                    results of its data processing via plugs. These can be \
                    inserted into other workers' sockets. The resulting \
                    directed graph is called a recipe. Classes for these \
                    objects comprise the Pyphant core. \
                    To implement actual processing steps, Pyphant relies on \
                    third party plug-ins, also referred to as toolboxes, \
                    which extend the basic worker class, e.g. \
                    py-pyphant-imageprocessing. \
                    On top of the core, Pyphant offers a data exchange layer \
                    on basis of numpy arrays which facilitates the \
                    interoperability of the workers and fully supports \
                    physical quantities with errors and units. \
                    The third layer is a graphical user interface \
                    allowing for the interactive construction of recipes \
                    as well as the calculation and visualization of data \
                    from any worker in the recipe.

homepage            http://www.fmf.uni-freiburg.de/service/servicegruppen/sg_wissinfo/projekte/Pyphant
license             BSD

platforms           darwin

# py26-scipy is not universal
universal_variant   no

master_sites        sourceforge:pyphant
# master_sites        http://pyphant.sourceforge.net/nightly-builds/
distname            pyphant-${version}
# use_bzip2           yes

checksums           md5     154737761de5db60c6d58f45449bde4e \
                    sha1    42bbae9a89ed12f66cb7cf9edd98576f0de9d35b \
                    rmd160  76f6d419e97a2ec964065e68ec271733eb90cec1

use_configure       no

python.versions     26

variant carbon description { Install pyphant with carbon support } {

}

if {${name} ne ${subport}} {
    PortGroup           app 1.0
    app.name            pyphant-${python.branch}
    # app.executable      wxPyphant-2.6
    app.executable      pyphant-${python.branch}
    app.icon            ${filespath}/Pyphant.icns

    depends_build       port:py${python.version}-setuptools
    depends_lib         port:py${python.version}-numpy \
                        port:py${python.version}-scipy \
                        port:py${python.version}-setuptools \
                        port:py${python.version}-tables \
                        port:py${python.version}-matplotlib \
                        port:py${python.version}-wxpython-2.8 \
                        port:py${python.version}-simplejson \
                        port:py${python.version}-paste \
                        port:py${python.version}-mx-base \
                        port:py${python.version}-configobj \
                        port:py${python.version}-sogl

    pre-destroot {
        if {[variant_isset carbon]} {
            file copy ${filespath}/pyphant.quartz ${destroot}${prefix}/bin
            file rename ${destroot}${prefix}/bin/pyphant.quartz ${destroot}${prefix}/bin/pyphant-${python.branch}
        } else {
            file copy ${filespath}/pyphant ${destroot}${prefix}/bin
            file rename ${destroot}${prefix}/bin/pyphant ${destroot}${prefix}/bin/pyphant-${python.branch}
            reinplace "s|@APPDIR@|${applications_dir}|" ${destroot}${prefix}/bin/pyphant-${python.branch}
        }
        reinplace "s|@PREFIX@|${prefix}|" ${destroot}${prefix}/bin/pyphant-${python.branch}
        reinplace "s|@PYTHONBRANCH@|${python.branch}|" ${destroot}${prefix}/bin/pyphant-${python.branch}
    }
}
