# $Id: Portfile,v 1.1 2004/02/09 23:00:47 mww Exp $

PortSystem 1.0

name		py-game
version		1.6
categories	python devel multimedia graphics
maintainers	mww@opendarwin.org
description	set of Python modules designed for writing games
long_description	Pygame is a set of Python modules designed for writing \
			games. It is written on top of the excellent SDL \
			library. This allows you to create fully featured \
			games and multimedia programs in the python language. \
			Pygame is highly portable and runs on nearly every \
			platform and operating system.

homepage	http://www.pygame.org
master_sites	${homepage}/ftp/
distname	pygame-${version}
patchfiles	patch-config_darwin.py.diff \
		patch-__init__.py.diff
checksums	md5 ea5db930c0031873a7f5ad1f2f7926db

depends_lib	bin:python:python \
		bin:sdl-config:libsdl \
		lib:libSDL_mixer:libsdl_mixer \
		lib:libSDL_image:libsdl_image \
		lib:libSDL_ttf:libsdl_ttf \
		bin:smpeg-config:smpeg \
		lib:XXX:py-numeric

post-patch	{
	reinplace "s|PREFIX|${prefix}|g" ${worksrcpath}/config_darwin.py
}

configure.env	CFLAGS="-I${prefix}/include}" \
		LDFLAGS="-L${prefix}/lib" \
		SDL_VIDEODRIVER=quartz
configure.cmd	${prefix}/bin/python config.py

build.env	${configure.env}
build.cmd	${prefix}/bin/python setup.py
build.target	build

destroot.cmd	${prefix}/bin/python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc
	file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/examples ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} install.html install.txt WHATSNEW \
		readme.html readme.txt ${destroot}${prefix}/share/doc/${name}
}
