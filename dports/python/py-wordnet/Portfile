# $Id: Portfile,v 1.1 2004/02/09 21:40:44 mww Exp $

PortSystem 1.0

name		py-wordnet
version		1.4
categories	python
platforms	darwin
maintainers	mww@opendarwin.org
description	Python interface to the (included) WordNet database
long_description	PyWordNet is a Python interface to the WordNet \
			database of word meanings and lexical relationships. \
			Version 1.7.1 or WordNet - the most recent version of \
			WordNet working with py-wordnet - is included.

homepage	http://pywordnet.sourceforge.net/
master_sites	sourceforge:pywordnet:source \
		ftp://ftp.cogsci.princeton.edu/pub/wordnet/1.7.1:data
distname	pywordnet-${version}${extract.suffix}:source \
		WordNet-1.7.1${extract.suffix}:data
checksums	pywordnet-${version}${extract.suffix} \
			md5 791c796699d4c2cd6bd37ec32a232561 \
		WordNet-1.7.1${extract.suffix} \
			md5 5c8e569339cf7d8e727d884234365508

depends_lib	bin:python:python

patch	{
	reinplace "s|WNHOME.*||g" ${workpath}/pywordnet-${version}/wordnet.py
	reinplace \
		"s|WNSEARCHDIR =.*|WNSEARCHDIR=\"${prefix}/share/${name}/\"|g" \
		${workpath}/pywordnet-${version}/wordnet.py
}

use_configure	no

build.dir	${workpath}/pywordnet-${version}
build.cmd	python setup.py
build.target	build

destroot.dir	${build.dir}
destroot.cmd	python setup.py
destroot.destdir	--prefix=${destroot}${prefix}

post-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/share/${name}
	xinstall -m 644 -W ${workpath}/WordNet-1.7.1/dict adj.exc adv.exc \
		cntlist cntlist.rev data.adj data.adv data.noun data.verb \
		index.adj index.adv index.noun index.sense index.verb lexnames \
		noun.exc sentidx.vrb sents.vrb verb.exc \
		${destroot}${prefix}/share/${name}
	xinstall -m 644 -W ${build.dir} CHANGES.txt INSTALL.txt LICENSE.txt \
		README.txt index.html ${destroot}${prefix}/share/doc/${name}
}
