diff -wubr dictd-1.7.1/libmaa/config.h.in dictd-1.7.1-patch/libmaa/config.h.in
--- libmaa/config.h.in	Sat Mar 30 06:52:01 2002
+++ libmaa/config.h.in	Mon Aug  5 00:57:19 2002
@@ -92,6 +92,9 @@
 /* Define if you have the strtoul function.  */
 #undef HAVE_STRTOUL
 
+/* Define if you have the getopt function.  */
+#undef HAVE_GETOPT
+
 /* Define if you have the sysconf function.  */
 #undef HAVE_SYSCONF
 
diff -wubr dictd-1.7.1/libmaa/configure.in dictd-1.7.1-patch/libmaa/configure.in
--- libmaa/configure.in	Sat Mar 30 09:13:14 2002
+++ libmaa/configure.in	Mon Aug  5 00:56:54 2002
@@ -278,7 +278,7 @@
 AC_FUNC_ALLOCA
 AC_FUNC_VPRINTF
 AC_CHECK_FUNCS(gettimeofday strchr strerror memcpy atexit on_exit sysconf)
-AC_CHECK_FUNCS(strdup strtol strtoul)
+AC_CHECK_FUNCS(strdup strtol strtoul getopt)
 AC_REPLACE_FUNCS(strdup strtol strtoul)
 
 echo .
diff -wubr dictd-1.7.1/libmaa/maaP.h dictd-1.7.1-patch/libmaa/maaP.h
--- libmaa/maaP.h	Sat Mar 30 09:13:14 2002
+++ libmaa/maaP.h	Mon Aug  5 00:58:59 2002
@@ -100,7 +100,7 @@
 /* Handle getopt correctly */
 #if HAVE_GETOPT_H
 # include <getopt.h>
-#else
+#elseif !defined(HAVE_GETOPT)
 #if !defined(__FreeBSD__) && !defined(__DGUX__) && !defined(__hpux__)
 #if !defined(__bsdi__) && !defined(__OpenBSD__)
 #if !(defined(__sparc) && !defined(__svr4__))
@@ -110,6 +110,9 @@
 #endif
 #endif
 #endif
+#endif
+#if defined(HAVE_GETOPT) && defined(__APPLE__)
+# include <unistd.h>
 #endif
 
 /* We actually need a few non-ANSI C things... */
diff -wubr dictd-1.7.1/regex/Makefile dictd-1.7.1-patch/regex/Makefile
--- regex/Makefile	Sun Mar 31 08:41:44 2002
+++ regex/Makefile	Mon Aug  5 01:03:12 2002
@@ -40,6 +40,7 @@
 libregex.a:	$(OBJPRODN)
 	rm -f libregex.a
 	ar crv libregex.a $(OBJPRODN)
+	ranlib libregex.a
 
 purge:
 	rm -f *.o
