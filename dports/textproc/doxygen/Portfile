# $Id: Portfile,v 1.1 2003/12/28 01:46:02 fkr Exp $

PortSystem	1.0
name		doxygen
version		1.3.5
categories	textproc devel
maintainers	blb@pobox.com
description	Documentation system for several programming languages

long_description \
	It can generate an on-line documentation browser (in HTML) and/or an \
	off-line reference manual from a set of documented source files. \
	There is also support for generating output in RTF (MS-Word), \
	PostScript, hyperlinked PDF, compressed HTML, and Unix man pages. The \
	documentation is extracted directly from the sources, which makes it \
	much easier to keep the documentation consistent with the source code. \
	You can configure doxygen to extract the code structure from \
	undocumented source files. This is very useful to quickly find your \
	way in large source distributions. You can also visualize the \
	relations between the various elements by means of include dependency \
	graphs, inheritance diagrams, and collaboration diagrams, which are \
	all generated automatically.

homepage	http://www.doxygen.org/
master_sites	ftp://ftp.stack.nl/pub/users/dimitri/

platforms	darwin
distfiles	${distname}.src${extract.suffix}
checksums	md5 58f5ed6de54725ba52c2bb6a18d5a147

depends_lib	bin:tex:teTeX bin:gs:ghostscript lib:libpng:libpng \
		lib:libqt-mt:qt3 bin:dot:graphviz bin:ginstall:coreutils

# setup to work smoothly with Qt3
patchfiles	patch-Makefile.doxywizard
post-patch {	reinplace "s|\$(QTDIR)/include|${prefix}/include/qt3|g" \
	   		"${workpath}/${worksrcdir}/tmake/lib/macosx-c++/tmake.conf"
		reinplace "s|\$(QTDIR)/lib|${prefix}/lib|g" \
	   		"${workpath}/${worksrcdir}/tmake/lib/macosx-c++/tmake.conf"
		reinplace "s|= -lqt|= -lqt-mt|g" \
	   		"${workpath}/${worksrcdir}/tmake/lib/macosx-c++/tmake.conf"
}

configure.pre_args	--prefix ${prefix}
configure.args	--docdir ${prefix}/share/doc \
		--with-doxywizard
configure.env	QTDIR=${prefix}
build.target	all docs
destroot.target	install_docs
destroot.args	INSTALL=${destroot}/${prefix} \
		DOCDIR=${destroot}/${prefix}/share/doc/doxygen
