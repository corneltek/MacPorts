# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           github 1.0

github.setup        neologd mecab-ipadic-neologd 8ca2352f5312ef65313e839a0b66b53db28dca42
version             20150319
set dic_version     20150319
categories          textproc japanese
license             Apache-2
platforms           darwin
supported_archs     noarch
maintainers         hum openmaintainer

description         Neologism dictionary for MeCab
long_description    mecab-ipadic-neologd is customized system dictionary for \
                    MeCab. This dictionary includes many neologisms (new word), \
                    which are \extracted from many language resources on the Web. \
                    When you analyze the Web documents, it's better to use this \
                    system dictionary and default one (ipadic) together.

dist_subdir         mecab

checksums           rmd160  e9e65083f32d233dac6c7b68faf02365278a50c3 \
                    sha256  26265a790a3d4a740d25767200256e55e8148e2ae47a759d803e0589dae8634c

depends_lib         port:mecab-base

depends_build       port:mecab-ipadic-utf8 \
                    port:libiconv \
                    port:xz

patchfiles          patch-test.sh.diff

post-patch {
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/libexec/test-mecab-ipadic-neologd.sh
}

use_configure       no

build {
    system -W ${worksrcpath} ./libexec/make-mecab-ipadic-neologd.sh
    system -W ${worksrcpath} ./libexec/test-mecab-ipadic-neologd.sh
}

destroot.dir        ${worksrcpath}/build/mecab-ipadic-2.7.0-20070801-neologd-${dic_version}

post-destroot {
    move ${destroot}${prefix}/lib/mecab/dic/${name} \
        ${destroot}${prefix}/lib/mecab/dic/neologd-utf8
    # install additional documents
    set docdir      ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}
    xinstall -m 644 -W ${worksrcpath} \
        ChangeLog COPYING README.ja.md README.md \
        ${destroot}${docdir}
    xinstall -m 644 ${destroot.dir}/COPYING ${destroot}${docdir}/COPYING-ipadic
} 
