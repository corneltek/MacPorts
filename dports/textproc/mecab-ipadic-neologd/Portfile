# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           github 1.0

github.setup        neologd mecab-ipadic-neologd 16cebe5f2d88d169fa7d6ccf718a3e9009ed21fd
version             20150323
set dic_version     20150323
categories          textproc japanese
license             Apache-2
platforms           darwin
supported_archs     noarch
maintainers         hum openmaintainer

description         Neologism dictionary for MeCab
long_description    mecab-ipadic-neologd is customized system dictionary for \
                    MeCab. This dictionary includes many neologisms (new word), \
                    which are \extracted from many language resources on the Web. \
                    When you analyze the Web documents, it's better to use this \
                    system dictionary and default one (ipadic) together.

dist_subdir         mecab

checksums           rmd160  868c69b398814e37a7469c85584f78e3736c7341 \
                    sha256  aaa25e1926f11ea63a75abc68bc49c26f1827e2931239ff1c6a8a755388ff58b

depends_lib         port:mecab-base

depends_build       port:mecab-ipadic-utf8 \
                    port:libiconv \
                    port:xz

patchfiles          patch-test.sh.diff

post-patch {
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/libexec/test-mecab-ipadic-neologd.sh
}

use_configure       no

build {
    system -W ${worksrcpath} ./libexec/make-mecab-ipadic-neologd.sh
    system -W ${worksrcpath} ./libexec/test-mecab-ipadic-neologd.sh
}

destroot.dir        ${worksrcpath}/build/mecab-ipadic-2.7.0-20070801-neologd-${dic_version}

post-destroot {
    move ${destroot}${prefix}/lib/mecab/dic/${name} \
        ${destroot}${prefix}/lib/mecab/dic/neologd-utf8
    # install additional documents
    set docdir      ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}
    xinstall -m 644 -W ${worksrcpath} \
        ChangeLog COPYING README.ja.md README.md \
        ${destroot}${docdir}
    xinstall -m 644 ${destroot.dir}/COPYING ${destroot}${docdir}/COPYING-ipadic
} 
