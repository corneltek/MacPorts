# -*- coding: utf-8; mode: tcl; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:noet:sw=4:ts=8:sts=4
# $Id$

PortSystem  1.0

name        p5-graveyard
version     0.0
categories  perl

array set replacements {
    5.8  5.16
    5.10 5.16
    5.12 5.16
    5.14 5.16
}

proc unknown args {
    upvar 1 replacements replacements
    if {[llength $args] < 3} {
        lappend args 5.8 5.10 5.12 5.14
    }
    set replaced_series [lassign $args superport version_string]
    lassign [split $version_string _] ver rev
    if {$rev eq ""} {
        set rev 0
    }
    foreach series $replaced_series {
        regsub ^p5- $superport p${series}- replaced
        regsub ^p5- $superport p$replacements($series)- replacement
        subport $replaced {
            version $ver
            revision $rev
            replaced_by $replacement
        }
    }
}

# NOTE: To keep file size reasonable, this list uses tabs for formatting
# instead of spaces. When inserting new entries, please set your
# editor's tab width to 8 to ensure proper alignment, and verify that
# you're inserting tab characters and not spaces.

# SUPERPORT (i.e., "p5-whatever")		VERSION+REV	REPLACED SERIES (defaults
#								to "5.8 5.10 5.12 5.14")


if {${subport} ne ${name}} {
    PortGroup obsolete 1.0
} else {
    maintainers         larryv openmaintainer
    supported_archs     noarch
    universal_variant   no
    description         Metaport containing obsolete Perl subports
    long_description    This is a metaport for collecting obsolete \
                        Perl subports so they don't cause spurious \
                        build failures on the MacPorts buildslaves \
                        whenever their superports are modified. It \
                        cannot be installed.
    archive_sites
    pre-fetch {
        ui_error {This is a metaport for obsolete Perl subports.}
        return -code error {non-installable metaport}
    }
}
