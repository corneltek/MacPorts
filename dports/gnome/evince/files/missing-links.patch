--- configure.ac.orig	2013-02-10 22:10:53.000000000 -0800
+++ configure.ac	2013-02-10 22:12:46.000000000 -0800
@@ -139,7 +139,7 @@ dnl Check dependencies
 # SHELL_CFLAGS     for shell implementation.
 # SHELL_LIBS
 
-PKG_CHECK_MODULES(LIBDOCUMENT, gtk+-2.0 >= $GTK_REQUIRED gio-2.0 >= $GLIB_REQUIRED)
+PKG_CHECK_MODULES(LIBDOCUMENT, gtk+-2.0 >= $GTK_REQUIRED gmodule-2.0 gio-2.0 >= $GLIB_REQUIRED)
 PKG_CHECK_MODULES(LIBVIEW, gtk+-2.0 >= $GTK_REQUIRED gthread-2.0 gio-2.0 >= $GLIB_REQUIRED)
 PKG_CHECK_MODULES(BACKEND, gtk+-2.0 >= $GTK_REQUIRED)
 PKG_CHECK_MODULES(FRONTEND_CORE, gtk+-2.0 >= $GTK_REQUIRED gthread-2.0 gio-2.0 >= $GLIB_REQUIRED)
@@ -159,7 +159,7 @@ case "$with_platform" in
         # require the gnome icon theme instead.
         SHELL_PLATFORM_PKGS="gnome-icon-theme >= $GNOME_ICON_THEME_REQUIRED"
         # The totem-screensaver and egg_smclient code use x11 directly.
-        SHELL_PLATFORM_PKGS="$SHELL_PLATFORM_PKGS x11"
+        SHELL_PLATFORM_PKGS="$SHELL_PLATFORM_PKGS x11 ice"
         ;;
   *)
         # On all other platforms we issue a warning about the runtime
@@ -201,7 +201,7 @@ if test "$with_smclient" != "no"; then
     *) SMCLIENT_PKGS="" ;;
   esac
 
-  PKG_CHECK_MODULES([SMCLIENT],[gtk+-2.0 gthread-2.0 $SMCLIENT_PKGS])
+  PKG_CHECK_MODULES([SMCLIENT],[gtk+-2.0 gthread-2.0 gmodule-2.0 $SMCLIENT_PKGS])
   AC_SUBST([SMCLIENT_CFLAGS])
   AC_SUBST([SMCLIENT_LIBS])
 fi
