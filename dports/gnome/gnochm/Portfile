# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                gnochm
version             0.9.11
license             GPL-2
categories          gnome
platforms           darwin
maintainers         nomaintainer
description         A GNOME viewer for CHM files
long_description    GnoCHM uses PyCHM, a Python package that exports the \
                    CHMLIB API, to read CHM files and provides: full-text \
                    search support, bookmarks, Gnome integration and \
                    configurable support for HTTP and external ms-its links.
homepage            http://gnochm.sourceforge.net
master_sites        sourceforge

checksums           md5 d77cc819eaa64b3ab333c4a73e88cfc0

supported_archs     noarch

configure.python    ${prefix}/bin/python2.5

depends_lib-append  port:py25-chm \
                    port:py25-gnome \
                    port:gnome-python-extras \
                    port:shared-mime-info \
                    port:desktop-file-utils \
                    port:rarian

depends_run         port:yelp

post-activate {
    system "${prefix}/bin/scrollkeeper-update"
    system "${prefix}/bin/update-desktop-database ${prefix}/share/applications"
    system "${prefix}/bin/update-mime-database ${prefix}/share/mime"
    system "export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source` && \
        gconftool-2 --makefile-install-rule ${prefix}/etc/gconf/schemas/*.schemas"
}
