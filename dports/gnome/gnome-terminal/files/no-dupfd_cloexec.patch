--- src/terminal-screen.c.orig	2013-11-15 13:28:52.000000000 -0800
+++ src/terminal-screen.c	2013-11-15 13:31:21.000000000 -0800
@@ -1335,7 +1335,12 @@ terminal_screen_child_setup (FDSetupData
       for (j = 0; j < n_fds; j++) {
         if (fds[j] == target_fd) {
           do {
+#ifdef F_DUPFD_CLOEXEC
             fd = fcntl (fds[j], F_DUPFD_CLOEXEC, 10);
+#else
+            fd = fcntl (fds[j], F_DUPFD, 10);
+            fcntl(fd, F_SETFD, FD_CLOEXEC);
+#endif
           } while (fd == -1 && errno == EINTR);
           if (fd == -1)
             _exit (127);
