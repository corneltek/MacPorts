# $Id: Portfile,v 1.2 2003/12/16 06:08:15 olegb Exp $
PortSystem 1.0
name		abiword2
version		2.0.0
revision	1
description	A word processor with gnome support
long_description        A word processor with gnome support
maintainers	olegb@opendarwin.org
categories	gnome editors textproc
platforms	darwin 
homepage	http://www.gnome.org/gnome-office/abiword.shtml
master_sites    gnome:fifth-toe/2.4/2.4.0/sources
checksums	md5 1b7153cdb5a8134b995505b6f362bfc1
distname	abiword-${version}
worksrcdir	${distname}/abi
depends_lib	lib:libgtk.2:gtk lib:libz.1:zlib lib:libpng.3:libpng \
		lib:libfribidi:fribidi
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp -flat_namespace -undefined suppress" 
configure.args	--disable-Cocoa --disable-Carbon --mandir=${prefix}/share/man 
use_bzip2	yes
patchfiles	patch_wvMakefile.in patch_abiword.sh
build.target	{}

post-destroot	{
		system "cd ${worksrcpath}/../wv && \
			mv  xml/wvDocbook.xml xml/wvDocBook.xml &&
			make install prefix=${destroot}${prefix}" 
		}
		
variant gnome { configure.args-append   --enable-gnome
                depends_lib-append	lib:gnome-session:gnome-session }
