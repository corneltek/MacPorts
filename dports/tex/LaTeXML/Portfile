# -*- coding: utf-8; mode: tcl; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 4; truncate-lines: t -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
name                LaTeXML
version             0.8.0
categories          tex
platforms           darwin
maintainers         bruce.miller@nist.gov
license             public-domain

description         LaTeXML converts TeX to XML/HTML/MathML
long_description    LaTeXML converts TeX to XML,\
                    including HTML, XHTML, ePub with MathML.

homepage            http://dlmf.nist.gov/LaTeXML/
master_sites        http://dlmf.nist.gov/LaTeXML/releases/

checksums           rmd160 cfafc6f4f5e276543333f907a1ec0db3c25e424f \
                    sha256 a495019f2828f0734e9e41f0398f6c8d60ba6a934d4ccad4fea7d588ab060388

# requires: DB_File, Pod::Parser and Test::More
# but those should be in Perl's core modules.
depends_lib         port:p5.16-archive-zip \
                    port:p5.16-file-which \
                    port:p5.16-getopt-long \
                    port:p5.16-image-size \
                    port:p5.16-io-string \
                    port:p5.16-json-xs \
                    port:p5.16-libwww-perl \
                    port:p5.16-parse-recdescent \
                    port:p5.16-time-hires \
                    port:p5.16-uri \
                    port:p5.16-xml-libxml \
                    port:p5.16-xml-libxslt \
                    port:p5.16-perlmagick

notes "${name} works best with some version of TeX installed. \
   Please install MacTeX or 'sudo port install texlive' (or other system) first."

#============================================================
# Configuration
# Override configure to do it the perl way.
configure.cmd       ${prefix}/bin/perl5.16 Makefile.PL

# Note that installation does
#   make install DESTDIR=${destroot}
# which stages the installation to $destroot, NOT the eventual final installation.

#============================================================
# Do this to enable testing
# test.run yes

#============================================================
# Get TeX to notice our style files, since this isn't done
# when staging the installation to ${destpath}
post-activate {
    system "mktexlsr"
}
