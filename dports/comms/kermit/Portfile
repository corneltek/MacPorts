# $Id: Portfile,v 1.7 2003/11/23 19:54:43 fkr Exp $

PortSystem 1.0
name			kermit
version			8.0.209
categories		comms
maintainers		daved@nostrum.com
distname		cku209
platforms		darwin freebsd
master_sites		ftp://kermit.columbia.edu/kermit/archives/ \
			ftp://ftp.icm.edu.pl/pub/kermit/archives/
checksums		md5 e00728a7d97d3dbdff6ee772a4848f82
homepage		http://www.kermit-project.org/
description		Serial and network communications package.
long_description	C-Kermit is a combined serial and network \
			communication software package offering \
			a consistent, medium-independent, \
			cross-platform approach to connection \
			establishment, terminal sessions, file \
			transfer, character-set translation, \
			numeric and alphanumeric paging, and \
			automation of communication tasks.

worksrcdir
build.target
patchfiles	patch-makefile patch-ckuus5.c

variant darwin {
	build.target		macosx102nc
	if {[ file exists /usr/include/nameser8_compat.h ]} {
		patchfiles-append 	patch-ckcnet.c patch-makefile-resolv
	}
}

variant freebsd {
	set major 		[ string index ${os.version} 0 ]
	set minor		[ string index ${os.version} 2 ]
	build.target		freebsd${major}${minor}
}

configure {
	cd ${worksrcpath}
	reinplace "s|@@prefix@@|${prefix}|g"	ckuus5.c makefile
}

pre-destroot { 
	system "install -d ${destroot}${prefix}/bin"
	system "install -d ${destroot}${prefix}/share/kermit"
	system "install -d ${destroot}${prefix}/man"
}
