# $Id: Portfile,v 1.6 2003/08/05 09:28:58 jkh Exp $

PortSystem 1.0
name			kermit
version			8.0.206
categories		comms
maintainers		daved@nostrum.com
distname		cku206
platforms		darwin freebsd
master_sites		ftp://kermit.columbia.edu/kermit/archives/ \
			ftp://ftp.icm.edu.pl/pub/kermit/archives/
checksums		md5 d16f433e9a347f96d09962be5d8ab71f
homepage		http://www.kermit-project.org/
description		Serial and network communications package.
long_description	C-Kermit is a combined serial and network \
			communication software package offering \
			a consistent, medium-independent, \
			cross-platform approach to connection \
			establishment, terminal sessions, file \
			transfer, character-set translation, \
			numeric and alphanumeric paging, and \
			automation of communication tasks.

worksrcdir
build.target

variant darwin {
	build.target		macosx102nc
}

variant freebsd {
	set major 		[ string index ${os.version} 0 ]
	set minor		[ string index ${os.version} 2 ]
	build.target		freebsd${major}${minor}
}

configure {
	reinplace "s|^BINDIR = /usr/local|BINDIR = ${prefix}|" \
		${workdir}/makefile
	reinplace "s|^MANDIR = /usr|MANDIR = ${prefix}|" ${workdir}/makefile
	reinplace "s|^INFODIR =|INFODIR = ${prefix}/share/kermit|" \
		${workdir}/makefile
	reinplace "s|/usr/local|${prefix}|g" ${workdir}/ckuus5.c
	reinplace "973,996d" ${workdir}/makefile
}

pre-destroot { system "install -d ${destroot}${prefix}/bin"
              system "install -d ${destroot}${prefix}/man/man1"
              system "install -d ${destroot}${prefix}/share/kermit"
            }
