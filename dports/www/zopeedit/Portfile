# $Id: Portfile,v 1.2 2004/03/01 03:03:34 rshaw Exp $
PortSystem 1.0

name			zopeedit
version			0.7
categories		www zope python
maintainers		rshaw@opendarwin.org
description		Client helper application for Zope ExternalEditor support
long_description	Configurable helper application that allows you \
					to drop into your favorite editor(s) directly from \
					the ZMI to modify Zope objects.
platforms		darwin freebsd
homepage		http://www.zope.org/Members/Caseman/ExternalEditor
master_sites	http://zope.org/Members/Caseman/ExternalEditor/${version}
dist_subdir		zope/${name}
distname		${name}-${version}-src
extract.suffix	.tgz
checksums		md5 87fe890a7f7c2506db16142bc4789b38

# Use Python 2.3 from DarwinPorts explicitly 
set python		${prefix}/bin/python2.3

# Depends on Python
depends_build	path:${python}:python23

platform freebsd {
	extract.post_args	| gtar -xf -
}

use_configure	no

build.cmd		${python} setup.py
build.target	build

destroot.cmd	${python} setup.py
destroot.destdir
destroot.args	--prefix=${destroot}${prefix}
post-destroot	{ file rename ${destroot}${prefix}/bin/zopeedit.py \
					  ${destroot}${prefix}/bin/zopeedit
				  xinstall -m 0644 ${worksrcpath}/man/${name}.1 \
					  ${destroot}${prefix}/share/man/man1/ }

