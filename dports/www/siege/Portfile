# $Id$

PortSystem       1.0

name             siege
version             3.0.6
categories       www benchmarks
license          GPL-2+
maintainers      nomaintainer
description      http regression testing and benchmarking utility
long_description \
    Siege is an http regression testing and benchmarking utility. \
    It was designed to let web developers measure the performance \
    of their code under duress, to see how it will stand up to \
    load on the internet. It lets the user hit a web server with \
    a configurable number of concurrent simulated users.
homepage         http://www.joedog.org/siege-home/
platforms        darwin
master_sites     http://download.joedog.org/siege/

checksums           rmd160  2d1912436cea0fe618dc1422c8a7cf5d875e21a3 \
                    sha256  78b79964e3d6772e532c6008a084700f830a02a00ca80b44f3e71380b4908c5b

depends_lib      port:openssl

patchfiles          patch-doc-Makefile.in.diff

configure.args   --mandir=${prefix}/share/man \
                 --with-ssl=${prefix}

set docdir ${prefix}/share/doc/${name}

post-destroot {
    # copy an example siegerc to ${prefix}share/doc so an updater can see
    # possible changes to siegerc:
    xinstall -d ${destroot}${docdir}
    xinstall -m 644 ${worksrcpath}/doc/siegerc ${destroot}${docdir}
}

notes "
To use siege you have to run 'siege.config'. This generates a default\
configuration file.
If you are updating have a look at a possible new '.siegerc' file in\
${docdir}/siegerc.
"

livecheck.type      regex
livecheck.url       [lindex ${master_sites} 0]
livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
