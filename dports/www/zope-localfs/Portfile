# $Id: Portfile,v 1.2 2003/11/17 21:20:06 jkh Exp $
PortSystem 1.0
name		zope-localfs
version		1.0.0
categories	www python zope
maintainers	rshaw@opendarwin.org
description	Zope Local File System folder
long_description	The Local File System is an add-in product for \
			the Zope web application server. It allows users \
			to access the contents of the file system on a \
			Zope server as if they were contained in the \
			Zope Object Database. It allows you to serve \
			files and browse directories from the local file \
			system (or network shares on Windows platforms). \
			It also allows you to upload files to the file \
			system.
platforms	darwin
homepage	http://sourceforge.net/projects/localfs
distname	LocalFS-1-0-0
extract.suffix	.tgz
master_sites	sourceforge:localfs
checksums	md5 f3d27cfb5d09232bf2a01dad736c0740
depends_build	bin:python2.1:python21 \
		path:${prefix}/www/Zope:zope
configure	{}

set python	/usr/bin/env\ python2.1
set zopehome	${prefix}/www/Zope

pre-build	{ system "cp ${zopehome}/inst/compilezpy.py \
			  ${workpath}/lib/python/Products" }

build		{ system "cd ${workpath}/lib/python/Products && \
			  ${python} ${workpath}/lib/python/Products/compilezpy.py"
		  system "cd ${workpath}/lib/python/Products && \
			  ${python} -O ${workpath}/lib/python/Products/compilezpy.py" }

destroot	{ set zopebase	  ${destroot}${zopehome}
		  set productsdir ${zopebase}/lib/python/Products
		  set zopeuser	  zope
    
		  # Copy Plone products into the Products directory
		  system "install -d ${productsdir}"
		  system "cp -R ${workpath}/lib/python/Products/LocalFS ${productsdir}"
		  system "cd ${zopebase} && chown -R zope lib"
		  system "cd ${zopebase} && chgrp -R www lib" }

