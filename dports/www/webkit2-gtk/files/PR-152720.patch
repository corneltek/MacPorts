From 8cc961974887e4b6e51feb21e0fda0bfcba44096 Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
Date: Thu, 14 Jan 2016 23:28:03 -0800
Subject: [PATCH] Ensure CF_AVAILABLE is undefined

https://bugs.webkit.org/show_bug.cgi?id=152720

Signed-off-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
---
 Source/JavaScriptCore/API/WebKitAvailability.h | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/Source/JavaScriptCore/API/WebKitAvailability.h b/Source/JavaScriptCore/API/WebKitAvailability.h
index 28b3af4..a9bb276 100644
--- Source/JavaScriptCore/API/WebKitAvailability.h
+++ Source/JavaScriptCore/API/WebKitAvailability.h
@@ -26,7 +26,7 @@
 #ifndef __WebKitAvailability__
 #define __WebKitAvailability__
 
-#if defined(__APPLE__) && !defined(BUILDING_GTK__)
+#if defined(__APPLE__)
 
 #include <AvailabilityMacros.h>
 #include <CoreFoundation/CoreFoundation.h>
@@ -64,6 +64,11 @@
 
 #endif /* __MAC_OS_X_VERSION_MIN_REQUIRED <= 101100 */
 
+#if defined(BUILDING_GTK__)
+#undef CF_AVAILABLE
+#define CF_AVAILABLE(_mac, _ios)
+#endif
+
 #else
 #define CF_AVAILABLE(_mac, _ios)
 #endif
-- 
2.7.0

