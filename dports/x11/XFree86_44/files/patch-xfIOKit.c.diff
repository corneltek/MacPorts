--- programs/Xserver/hw/darwin/iokit/xfIOKit.c.orig	Mon Mar  1 13:06:15 2004
+++ programs/Xserver/hw/darwin/iokit/xfIOKit.c	Mon Mar  1 13:07:15 2004
@@ -465,7 +465,8 @@
 
 #ifdef __i386__
     /* x86 in 8bit mode currently needs fixed color map... */
-    if( pixelInfo.bitsPerComponent == 8 ) {
+    if( pixelInfo.bitsPerComponent == 8 
+	&& pixelInfo.componentCount == 1) {
         pixelInfo.pixelType = kIOFixedCLUTPixels;
     }
 #endif
