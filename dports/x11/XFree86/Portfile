package require port 1.0
portname	XFree86
portversion	4.2.0
categories	x11
maintainers	eric@opendarwin.org
description	"X11R6 windowing system"
master_sites	ftp://ftp.xfree86.org/pub/XFree86/${portversion}/source/

regsub -all "\\." ${portversion} "" num

distfiles	X${num}src-1.tgz X${num}src-2.tgz X${num}src-3.tgz
dist_subdir	XFree86
checksums	X${num}src-1.tgz md5 ad43a8e9e39703322005cd6f7145b77f \
		X${num}src-2.tgz md5 dae33268a9f2735b9678a81fb23e8d3e \
		X${num}src-3.tgz md5 560899e175a02ab592185b69756f539e \
configure	{}
extract		{ system "cd ${workpath}; tar xfz ${distpath}/X${num}src-1.tgz"
		  system "cd ${workpath}; tar xfz ${distpath}/X${num}src-2.tgz"
		  system "cd ${workpath}; tar xfz ${distpath}/X${num}src-3.tgz"}
worksrcdir	xc

if {[regexp ^6\. $os_version match] == 1} {
		patchfiles patch-darwin.cf
}

configure	{}
build		{ system "cd ${workpath}/${worksrcdir}; make World" }
