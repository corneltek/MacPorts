PortSystem 1.0
name		kdebase3
version		3.0.8
revision	1
categories	x11
maintainers	ranger@befunk.com
description	Base Programs for the K Desktop Environment

long_description Base Programs for the K Desktop Environment

platforms	darwin
master_sites	ftp://ftp.kde.org/pub/kde/unstable/kde-3.1-beta2/src/
extract.sufx	.tar.bz2
use_bzip2	yes
distname	kdebase-${version}
patchfiles	patch-kdebase-${version}-darwin
#FIXME: needs lame
#FIXME: no way to depend on cups that gets the cups package for required headers
depends_lib	lib:libxml2.2:libxml2 lib:libxslt.1:libxslt lib:libtiff.3:tiff \
		lib:libqt-mt.3:qt3 lib:libartsc.1:arts lib:libdl.1:dlcompat \
		lib:libjpeg.9:jpeg lib:libpng.2:libpng lib:libpoll.1:poll-emulator \
		lib:libcups.2:cups bin:grrrnoincludedepends:cups lib:libX11.6:XFree86 \
		lib:libaudiofile.0:audiofile lib:libesd.0:esound lib:libXm.1:lesstif \
		lib:libXm.2:lesstif lib:libfreetype.6:XFree86 lib:libpcre.0:pcre \
		bin:pcre-config:pcre

checksums	md5 693c04fe623a72cd993cb80c5cecc122

patch {
		foreach patch $patchfiles {
			system "cd '${workpath}/${distname}' && \
			sed -e 's#@PREFIX@#${prefix}#g' '${portpath}/${filedir}/${patch}' | patch -p0"
		}
}
post-patch      {
		system "cd '${worksrcpath}' && make -f Makefile.cvs"
}
configure.env	CPPFLAGS='-I${prefix}/include -I${prefix}/include/qt3 -no-cpp-precomp -fno-common' \
		LIBS='-L${prefix}/lib'
configure.args	--prefix='${prefix}' --with-qt-dir='${prefix}' --with-qt-includes='${prefix}/include/qt3' \
		--with-extra-libs='${prefix}/lib' --with-extra-includes='${prefix}/include' --enable-mt \
		--with-pic --enable-rpath --enable-shared=yes --enable-static=no --with-xinerama \
		--without-nfs --disable-final --disable-dependency-tracking --with-ldap=/usr
build.env	${configure.env}

include         contents
