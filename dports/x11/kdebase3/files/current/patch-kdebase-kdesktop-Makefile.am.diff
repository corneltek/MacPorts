Index: kdesktop/Makefile.am
===================================================================
RCS file: /home/kde/kdebase/kdesktop/Makefile.am,v
retrieving revision 1.82
diff -u -u -r1.82 Makefile.am
--- kdesktop/Makefile.am	3 Jun 2003 06:16:21 -0000	1.82
+++ kdesktop/Makefile.am	29 Jun 2003 03:13:15 -0000
@@ -3,16 +3,13 @@
 INCLUDES = -I$(top_srcdir)/kcontrol/background -I$(top_srcdir)/libkonq $(all_includes)
 kdesktop_la_LDFLAGS  = $(KDE_RPATH) $(all_libraries) -module -avoid-version
 kdesktop_la_LIBADD   = $(top_builddir)/libkonq/libkonq.la $(top_builddir)/kcontrol/background/libbgnd.la $(LIB_XSS)
-kdesktop_LDFLAGS  = $(all_libraries) $(KDE_RPATH)
-kdesktop_LDADD    = kdesktop.la
 
 SUBDIRS = . lock pics patterns programs init kwebdesktop
 
 ####### Files
 
-bin_PROGRAMS = kdesktop
 bin_SCRIPTS = kdeeject
-lib_LTLIBRARIES = kdesktop.la
+kdeinit_LTLIBRARIES = kdesktop.la
 
 kdesktop_la_SOURCES = main.cc krootwm.cc xautolock.cc kdiconview.cc desktop.cc \
 	lockeng.cc KDesktopIface.skel \
@@ -20,8 +17,6 @@
 	minicli.cpp KBackgroundIface.skel pixmapserver.cc kcustommenu.cc \
 	startupid.cpp minicli_ui.ui xautolock_diy.c xautolock_engine.c
 
-kdesktop_SOURCES = dummy.cc
-
 include_HEADERS = KDesktopIface.h KScreensaverIface.h KBackgroundIface.h
 
 noinst_HEADERS = desktop.h bgmanager.h krootwm.h \
@@ -35,9 +30,6 @@
 messages: rc.cpp
 	$(EXTRACTRC) lock/*.ui >> rc.cpp
 	$(XGETTEXT) lock/*.cc *.cc *.cpp *.h -o $(podir)/kdesktop.pot
-
-dummy.cc:
-	echo > dummy.cc
 
 menu_DATA = kdesktop_custom_menu1 kdesktop_custom_menu2
 menudir = $(kde_confdir)
