Index: konqueror/Makefile.am
===================================================================
RCS file: /home/kde/kdebase/konqueror/Makefile.am,v
retrieving revision 1.217
diff -u -u -r1.217 Makefile.am
--- konqueror/Makefile.am	9 Apr 2003 12:48:28 -0000	1.217
+++ konqueror/Makefile.am	29 Jun 2003 02:55:20 -0000
@@ -5,7 +5,7 @@
 #SUBDIRS = . kfmexec client iconview dirtree listview keditbookmarks shellcmdplugin about pics sidebar
 SUBDIRS = . kfmexec client iconview listview keditbookmarks shellcmdplugin about pics sidebar preloader
 
-lib_LTLIBRARIES = konqueror.la
+kdeinit_LTLIBRARIES = konqueror.la
 
 konqdatadir = $(kde_datadir)/konqueror
 konqdata_DATA = konqueror.rc
@@ -20,8 +20,6 @@
 
 include_HEADERS = KonquerorIface.h
 
-bin_PROGRAMS = konqueror
-
 konqueror_la_SOURCES = konq_main.cc \
 	    KonquerorIface.cc KonquerorIface.skel \
 	    KonqMainWindowIface.cc KonqMainWindowIface.skel \
@@ -48,10 +46,6 @@
 konqueror_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
 konqueror_la_LIBADD = ../libkonq/libkonq.la $(LIBMALLOC)
 
-konqueror_SOURCES = dummy.cc
-konqueror_LDADD = konqueror.la
-konqueror_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-
 # Hmm, this experiment of a static konq failed, don't trust it...
 # (but feel free to fix it :)
 
@@ -63,9 +57,6 @@
 #konqueror_static_SOURCES = dummy.cc
 #konqueror_static_LDADD = konqueror.la *view/*.la dirtree/*.la $(libdir)/libkhtml.la
 #konqueror_static_LDFLAGS = $(all_libraries) -static
-
-dummy.cc: $(srcdir)/Makefile.am
-	echo "extern \"C\" int kdemain( int argc, char **argv ); int main( int argc, char **argv ) { return kdemain( argc, argv ); }" > dummy.cc
 
 messages: rc.cpp
 	$(EXTRACTRC) *.rc */*.rc >> rc.cpp
