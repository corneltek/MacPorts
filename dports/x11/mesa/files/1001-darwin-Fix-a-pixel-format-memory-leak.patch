From fc42fe8d28e7f5b886db8241ab5a2bfdf40a1adb Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
Date: Sat, 24 May 2014 14:08:16 -0700
Subject: [PATCH 1001/1003] darwin: Fix a pixel format memory leak

Signed-off-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
(cherry picked from commit 131d80fc36c1f027c4f3153fe5c861c07c2fe567)
---
 src/glx/apple/apple_visual.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/glx/apple/apple_visual.c b/src/glx/apple/apple_visual.c
index 238c248..ea0fdd0 100644
--- a/src/glx/apple/apple_visual.c
+++ b/src/glx/apple/apple_visual.c
@@ -80,6 +80,7 @@ apple_visual_create_pfobj(CGLPixelFormatObj * pfobj, const struct glx_config * m
    /* Test for kCGLPFAOpenGLProfile support at runtime and roll it out if not supported */
    attr[numattr] = 0;
    error = apple_cgl.choose_pixel_format(attr, pfobj, &vsref);
+   apple_cgl.destroy_pixel_format(pfobj);
    if (error == kCGLBadAttribute)
       numattr -= 2;
 
-- 
1.9.3

