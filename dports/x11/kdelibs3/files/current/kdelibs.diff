Index: admin/acinclude.m4.in
===================================================================
RCS file: /home/kde/kde-common/admin/acinclude.m4.in,v
retrieving revision 2.372
diff -u -r2.372 acinclude.m4.in
--- admin/acinclude.m4.in	30 Jun 2003 11:18:09 -0000	2.372
+++ admin/acinclude.m4.in	3 Jul 2003 12:47:21 -0000
@@ -3606,7 +3606,7 @@
         use_pam=yes
         pam_service=$withval
       fi
-      ac_cv_path_pam="use_pam=$use_pam pam_service=$pam_service"
+      ac_cv_path_pam="use_pam=$use_pam pam_service=$pam_service pam_header=security/pam_appl.h"
     ], [
       AC_CACHE_VAL(ac_cv_path_pam,
         [ use_pam=no
@@ -3619,14 +3619,17 @@
 			[ use_pam=yes
 			  pam_header=pam/pam_appl.h
 			  pam_service=kde
-    			  AC_DEFINE(HAVE_PAM_PAM_APPL_H, 1, [Define if your pam headers are in pam/ instead of security/])
 			])
 		]) 
             ], , $LIBDL)
-          ac_cv_path_pam="use_pam=$use_pam pam_service=$pam_service"
+          ac_cv_path_pam="use_pam=$use_pam pam_service=$pam_service pam_header=$pam_header"
         ])
     ])
   eval "$ac_cv_path_pam"
+
+  if test "x$pam_header" = "xpam/pam_appl.h"; then
+    AC_DEFINE(HAVE_PAM_PAM_APPL_H, 1, [Define if your pam headers are in pam/ instead of security/])
+  fi
 
   AC_MSG_CHECKING(for PAM)
   if test "x$use_pam" = xno; then
Index: kdecore/kgrantpty.c
===================================================================
RCS file: /home/kde/kdelibs/kdecore/kgrantpty.c,v
retrieving revision 1.9
diff -u -r1.9 kgrantpty.c
--- kdecore/kgrantpty.c	20 Jan 2003 21:23:19 -0000	1.9
+++ kdecore/kgrantpty.c	3 Jul 2003 12:47:21 -0000
@@ -53,6 +53,8 @@
   mode_t        mod;
   char*         tty;
 
+  return 0;
+
   /* check preconditions **************************************************/
   if (argc != 2 || (strcmp(argv[1],"--grant") && strcmp(argv[1],"--revoke")))
   {
Index: kdecore/klibloader.cpp
===================================================================
RCS file: /home/kde/kdelibs/kdecore/klibloader.cpp,v
retrieving revision 1.63
diff -u -r1.63 klibloader.cpp
--- kdecore/klibloader.cpp	17 Jun 2003 05:13:40 -0000	1.63
+++ kdecore/klibloader.cpp	3 Jul 2003 12:47:21 -0000
@@ -59,7 +59,7 @@
 
 
 extern "C" {
-extern int lt_dlopen_flag;
+int lt_dlopen_flag = RTLD_LAZY;
 }
 
 
