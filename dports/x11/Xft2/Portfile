# $Id: Portfile,v 1.9 2004/01/21 04:20:57 blb Exp $

PortSystem		1.0
name			Xft2
version			2.1.2
revision		2
categories		x11
maintainers		blb@pobox.com
description		X FreeType library

long_description \
	Xft is a library that connects X applications with the FreeType font \
	rasterization library. Xft uses fontconfig to locate fonts so it has no \
	configuration files.

homepage		http://fontconfig.org/

master_sites	http://x2.freedesktop.org/~fontconfig/release/ \
				freebsd

platforms		darwin
distname		xft-${version}
checksums		md5 defb7e801d4938b8b15a426ae57e2f3f

# The patch is a kludge, as it appears ltmain (to become libtool when
# configured) expects EGREP and max_cmd_len to be defined by configure;
# this does so for them, but is hardcoded for max_cmd_len
patchfiles		patch-configure

# Specific version numbers so we pick up DP's installation
depends_lib		lib:libfontconfig.1.0.4:fontconfig lib:libX11.6:XFree86 \
				lib:libXrender.1.2.2:xrender

depends_build	bin:pkg-config:pkgconfig

# include and lib directory order is important, as we need the Xrender.h file
# from the xrender port instead of the default from X11R6
configure.env	CPPFLAGS="-I${prefix}/include -I${x11prefix}/include" \
				LDFLAGS="-L${prefix}/lib -L${x11prefix}/lib" \
				PKG_CONFIG_PATH="${prefix}/lib/pkgconfig:/usr/X11R6/lib/pkgconfig"
configure.args	--disable-static --mandir=${prefix}/share/man

